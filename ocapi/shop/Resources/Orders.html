<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" xml:lang="en-us">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-148075995-1" xml:space="preserve"><!-- --></script>
<script xml:space="preserve">
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-148075995-1');
</script>

<link href="https://developer.salesforce.com/docs/commerce/b2c-commerce/references/ocapi-shop-api?meta=Summary" rel="canonical"/><meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

<meta content="(C) Copyright 2023" name="copyright"/>
<meta content="(C) Copyright 2023" name="DC.rights.owner"/>
<meta content="concept" name="DC.Type"/>
<meta content="Orders resource (Shop API 23.2)" name="DC.Title"/>
<meta content="" name="abstract"/>
<meta content="" name="description"/>
<meta content="XHTML" name="DC.Format"/>
<meta content="id1963723735" name="DC.Identifier"/>
<meta content="en-us" name="DC.Language"/>
<link href="../../../../css/commonltr.css" rel="stylesheet" type="text/css"/><script src="../../../../scripts/jquery-3.5.0.min.js" type="text/javascript" xml:space="preserve"> //  // </script><script src="../../../../scripts/dwScript.js" type="text/javascript" xml:space="preserve"> //  // </script>
<title>Orders resource (Shop API 23.2)</title>
<!-- text added to HEAD tag-->
<script src="../../../../../../advanced/synchWithToc.js" type="text/javascript" xml:space="preserve"><!-- --></script>

<link charset="ISO-8859-1" href="../../../../../../content/org.eclipse.help.webapp/advanced/breadcrumbs.css" rel="stylesheet" type="text/css"/>
<script src="../../../../../../content/org.eclipse.help/livehelp.js" type="text/javascript" xml:space="preserve"> </script>
<script type="text/javascript">
if( self == "blah" ){
  var  anchorParam = location.hash.length > 0 ? '\u0026anchor=' + location.hash.substr(1) : '';
  window.location.replace( "../../../../../../index.jsp?topic=%2Fcom.demandware.dochelp%2FOCAPI%2Fcurrent%2Fshop%2FResources%2FOrders.html" + anchorParam);
}
</script>
<style>
@import url(//fonts.googleapis.com/css?family=Salesforce+Sans:400,400italic,bold,bolditalic);

/*
 | This file is part of the DITA Open Toolkit project. See the accompanying license.txt file for
 | applicable licenses.
*/
/*
 | (c) Copyright IBM Corp. 2004, 2005 All Rights Reserved.
 */
.unresolved { background-color: skyblue }
.noTemplate { background-color: yellow }
.base { background-color: #ffffff }
/* Add space for top level topics */
/*.nested0 { margin-top : 1em }*/
/* div with class=p is used for paragraphs that contain blocks, to keep the XHTML valid */
.p { margin-top: 1em }
/* Default of italics to set apart figure captions */
.figcap { font-style: italic }
.figdesc { font-style: normal }
/* Use @frame to create frames on figures */
.figborder {
    border-style: solid;
    padding-left : 3px;
    border-width : 2px;
    padding-right : 3px;
    margin-top: 1em;
    border-color : Silver;
}
.figsides {
    border-left : 2px solid;
    padding-left : 3px;
    border-right : 2px solid;
    padding-right : 3px;
    margin-top: 1em;
    border-color : Silver;
}
.figtop {
    border-top : 2px solid;
    margin-top: 1em;
    border-color : Silver;
}
.figbottom {
    border-bottom : 2px solid;
    border-color : Silver;
}
.figtopbot {
    border-top : 2px solid;
    border-bottom : 2px solid;
    margin-top: 1em;
    border-color : Silver;
}
/* Most link groups are created with <div>. Ensure they have space before and after. */
.ullinks {
  list-style-type: none;
}
.ulchildlink {
  margin-top: 1em;
  margin-bottom: 1em;
}
.olchildlink {
  margin-top: 1em;
  margin-bottom: 1em;
}
.linklist {
  margin-bottom: 1em;
}
.linklistwithchild {
    margin-left: 1.5em;
    margin-bottom: 1em;
}
.sublinklist {
    margin-left: 1.5em;
    margin-bottom: 1em;
}
.relconcepts {
    margin-top: 1em;
    margin-bottom: 1em;
}
.reltasks {
    margin-top: 1em;
    margin-bottom: 1em;
}
.relref {
    margin-top: 1em;
    margin-bottom: 1em;
}
.relinfo {
    margin-top: 1em;
    margin-bottom: 1em;
}
.breadcrumb {
    font-size : 1em;
    margin-bottom: 1em;
}
dt.prereq { margin-left : 20px }
/* Set heading sizes, getting smaller for deeper nesting */
.topictitle1 {
    color: #333333;
    font-size: 2em;
    font-weight: bold;
    line-height: 1.5em;
	margin-top: .5em
}
.topictitle2 {
    font-size: 1.6em;
    font-weight: bold;
    line-height: 1.5em;
}
.topictitle3 {
    /* margin-top: 1pc;
    margin-bottom: .17em;*/
    font-size: 1.4em;
    font-weight: bold;
    line-height: 1.5em;
}
.topictitle4 {
    /* margin-top: .83em; */
    font-size: 1.4em;
}
.topictitle5 { font-size: 1.2em }
.topictitle6 {
    font-size: 1.2em;
    font-style: italic;
}
.sectiontitle {
    font-size: 1.6em;
    font-style: bold;
}
.section {
    margin-top: 1em;
    margin-bottom: 1em;
}
.example {
    margin-top: 1em;
    margin-bottom: 1em;
}
div.tasklabel {
    margin-top: 1em;
    margin-bottom: 1em;
}
h2.tasklabel,
h3.tasklabel,
h4.tasklabel,
h5.tasklabel,
h6.tasklabel { font-size: 100% }
/* All note formats have the same default presentation */
.note {
    margin-top: 1em;
    margin-bottom : 1em;
}
.notetitle { font-weight: bold }
.notelisttitle { font-weight: bold }
.tip {
    margin-top: 1em;
    margin-bottom : 1em;
}
.tiptitle { font-weight: bold }
.fastpath {
    margin-top: 1em;
    margin-bottom : 1em;
}
.fastpathtitle { font-weight: bold }
.important {
    margin-top: 1em;
    margin-bottom : 1em;
}
.importanttitle { font-weight: bold }
.remember {
    margin-top: 1em;
    margin-bottom : 1em;
}
.remembertitle { font-weight: bold }
.restriction {
    margin-top: 1em;
    margin-bottom : 1em;
}
.restrictiontitle { font-weight: bold }
.attention {
    margin-top: 1em;
    margin-bottom : 1em;
}
.attentiontitle { font-weight: bold }
.dangertitle { font-weight: bold }
.danger {
    margin-top: 1em;
    margin-bottom : 1em;
}
.cautiontitle { font-weight: bold }
.caution {
    font-weight: bold;
    margin-bottom : 1em;
}
.warning {
    margin-top: 1em;
    margin-bottom : 1em;
}
.warningtitle { font-weight: bold }
/* Simple lists do not get a bullet */
ul.simple { list-style-type: none }
/* Used on the first column of a table, when rowheader="firstcol" is used */
.firstcol { font-weight : bold }
/* Various basic phrase styles */
.bold { font-weight: bold }
.boldItalic {
    font-weight: bold;
    font-style: italic;
}
.italic { font-style: italic }
.underlined { text-decoration: underline }
.uicontrol { font-weight: bold }
.parmname { font-weight: bold }
.kwd { font-weight: bold }
.defkwd {
    font-weight: bold;
    text-decoration: underline;
}
.var { font-style : italic }
.shortcut { text-decoration: underline }
/* Default of bold for definition list terms */
.dlterm { font-weight: bold }
/* Use CSS to expand lists with @compact="no" */
.dltermexpand {
    font-weight: bold;
    margin-top: 1em;
}
*[compact="yes"]>li { margin-top: 0em }
*[compact="no"]>li { margin-top: .53em }
.liexpand {
    margin-top: 1em;
    margin-bottom: 1em;
}
.sliexpand {
    margin-top: 1em;
    margin-bottom: 1em;
}
.dlexpand {
    margin-top: 1em;
    margin-bottom: 1em;
}
.ddexpand {
    margin-top: 1em;
    margin-bottom: 1em;
}
.stepexpand {
    margin-top: 1em;
    margin-bottom: 1em;
}
.substepexpand {
    margin-top: 1em;
    margin-bottom: 1em;
}
/* Align images based on @align on topic/image */
div.imageleft { text-align: left }
div.imagecenter { text-align: center }
div.imageright { text-align: right }
div.imagejustify { text-align: justify }
/* The cell border can be turned on with
   {border-right:solid}
   This value creates a very thick border in Firefox (does not match other tables)

   Firefox works with
   {border-right:solid 1pt}
   but this causes a barely visible line in IE */

pre.screen {
    padding: 5px 5px 5px 5px;
    border: outset;
    background-color: #CCCCCC;
    margin-top: 2px;
    margin-bottom : 2px;
    white-space: pre;
}
/* Demandware Styles */

span.filepath {
    color: #000000;
    font-family: "Courier New", Courier, "Lucida Console", Monaco, monospace;
}
html {
    background: none repeat scroll 0 0 #FFFFFF;
    padding: 10px 0;
}

.nocellnorowborder {
    border: 1px solid #ACB1B7;
}

.cellrowborder {
   border: 1px solid #ACB1B7;
}
.row-nocellborder {
    border: 1px solid #ACB1B7;
}
.cell-norowborder {
    border: 1px solid #ACB1B7;
}

.topictitle1{
    color: #253045;
    font-family: "Salesforce Sans", "Courier Bold", Courier, Georgia, Times, "Times New Roman", serif;
    font-weight: normal;
}
.topictitle2{
    color: #253045;
    font-family: "Salesforce Sans", "Courier Bold", Courier, Georgia, Times, "Times New Roman", serif;
    font-weight: normal;
}
.topictitle3{
    color: #253045;
    font-family: "Salesforce Sans", "Courier Bold", Courier, Georgia, Times, "Times New Roman", serif;
    font-weight: normal;
}
.sectiontitle{
    color: #706e6b;
    font-family: "Salesforce Sans", "Courier Bold", Courier, Georgia, Times, "Times New Roman", serif;
    font-weight: normal;
}

body {
    /* background: none repeat scroll 0 0 #F9F9F9;
    border: 1px solid #DADADA;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    */
    color: #111111;
    font-family: "Salesforce Sans", Helvetica, Arial, sans-serif;
    font-size: .8em;
    line-height: 1.4em;
    padding: 10px;
}
li { padding-top: 1em }
p.subheading1 { font-size: 1.4em }
p.subheading2 { font-size: 1.2em }
.copyright_footer {
	 font-size: 1em;
	 font-style: italic;
}
a:link,
a:visited { color: #008CB9 }
a:hover,
a:focus {
    color: #3778C7;
    text-decoration: underline;
}
strong { color: #000000 }
.help_breadcrumbs,
.help_breadcrumbs a {
    color: #1589ee;
    font-size: 13px;
    font-weight: normal;
    padding: 0 0 0px;
    text-decoration: none;
	margin: 0px;
}
.help_breadcrumbs a:hover { text-decoration: underline }
.related-links { font-size: 11px }
div.header{
	line-height: 1em;
}

.alignleft {
	float: left;
	font-size: 1em;
	font-style: italic;
	margin: 0px;
	padding: 0px;

}
.alignright {
	float: right;
	margin: 0px;
	padding: 0px;
}

li table {
	margin-top: 1em;
	margin-bottom: 1em;
}

div.tablenoborder {
	margin-top: 1em;
}


table {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 1px solid #E6E6E6;
    border-collapse: collapse;
    padding: 5px;
}
table th {
    /* filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#eef0f4', endColorstr = '#ccd1d8');; ;
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr = '#eef0f4', endColorstr = '#ccd1d8')";
    background-image: -moz-linear-gradient(top, #eef0f4, #ccd1d8);
    background-image: -ms-linear-gradient(top, #eef0f4, #ccd1d8);
    background-image: -o-linear-gradient(top, #eef0f4, #ccd1d8);
    background-image: -webkit-gradient(linear, center top, center bottom, from(#eef0f4), to(#ccd1d8));
    background-image: -webkit-linear-gradient(top, #eef0f4, #ccd1d8);
    background-image: linear-gradient(top, #eef0f4, #ccd1d8);*/
    background: url("../com.demandware.standard.infocenter/doc/icon_note.png") no-repeat scroll 6px 9px #efefef;
    color: #4F5762;
    font-size: 1em;
    font-weight: bold;
    /* padding: 10px 3px 8px 5px; */
    padding: 1em;
}
table.table td,
table.simpletable td {
    border: 1px solid #ACB1B7;
    /* filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#ffffff', endColorstr = '#e5e5e5');
    /*INNER ELEMENTS MUST NOT BREAK THIS ELEMENTS BOUNDARIES*//*Element must have a height (not auto)*//*All filters must be placed together*/
    /*-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr = '#ffffff', endColorstr = '#e5e5e5')"; */
    /*Element must have a height (not auto)*//*All filters must be placed together*/
    /* background-image: -moz-linear-gradient(top, #ffffff, #e5e5e5);
    background-image: -ms-linear-gradient(top, #ffffff, #e5e5e5);
    background-image: -o-linear-gradient(top, #ffffff, #e5e5e5);
    background-image: -webkit-gradient(linear, center top, center bottom, from(#ffffff), to(#e5e5e5));
    background-image: -webkit-linear-gradient(top, #ffffff, #e5e5e5);
    background-image: linear-gradient(top, #ffffff, #e5e5e5);*/
    /*--IE9 DOES NOT SUPPORT CSS3 GRADIENT BACKGROUNDS--*/
    /* padding: 12px 3px 12px 5px; */
    padding: 1em;
}
table.copyright_table {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 1px solid #FFFFFF;
    border-collapse: collapse;
    padding: 0px;
	margin:0;
}

table.copyright_table td {
    padding: 0px;
	margin:0;
}

body .resultofText {
    background-color: transparent;
    color: #60a345;
}
pre {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 1px solid #999999;
    color: #000000;
    font-family: "Courier New", Courier, "Lucida Console", Monaco, monospace;
    /* font-weight: bold; */
    margin: 8px;
    padding: 8px;
    overflow-x: auto;
}
pre code {
    font-family: "Courier New", Courier, "Lucida Console", Monaco, monospace;
}
.codeph {
    color: #000000;
    font-family: "Courier New", Courier, "Lucida Console", Monaco, monospace;
}
.note {
    background: url("../com.demandware.standard.infocenter/doc/icon_note.png") no-repeat scroll 6px 9px #efefef;
    border: 1px solid #ffffff;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    color: #333333;
/*    font-family: Verdana,Arial,Helvetica,sans-serif;  */
    font-size: 1em;
    padding: 10px 10px 10px 26px;
}
.hidden { display: none; }
.shown { display: block; }
div[role=search]{
	background-color: #25282A;
	color: #CCCCCC;
}
a:link.scopeLabel {color:#FFB549;}
#cookieConsent {
    background-color: rgba(20,20,20,0.8);
    min-height: 26px;
    font-size: 14px;
    color: #ccc;
    line-height: 26px;
    padding: 8px 0 8px 30px;
    font-family: "Trebuchet MS",Helvetica,sans-serif;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    display: none;
    z-index: 9999;
}
#cookieConsent a {
    color: #4B8EE7;
    text-decoration: none;
}
#closeCookieConsent {
    float: right;
    display: inline-block;
    cursor: pointer;
    height: 20px;
    width: 20px;
    margin: -15px 0 0 0;
    font-weight: bold;
}
#closeCookieConsent:hover {
    color: #FFF;
}
#cookieConsent a.cookieConsentOK {
    background-color: #F1D600;
    color: #000;
    display: inline-block;
    border-radius: 5px;
    padding: 0 20px;
    cursor: pointer;
    float: right;
    margin: 0 60px 0 10px;
}
#cookieConsent a.cookieConsentOK:hover {
    background-color: #E0C91F;
}
#ocapiDeprecationBanner {
    background-color: #0747a6;
    min-height: 26px;
    font-size: 14px;
    color: white;
    line-height: 26px;
    padding: 8px 0 8px 30px;
    font-family: "Trebuchet MS",Helvetica,sans-serif;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    display: none;
    z-index: 9999;
}
#ocapiDeprecationBanner a {
    color: #4B8EE7;
    text-decoration: none;
}
#closeDeprecationBanner {
    float: right;
    display: inline-block;
    cursor: pointer;
    height: 20px;
    width: 20px;
    margin: -15px 0 0 0;
    font-weight: bold;
}
.help_breadcrumbs { display: none !important; }
.copyright_table td { display: none; }
copyright_table td:nth-child(4) { display: table-cell; }
</style>
<body id="id1963723735">
<div class="help_breadcrumbs"><a href="../../../../../../topic/com.demandware.dochelp/content/b2c_commerce/topics/getting_started/b2c_welcome.html" shape="rect">Salesforce B2C Commerce 23.6</a> &gt; <a href="../../../../../../topic/com.demandware.dochelp/OCAPI/current/usage/OpenCommerceAPI.html" shape="rect">Open Commerce API 23.2</a> &gt; <a href="../../../../../../topic/com.demandware.dochelp/OCAPI/current/usage/ShopAPIResources.html" shape="rect">Shop API resources 23.2</a></div>

<div><!-- text added to header of html--></div>
      <h1 class="title topictitle1" id="ariaid-title1">Orders resource (Shop API 23.2)</h1>

      
      <div class="body conbody"><p class="shortdesc"> </p>
<div class="section" id="id1963723735__Summary"><h2 class="title sectiontitle">Summary</h2>
      
      
<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e32" rowspan="1" style="text-align:left;vertical-align:top;">Http Method</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e34" rowspan="1" style="text-align:left;vertical-align:top;">Resource</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e36" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e32" rowspan="1" style="text-align:left;vertical-align:top;">POST</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Orders.html#id1963723735__id650939338" shape="rect">/orders</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e36" rowspan="1" style="text-align:left;vertical-align:top;">Submits an order based on a prepared basket. <p class="lines pdfonly"><!-- --></p>
 Note: If the basket has been
 submitted using Order Center (considered by it's client id) the channel type will be set to "Call Center". In
 case another channel type was set by a script before submitting the basket, the channel type will be reset to
 "Call Center" and a warning will be logged. The only considered value from the request body is <strong class="ph b">basket_id</strong>.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e32" rowspan="1" style="text-align:left;vertical-align:top;">PUT</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Orders.html#id1963723735__id1158782724" shape="rect">/orders/{order_no}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e36" rowspan="1" style="text-align:left;vertical-align:top;">Submits an order with a given order number, based on a prepared basket. <p class="lines pdfonly"><!-- --></p>
 The
 only considered value from the request body is <strong class="ph b">basket_id</strong>.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e32" rowspan="1" style="text-align:left;vertical-align:top;">GET</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Orders.html#id1963723735__id1089966539" shape="rect">/orders/{order_no}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e36" rowspan="1" style="text-align:left;vertical-align:top;">Gets information for an order.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e32" rowspan="1" style="text-align:left;vertical-align:top;">PATCH</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Orders.html#id1963723735__id-1396524611" shape="rect">/orders/{order_no}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e36" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">Update an order.</p>


 <p class="p">Considered fields for update are status (same status transitions are possible as for dw.order.Order.setStatus(int
 status) plus CREATED to FAILED) and custom properties. During the call the correct channel type will be assured to be set for the order
 in a successful call. Without agent context the channel type will be storefront otherwise callcenter.</p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e32" rowspan="1" style="text-align:left;vertical-align:top;">POST</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Orders.html#id1963723735__id1217882115" shape="rect">/orders/{order_no}/notes</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e36" rowspan="1" style="text-align:left;vertical-align:top;">Adds a note to an existing order.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e32" rowspan="1" style="text-align:left;vertical-align:top;">GET</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Orders.html#id1963723735__id-1665909991" shape="rect">/orders/{order_no}/notes</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e36" rowspan="1" style="text-align:left;vertical-align:top;">Retrieves notes for an order.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e32" rowspan="1" style="text-align:left;vertical-align:top;">DELETE</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Orders.html#id1963723735__id532105101" shape="rect">/orders/{order_no}/notes/{note_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e36" rowspan="1" style="text-align:left;vertical-align:top;">Removes an order note.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e32" rowspan="1" style="text-align:left;vertical-align:top;">POST</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Orders.html#id1963723735__id395462545" shape="rect">/orders/{order_no}/payment_instruments</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e36" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
 Adds a payment instrument to an order. It is possible either to supply the full payment information or only a
 customer payment instrument id and amount. In case the customer payment instrument id was set all the other
 properties (except amount) are ignored and the payment data is resolved from the stored customer payment
 information. An attempt is made to authorize the order by passing it to the authorize or authorizeCreditCard
 hook.
 </p>

 <p class="p">
 Details:
 </p>

 <ul class="ul">
 <li class="li">The payment instrument is added with the provided details or the details from the customer payment
 instrument. The payment method must be applicable for the order see <code class="ph codeph">GET
 /baskets/{basket_id}/payment_methods</code>, if the payment method is 'CREDIT_CARD' <code class="ph codeph">a
 payment_card</code> must be specified in the request.</li>

 <li class="li">
 <p class="p">
 Order authorization:
 </p>

 <p class="p">
 To authorize the order one of two possible customization hooks is called and an
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> is passed as an input argument.
 </p>

 <p class="p">
 Which hook is called?
 </p>

 <ul class="ul">
 <li class="li">If the request includes a <code class="ph codeph">payment_card</code> or the
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> contains a <code class="ph codeph">creditCardType</code> the customization
 hook <code class="ph codeph">dw.order.payment.authorizeCreditCard</code> is called. See
 <code class="ph codeph">dw.order.hooks.PaymentHooks.authorizeCreditCard(order : Order, paymentDetails : OrderPaymentInstrument,
 cvn : String) : Status</code>.</li>

 <li class="li">Otherwise <code class="ph codeph">dw.order.payment.authorize</code> is called. See
 <code class="ph codeph">dw.order.hooks.PaymentHooks.authorize(order : Order, paymentDetails : OrderPaymentInstrument) :
 Status</code>.</li>

 </ul>

 <p class="p">
 What is the <code class="ph codeph">dw.order.OrderPaymentInstrument</code> input argument passed to the hook?
 </p>

 <ul class="ul">
 <li class="li">If the request contains a <code class="ph codeph">customer_payment_instrument_id</code> the
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> is copied from the customer payment instrument (An exception is
 thrown if none was found).</li>

 <li class="li">Otherwise the data from the request document is passed (<code class="ph codeph">payment_card</code> or
 <code class="ph codeph">payment_bank_account</code> etc. information).</li>

 </ul>

 <p class="p">
 Note: the <code class="ph codeph">amount</code> and the <code class="ph codeph">security_code</code> (cvn) contained in the
 <code class="ph codeph">payment_card</code> data will be propagated if available to
 <code class="ph codeph">dw.order.payment.authorizeCreditCard</code> even if the
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> is resolved from a customer payment instrument.
 </p>

 </li>

 <li class="li">Customization hook <code class="ph codeph">dw.ocapi.shop.order.afterPostPaymentInstrument</code> is called. The default
 implementation places the order if the order status is CREATED and the authorization amount equals or exceeds the
 order total. Placing the order (equivalent to calling <code class="ph codeph">dw.order.OrderMgr.placeOrder(order :
 Order)</code> in the scripting API) results in the order being changed to status <code class="ph codeph">NEW</code> and
 prepared for export.</li>

 </ul>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e32" rowspan="1" style="text-align:left;vertical-align:top;">PATCH</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Orders.html#id1963723735__id-742188022" shape="rect">/orders/{order_no}/payment_instruments/{payment_instrument_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e36" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
 Updates a payment instrument of an order and passes the order and updated payment instrument to the correct
 payment authorizeCreditcard or authorize hook.
 </p>

 <p class="p">
 Details:
 </p>

 <ul class="ul">
 <li class="li">The payment instrument is updated with the provided details. The payment method must be applicable for the
 order see <code class="ph codeph">GET /baskets/{basket_id}/payment_methods</code>, if the payment method is 'CREDIT_CARD' a
 <code class="ph codeph">payment_card</code> must be specified in the request.</li>

 <li class="li">
 <p class="p">
 Order authorization:
 </p>

 <p class="p">
 To authorize the order one of two possible customization hooks is called and an
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> is passed as an input argument.
 </p>

 <p class="p">
 Which hook is called?
 </p>

 <ul class="ul">
 <li class="li">If the request includes a <code class="ph codeph">payment_card</code> or the
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> contains a <code class="ph codeph">creditCardType</code> the customization
 hook <code class="ph codeph">dw.order.payment.authorizeCreditCard</code> is called. See
 <code class="ph codeph">dw.order.hooks.PaymentHooks.authorizeCreditCard(order : Order, paymentDetails : OrderPaymentInstrument,
 cvn : String) : Status</code>.</li>

 <li class="li">Otherwise <code class="ph codeph">dw.order.payment.authorize</code> is called. See
 <code class="ph codeph">dw.order.hooks.PaymentHooks.authorize(order : Order, paymentDetails : OrderPaymentInstrument) :
 Status</code>.</li>

 </ul>

 <p class="p">
 What is the <code class="ph codeph">dw.order.OrderPaymentInstrument</code> input argument passed to the hook?
 </p>

 <ul class="ul">
 <li class="li">If the request contains a <code class="ph codeph">customer_payment_instrument_id</code> the
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> is copied from the customer payment instrument (An exception is
 thrown if none was found).</li>

 <li class="li">Otherwise the data from the request document is passed (<code class="ph codeph">payment_card</code> or
 <code class="ph codeph">payment_bank_account</code> etc. information).</li>

 </ul>

 <p class="p">
 Note: the <code class="ph codeph">amount</code> and the <code class="ph codeph">security_code</code> (cvn) contained in the
 <code class="ph codeph">payment_card</code> data will be propagated if available to
 <code class="ph codeph">dw.order.payment.authorizeCreditCard</code> even if the
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> is resolved from a customer payment instrument.
 </p>

 </li>

 <li class="li">Customization hook <code class="ph codeph">dw.ocapi.shop.order.afterPatchPaymentInstrument</code> is called. The default
 implementation places the order if the order status is CREATED and the authorization amount equals or exceeds the
 order total. Placing the order (equivalent to calling <code class="ph codeph">dw.order.OrderMgr.placeOrder(order :
 Order)</code> in the scripting API) results in the order being changed to status <code class="ph codeph">NEW</code> and
 prepared for export.</li>

 </ul>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e32" rowspan="1" style="text-align:left;vertical-align:top;">DELETE</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Orders.html#id1963723735__id-1926703731" shape="rect">/orders/{order_no}/payment_instruments/{payment_instrument_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e36" rowspan="1" style="text-align:left;vertical-align:top;">Removes a payment instrument of an order.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e32" rowspan="1" style="text-align:left;vertical-align:top;">GET</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Orders.html#id1963723735__id733875361" shape="rect">/orders/{order_no}/payment_methods</a></td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e36" rowspan="1" style="text-align:left;vertical-align:top;">Gets the applicable payment methods for an existing order considering the open payment amount only.</td>
</tr>

          </tbody>
</table>
</div>

    </div>
<div class="section" id="id1963723735__id650939338"><h2 class="title sectiontitle">Submit basket</h2>
      
      <p class="p"><!-- --></p>
Submits an order based on a prepared basket. <p class="lines pdfonly"><!-- --></p>
 Note: If the basket has been
 submitted using Order Center (considered by it's client id) the channel type will be set to "Call Center". In
 case another channel type was set by a script before submitting the basket, the channel type will be reset to
 "Call Center" and a warning will be logged. The only considered value from the request body is <strong class="ph b">basket_id</strong>.
      <p class="p subheading1" id="id1963723735__id356592997">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>POST https://hostname:port/dw/shop/v23_2/orders</code></pre>
      <p class="p subheading1" id="id1963723735__id-295861166">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id1963723735__id1967588546">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e436" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e438" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e436" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e438" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e436" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e438" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id1636382869">Request Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id1963723735__id1778280655">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Order.html#id-2029167375" shape="rect">Order</a></p>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id1963723735__id1363089115">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e501" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e503" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e505" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e507" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e501" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e503" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">GiftCertificateCreationException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e505" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e507" rowspan="1" style="text-align:left;vertical-align:top;">Thrown if a failure during the creation of a gift certificate for a gift
             certificate item.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e501" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e503" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidBasketIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e505" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e507" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket id in the request body is null or empty.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e501" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e503" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductItemException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e505" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">productId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e507" rowspan="1" style="text-align:left;vertical-align:top;">Indicates an invalid product item.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e501" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e503" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductOptionItemException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e505" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">optionId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e507" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that an option with the specified option id is unknown.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e501" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e503" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductOptionValueItemException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e505" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">optionValueId (String)</p>
<p class="p">optionId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e507" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that an option with the specified option value id is
             unknown.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e501" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e503" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">ProductItemNotAvailableException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e505" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">productId (String)</p>
<p class="p">quantity (Decimal)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e507" rowspan="1" style="text-align:left;vertical-align:top;">Thrown if a product item is not available.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e501" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e503" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e505" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e507" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the verified
             customer represented by the JWT, not relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e501" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e503" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">ValidationException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e505" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">validationMessage (String)</p>
<p class="p">validationPath (String)</p>
<p class="p">validationType (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e507" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket contains flashes.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e501" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e503" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e505" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e507" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id1963723735__id1271206985">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e632" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e634" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e632" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.beforePOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e634" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePOST</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before
 an order is created for the basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e632" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.afterPOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e634" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPOST</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after an order was created from the basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the order that was created for the basket</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e632" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.modifyPOSTResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e634" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPOSTResponse</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, orderResponse : <a class="xref" href="../Documents/Order.html" shape="rect">
          Order
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - target order</dd>
<dd class="dd pd ddexpand">orderResponse - order response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e632" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e634" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
 <pre class="pre" xml:space="preserve"> exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
 </pre>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id1735033332">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
POST /dw/shop/v23_2/orders HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json
{
  "basket_id" : "cdxEQiWbNVZZaaaadhKBc35gtp"
}


# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Cache-Control: max-age=0,no-cache,no-store,must-revalidate
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "adjusted_merchandize_total_tax" : 0.05,
   "adjusted_shipping_total_tax" : 0.00,
   "billing_address" : {
      "city" : "Boston",
      "country_code" : "US",
      "first_name" : "Jeff",
      "full_name" : "Jeff Lebowski",
      "last_name" : "Lebowski",
      "c_strValue" : "cTest"
   },
   "creation_date" : "2014-11-06T13:36Z",
   "currency" : "USD",
   "customer_info" : {
      "customer_no" : "jlebowski",
      "email" : "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="29434c4f4f69454c4b465e5a4240074a4644">[email&#160;protected]</a>"
   },
   "merchandize_total_tax" : 5.00,
   "order_no" : "00000101",
   "order_token" : "XizrH5hY1vB-Mxno-zfoCqTkegl3y7_OrRPGNZFlYG8",
   "order_total" : 1.06,
   "payment_instruments" : [
      {
         "amount" : 1.00,
         "payment_bank_account" : {
            "drivers_license_last_digits" : "ense",
            "drivers_license_masked" : "**************ense",
            "number_last_digits" : "mber",
            "number_masked" : "*************mber"
         },
         "id" : "cdKCIiWbNVndQaaadhlSa35gtp",
         "payment_card" : {
            "card_type" : "testVisa",
            "credit_card_expired" : false,
            "expiration_month" : 4,
            "expiration_year" : 21.2,
            "holder" : "TestPerson",
            "number_last_digits" : "mber",
            "number_masked" : "**********mber"
         },
         "payment_method_id" : "OCAPI_Payment_Simple"
      }
   ],
   "product_items" : [
      {
         "adjusted_tax" : 5.00,
         "base_price" : 16.49,
         "bonus_product_line_item" : false,
         "item_text" : "Simple Product",
         "price" : 16.49,
         "price_after_item_discount" : 16.49,
         "price_after_order_discount" : 1.00,
         "product_id" : "SimpleProduct",
         "product_name" : "Simple Product",
         "quantity" : 1.00,
         "tax" : 5.00,
         "tax_basis" : 16.49,
         "tax_class_id" : null,
         "tax_rate" : 0.05,
         "item_id" : "cdHBEiWbNV9ZcaaadhrCk35gtp",
         "c_strValue" : "Test"
      }
   ],
   "product_sub_total" : 16.49,
   "product_total" : 1.00,
   "shipments" : [
      {
         "id" : "me",
         "shipping_address" : {
            "city" : "Boston",
            "country_code" : "US",
            "first_name" : "Jeff",
            "full_name" : "Jeff Lebowski",
            "last_name" : "Lebowski",
            "c_strValue" : "cTest"
         },
         "shipping_method" : {
            "description" : {
               "default" : "The base shipping method."
            },
            "id" : "BaseShippingMethod",
            "name" : {
               "default" : "Base Shipping Method"
            },
            "price" : 0.01,
            "c_somestring" : "ShippingMethod String Value"
         }
      }
   ],
   "shipping_items" : [
      {
         "adjusted_tax" : 0.00,
         "base_price" : 0.01,
         "item_text" : "Shipping",
         "price" : 0.01,
         "price_after_item_discount" : 0.01,
         "shipment_id" : "me",
         "tax" : 0.00,
         "tax_basis" : 0.01,
         "tax_class_id" : "DefaultTaxClass",
         "tax_rate" : 0.05,
         "item_id" : "devgoiWbNVc92aaadhrSk35gtp"
      }
   ],
   "shipping_total" : 0.01,
   "shipping_total_tax" : 0.00,
   "status" : "created",
   "tax_total" : 0.05,
   "c_strValue" : "before submit basket",
   "c_textValue" : "after submit basket"
}


# in case of validation failure:

RESPONSE:
HTTP/1.1 404 NOT FOUND
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: no-cache,no-store,must-revalidate
{
   "_v" : "23.2",
   "fault" : {
      "type" : "BasketNotFoundException",
      "message" : "No basket with ID '123' was found."
   }
}
</code></pre></div>

    </div>
<div class="section" id="id1963723735__id1158782724"><h2 class="title sectiontitle">Submit basket with given order number</h2>
      
      <p class="p"><!-- --></p>
Submits an order with a given order number, based on a prepared basket. <p class="lines pdfonly"><!-- --></p>
 The
 only considered value from the request body is <strong class="ph b">basket_id</strong>.
      <p class="p subheading1" id="id1963723735__id-1650878485">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>PUT https://hostname:port/dw/shop/v23_2/orders/{order_no}</code></pre>
      <p class="p subheading1" id="id1963723735__id1741765592">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id1963723735__id1533340284">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e880" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e882" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e880" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e882" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT. A valid user is required.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e880" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e882" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id935630799">Request Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id1963723735__id1529802965">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Order.html#id-2029167375" shape="rect">Order</a></p>
<p class="p subheading1" id="id1963723735__id1789661888">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e936" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e938" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e940" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e942" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e936" rowspan="1" style="text-align:left;vertical-align:top;">order_no</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e938" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e940" rowspan="1" style="text-align:left;vertical-align:top;">The order number to assign to the new order.</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e942" rowspan="1" style="text-align:left;vertical-align:top;">maxLength=50, minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id1963723735__id-95201643">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e984" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e986" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e988" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e990" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e984" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e986" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">GiftCertificateCreationException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e988" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e990" rowspan="1" style="text-align:left;vertical-align:top;">Thrown if a failure during the creation of a gift certificate for a gift
             certificate item.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e984" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e986" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidBasketIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e988" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e990" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket id in the request body is null or empty.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e984" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e986" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductItemException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e988" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">productId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e990" rowspan="1" style="text-align:left;vertical-align:top;">Indicates an invalid product item.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e984" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e986" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductOptionItemException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e988" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">optionId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e990" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that an option with the specified option id is unknown.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e984" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e986" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductOptionValueItemException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e988" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">optionValueId (String)</p>
<p class="p">optionId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e990" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that an option with the specified option value id is
             unknown.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e984" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e986" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">ProductItemNotAvailableException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e988" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">productId (String)</p>
<p class="p">quantity (Decimal)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e990" rowspan="1" style="text-align:left;vertical-align:top;">Thrown if a product item is not available.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e984" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e986" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e988" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e990" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the verified
             customer represented by the JWT, not relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e984" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e986" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">ValidationException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e988" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">validationMessage (String)</p>
<p class="p">validationPath (String)</p>
<p class="p">validationType (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e990" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket contains flashes.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e984" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e986" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e988" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e990" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e984" rowspan="1" style="text-align:left;vertical-align:top;">409</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e986" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">DuplicateOrderNumberException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e988" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">orderNo (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e990" rowspan="1" style="text-align:left;vertical-align:top;">409 CONFLICT Indicates that the requested order number is already allocated
             to an existing order.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id1963723735__id-405369009">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e1126" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e1128" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e1126" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.beforePUT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e1128" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePUT</strong>
      (ctor : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before an order is created for the basket with the caller supplying the order number.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e1126" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.afterPUT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e1128" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPUT</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after an order is created for the basket with the caller supplying the order number.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the order that was created for the basket</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e1126" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.modifyPUTResponse</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e1128" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPUTResponse</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, orderResponse : <a class="xref" href="../Documents/Order.html" shape="rect">
          Order
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - target order</dd>
<dd class="dd pd ddexpand">orderResponse - order response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id276742574">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
PUT /dw/shop/v23_2/orders/123OrderNumber456 HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json
{
  "basket_id" : "cdxEQiWbNVZZaaaadhKBc35gtp"
}


# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Cache-Control: max-age=0,no-cache,no-store,must-revalidate
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
...
   "order_no" : "123OrderNumber456",
   "order_token" : "XizrH5hY1vB-Mxno-zfoCqTkegl3y7_OrRPGNZFlYG8",
...
}


# in case of validation failure:

RESPONSE:
HTTP/1.1 404 NOT FOUND
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: no-cache,no-store,must-revalidate
{
   "_v" : "23.2",
   "fault" : {
      "type" : "BasketNotFoundException",
      "message" : "No basket with ID 'cdxEQiWbNVZZaaaadhKBc35gtp' was found."
   }
}

# in case order with order number exists:

RESPONSE:
HTTP/1.1 409 CONFLICT
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: no-cache,no-store,must-revalidate
{
   "_v" : "23.2",
   "fault" : {
      "type" : "DuplicateOrderNumberException",
      "message" : "An order with order number '123OrderNumber456' already exists."
   }
}</code></pre></div>

    </div>
<div class="section" id="id1963723735__id1089966539"><h2 class="title sectiontitle">Get order</h2>
      
      <p class="p"><!-- --></p>
Gets information for an order.
      <p class="p subheading1" id="id1963723735__id1240521668">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>GET https://hostname:port/dw/shop/v23_2/orders/{order_no}</code></pre>
      <p class="p subheading1" id="id1963723735__id-859772111">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id1963723735__id1720382723">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e1310" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e1312" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e1310" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e1312" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e1310" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e1312" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id-1156446994">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Order.html#id-2029167375" shape="rect">Order</a></p>
<p class="p subheading1" id="id1963723735__id-1001957095">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e1356" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e1358" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e1360" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e1362" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e1356" rowspan="1" style="text-align:left;vertical-align:top;">order_no</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e1358" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e1360" rowspan="1" style="text-align:left;vertical-align:top;">the order number</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e1362" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id1963723735__id2037635100">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e1405" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e1407" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e1409" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e1411" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e1405" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e1407" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">OrderNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e1409" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">orderNumber (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e1411" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the order with the given order number is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id1963723735__id1678874600">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e1446" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e1448" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e1446" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.beforeGET</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e1448" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeGET</strong>
      (orderNo : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before the request will be processed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">orderNo - the order number</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e1446" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.modifyGETResponse</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e1448" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyGETResponse</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, orderResponse : <a class="xref" href="../Documents/Order.html" shape="rect">
          Order
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - target order</dd>
<dd class="dd pd ddexpand">orderResponse - order response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id-1885387979">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
GET /dw/shop/v23_2/orders/1234567890 HTTP/1.1
Host: example.com
Content-Type: application/json; charset=UTF-8

# in case of success:
 
RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Cache-Control: max-age=0,no-cache,no-store,must-revalidate

{
  "_v" : "23.2",
  "_resource_state" : "847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb",
  "_type":"order",
  "creation_date":"2014-06-15T04:02Z",
  "customer_info":{
    "email":"<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="50233f3d35323f3429103528313d203c357e333f3d">[email&#160;protected]</a>"
  },
  "currency":"USD",
  "order_no":"1234567890",
  "order_price_adjustments":[{
    "promotion_id": "10$ off",
    "promotion_link": "https://example.com/dw/shop/v23_2/promotions/10_bugs_off",
    "item_text": "10$ off",
    "price": -10.00
  }],
  "order_token":"8dewokhrqwcdkjs83-46sjfdnbswr982nf63ks0sm-fnk23y6",
  "order_total":101.00,
  "payment_instruments" : [
  {
    "payment_instrument_id" : "ce6QR9aaabmakaaadf1KdLcXoH",
    "payment_method_id" : "CREDIT_CARD",
    "payment_card" : 
    {
      "card_type" : "Visa",
      "expiration_month" : 12,
      "expiration_year" : 21.2,
      "holder" : "Jeff Lebowski",
      "masked_number" : "************1111",
    },
    "amount" : 0.00
  }],
  "product_items":[{
    "product_id":"123",
    "item_text": "Product foo",
    "quantity":2.00,
    "product_name":"foo",
    "base_price":30.00,
    "price":60.00
  },
  {
    "product_id":"456",
    "item_text": "Product foo",
    "quantity":1.00,
    "product_name":"bar",
    "base_price":40.00,
    "price":40.00,
    "price_adjustments":[{
      "promotion_id": "10% off",
      "promotion_link": "https://example.com/dw/shop/v23_2/promotions/10_percent_off",
      "item_text": "10% off",
      "price": -4.00
    }]
  }],
  "product_sub_total":96.00,
  "product_total":86.00,
  "shipping_total":5.00,  
  "shipments":[{
    "id":"default",
    "shipping_address":{
      "salutation":"",
      "title":"",
      "company_name":"",
      "first_name":"",
      "second_name":"",
      "last_name":"",
      "postal_code":"",
      "address1":"",
      "address2":"",
      "city":"",
      "post_box":"",
      "country_code":"",
      "state_code":"",
      "phone":"",
      "suffix":""
    },
    "shipping_method":{
      "id":"001",
      "name":"Ground",
      "description":"Order received within 7-10 business days"
    }}],
  "status":"created",
  "tax_total":9.10
}

# in case of failure:
 
RESPONSE:
HTTP/1.1 404 Requested resource not found
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: max-age=0,no-cache,no-store,must-revalidate
{
  "_v" : "23.2",
  "_type":"fault",
  "fault":{
    "type":"OrderNotFoundException",
    "message":"No order with number '1234567890' was found."
  }
}</code></pre></div>

    </div>
<div class="section" id="id1963723735__id-1396524611"><h2 class="title sectiontitle">Update order</h2>
      
      <p class="p"><!-- --></p>
<p class="p">Update an order.</p>


 <p class="p">Considered fields for update are status (same status transitions are possible as for dw.order.Order.setStatus(int
 status) plus CREATED to FAILED) and custom properties. During the call the correct channel type will be assured to be set for the order
 in a successful call. Without agent context the channel type will be storefront otherwise callcenter.</p>

      <p class="p subheading1" id="id1963723735__id1483626130">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>PATCH https://hostname:port/dw/shop/v23_2/orders/{order_no}</code></pre>
      <p class="p subheading1" id="id1963723735__id390614783">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id1963723735__id833637749">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e1593" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e1595" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e1593" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e1595" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e1593" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e1595" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id-1463607160">Request Document</p>
<p class="p"><a class="xref" href="../Documents/Order.html#id-2029167375" shape="rect">Order</a></p>
<p class="p subheading1" id="id1963723735__id167870268">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Order.html#id-2029167375" shape="rect">Order</a></p>
<p class="p subheading1" id="id1963723735__id1573719783">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e1649" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e1651" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e1653" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e1655" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e1649" rowspan="1" style="text-align:left;vertical-align:top;">order_no</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e1651" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e1653" rowspan="1" style="text-align:left;vertical-align:top;">the order number</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e1655" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id1963723735__id-1247165810">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e1697" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e1699" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e1701" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e1703" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e1697" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e1699" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">NotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e1701" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e1703" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the order with the given order number is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id1963723735__id126249270">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e1736" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e1738" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e1736" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.beforePATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e1738" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePATCH</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, orderInput : <a class="xref" href="../Documents/Order.html" shape="rect">
          Order
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before
 an order is patched.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the order which will be changed</dd>
<dd class="dd pd ddexpand">orderInput - the input data from the REST call</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e1736" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.afterPATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e1738" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPATCH</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, orderInput : <a class="xref" href="../Documents/Order.html" shape="rect">
          Order
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after an
 order was patched.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the order that was changed</dd>
<dd class="dd pd ddexpand">orderInput - the input data from the REST call</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e1736" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.modifyPATCHResponse</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e1738" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPATCHResponse</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, orderResponse : <a class="xref" href="../Documents/Order.html" shape="rect">
          Order
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - target order</dd>
<dd class="dd pd ddexpand">orderResponse - order response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id-875221593">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
PATCH /dw/shop/v23_2/orders/1234567890 HTTP/1.1
Host: example.com
Content-Type: application/json; charset=UTF-8
{
  "_resource_state" : "847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb",
  "status" : "replaced",
  "c_replaced" : true
}

# in case of success:
 
RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Cache-Control: max-age=0,no-cache,no-store,must-revalidate
{
  "_v" : "23.2",
  "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
  "_type":"order",
  "creation_date":"2014-06-15T04:02Z",
  "customer_info":{
    "email":"<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="71021e1c14131e1508311409101c011d145f121e1c">[email&#160;protected]</a>"
  },
  "currency":"USD",
  "order_no":"1234567890",
  "order_price_adjustments":[{
    "promotion_id": "10$ off",
    "promotion_link": "https://example.com/dw/shop/v23_2/promotions/10_off",
    "item_text": "10$ off",
    "price": -10.00
  }],
  "order_token":"8dewokhrqwcdkjs83-46sjfdnbswr982nf63ks0sm-fnk23y6",
  "order_total":101.00,
  "payment_instruments" : [
  {
    "payment_instrument_id" : "ce6QR9aaabmakaaadf1KdLcXoH",
    "payment_method_id" : "CREDIT_CARD",
    "payment_card" : 
    {
      "card_type" : "Visa",
      "expiration_month" : 12,
      "expiration_year" : 21.2,
      "holder" : "Jeff Lebowski",
      "masked_number" : "************1111",
    },
    "amount" : 0.00
  }],
  "product_items":[{
    "product_id":"123",
    "item_text": "Product foo",
    "quantity":2.00,
    "product_name":"foo",
    "base_price":30.00,
    "price":60.00
  },
  {
    "product_id":"456",
    "item_text": "Product foo",
    "quantity":1.00,
    "product_name":"bar",
    "base_price":40.00,
    "price":40.00,
    "price_adjustments":[{
      "promotion_id": "10% off",
      "promotion_link": "https://example.com/dw/shop/v23_2/promotions/10_percent_off",
      "item_text": "10% off",
      "price": -4.00
    }]
  }],
  "product_sub_total":96.00,
  "product_total":86.00,
  "shipping_total":5.00,  
  "shipments":[{
    "id":"default",
    "shipping_address":{
      "salutation":"",
      "title":"",
      "company_name":"",
      "first_name":"",
      "second_name":"",
      "last_name":"",
      "postal_code":"",
      "address1":"",
      "address2":"",
      "city":"",
      "post_box":"",
      "country_code":"",
      "state_code":"",
      "phone":"",
      "suffix":""
    },
    "shipping_method":{
      "id":"001",
      "name":"Ground",
      "description":"Order received within 7-10 business days"
    }}],
  "status":"replaced",
  "tax_total":9.10,
  "c_replaced" : true
}

# in case of failure:
 
RESPONSE:
HTTP/1.1 400 Bad Request
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: max-age=0,no-cache,no-store,must-revalidate
{
   "_v" : "23.2",
   "fault" : 
   {
      "arguments" : 
      {
         "statusFrom" : "CREATED",
         "statusTo" : "REPLACED"
      },
      "type" : "StatusTransitionNotPossibleException",
      "message" : "Status transition from 'CREATED' to 'REPLACED' not possible."
   }
}</code></pre></div>

    </div>
<div class="section" id="id1963723735__id1217882115"><h2 class="title sectiontitle">Add a note to an order</h2>
      
      <p class="p"><!-- --></p>
Adds a note to an existing order.
      <p class="p subheading1" id="id1963723735__id-1957512564">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>POST https://hostname:port/dw/shop/v23_2/orders/{order_no}/notes</code></pre>
      <p class="p subheading1" id="id1963723735__id-1190779399">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id1963723735__id1052477755">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e1938" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e1940" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e1938" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e1940" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT. A valid user is required.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e1938" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e1940" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id-1611758898">Request Document</p>
<p class="p"><a class="xref" href="../Documents/Note.html#id719330743" shape="rect">Note</a></p>
<p class="p subheading1" id="id1963723735__id-129866314">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Order.html#id-2029167375" shape="rect">Order</a></p>
<p class="p subheading1" id="id1963723735__id-232174623">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e1993" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e1995" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e1997" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e1999" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e1993" rowspan="1" style="text-align:left;vertical-align:top;">order_no</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e1995" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e1997" rowspan="1" style="text-align:left;vertical-align:top;">The id of the order to be modified.</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e1999" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id1963723735__id364389460">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e2042" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e2044" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e2046" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e2048" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e2042" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e2044" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">OrderNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e2046" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">orderNumber (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e2048" rowspan="1" style="text-align:left;vertical-align:top;">Thrown if the order with the given order number is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id1963723735__id-975070032">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e2083" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e2085" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e2083" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.note.beforePOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e2085" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePOST</strong>
      (orderNo : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>, note : <a class="xref" href="../Documents/Note.html" shape="rect">
          Note
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before the request will be processed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">orderNo - The id of the order from which you want to retrieve notes.</dd>
<dd class="dd pd ddexpand">note - The note to be added.</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e2083" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.note.modifyPOSTResponse</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e2085" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPOSTResponse</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, orderResponse : <a class="xref" href="../Documents/Order.html" shape="rect">
          Order
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - target order</dd>
<dd class="dd pd ddexpand">orderResponse - order response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id736333677">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>#
# Example: Add a note to an order
#
REQUEST:
POST /dw/shop/v23_2/orders/cdcM6iWbN5jyIaaadh5thrJrYj/notes HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json; charset=UTF-8

{
  "subject" : "this is an example subject",
  "text" : "This is a note because the customer was not very happy."
}

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Cache-Control: max-age=0,no-cache,no-store,must-revalidate

Expires: Thu, 01-Jan-1970 00:00:00 GMT
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "order",
...
   "notes" : { 
       "link" : "https://www.example.com/dw/shop/v23_2/orders/cdcM6iWbN5jyIaaadh5thrJrYj/notes"
    }
...
}</code></pre></div>

    </div>
<div class="section" id="id1963723735__id-1665909991"><h2 class="title sectiontitle">Get notes from an order</h2>
      
      <p class="p"><!-- --></p>
Retrieves notes for an order.
      <p class="p subheading1" id="id1963723735__id-777320522">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>GET https://hostname:port/dw/shop/v23_2/orders/{order_no}/notes</code></pre>
      <p class="p subheading1" id="id1963723735__id1388301859">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id1963723735__id-1018806831">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e2234" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e2236" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e2234" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e2236" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT. A valid user is required.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e2234" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e2236" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id26173792">Response Document</p>
<p class="p"><a class="xref" href="../Documents/NotesResult.html#id-859718719" shape="rect">NotesResult</a></p>
<p class="p subheading1" id="id1963723735__id-17487349">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e2280" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e2282" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e2284" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e2286" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e2280" rowspan="1" style="text-align:left;vertical-align:top;">order_no</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e2282" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e2284" rowspan="1" style="text-align:left;vertical-align:top;">The id of the order from which you want to retrieve notes.</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e2286" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id1963723735__id863227626">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e2329" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e2331" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e2333" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e2335" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e2329" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e2331" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">OrderNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e2333" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">orderNumber (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e2335" rowspan="1" style="text-align:left;vertical-align:top;">Thrown if the order with the given order number is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id1963723735__id897776986">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e2370" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e2372" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e2370" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.notes.beforeGET</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e2372" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeGET</strong>
      (orderNo : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before the request will be processed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">orderNo - The id of the order from which you want to retrieve notes.</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e2370" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.notes.modifyGETResponse_v2</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e2372" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyGETResponse_v2</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, notesResultResponse : <a class="xref" href="../Documents/NotesResult.html" shape="rect">
          NotesResult
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the order the notes result retrieved for.</dd>
<dd class="dd pd ddexpand">notesResultResponse - notes result response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id1235171843">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
GET /dw/shop/v23_2/orders/cdcM6iWbN5jyIaaadh5thrJrYj/notes HTTP/1.1
Host: example.com
 
RESPONSE:
HTTP/1.1 200 OK
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: max-age=0,no-cache,no-store,must-revalidate
Content-Length: 158
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "notes_result",
   "notes" : 
   [
      {
         "subject" : "Unhappy customer",
         "text" : "The customer was not very happy due to a delay."
      },
      {
         "subject" : "Happy customer",
         "text" : "The customer is already happy!"
      }
   ]
}</code></pre></div>

    </div>
<div class="section" id="id1963723735__id532105101"><h2 class="title sectiontitle">Remove a note from an order</h2>
      
      <p class="p"><!-- --></p>
Removes an order note.
      <p class="p subheading1" id="id1963723735__id-781109566">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>DELETE https://hostname:port/dw/shop/v23_2/orders/{order_no}/notes/{note_id}</code></pre>
      <p class="p subheading1" id="id1963723735__id-1770023121">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id1963723735__id1164996421">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e2512" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e2514" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e2512" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e2514" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT. A valid user is required.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e2512" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e2514" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id1839221612">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Order.html#id-2029167375" shape="rect">Order</a></p>
<p class="p subheading1" id="id1963723735__id-1039063273">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e2558" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e2560" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e2562" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e2564" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e2558" rowspan="1" style="text-align:left;vertical-align:top;">note_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e2560" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e2562" rowspan="1" style="text-align:left;vertical-align:top;">the id of the note to be removed</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e2564" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e2558" rowspan="1" style="text-align:left;vertical-align:top;">order_no</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e2560" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e2562" rowspan="1" style="text-align:left;vertical-align:top;">the id of the order to be modified</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e2564" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id1963723735__id-347032482">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e2616" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e2618" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e2620" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e2622" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e2616" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e2618" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">OrderNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e2620" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">orderNumber (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e2622" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the order with the given order number is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e2616" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e2618" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">NoteNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e2620" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">noteId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e2622" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the order with the given order number is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id1963723735__id-1387082394">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e2668" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e2670" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e2668" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.note.beforeDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e2670" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeDELETE</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, note : <a class="xref" href="../../../../Documents/api/class_dw_object_Note.html" shape="rect" target="_blank">
          Note
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before a note is deleted.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the order</dd>
<dd class="dd pd ddexpand">note - the note to be removed</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e2668" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.note.afterDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e2670" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterDELETE</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, note : <a class="xref" href="../../../../Documents/api/class_dw_object_Note.html" shape="rect" target="_blank">
          Note
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after a note is deleted.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the order</dd>
<dd class="dd pd ddexpand">note - the note to be removed</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e2668" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.note.modifyDELETEResponse</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e2670" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyDELETEResponse</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, orderResponse : <a class="xref" href="../Documents/Order.html" shape="rect">
          Order
        </a>, noteId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - target order</dd>
<dd class="dd pd ddexpand">orderResponse - order response object</dd>
<dd class="dd pd ddexpand">noteId - note id to delete</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id24911735">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
DELETE /shop/v23_2/orders/00000029/notes/cdXTraOu6bXT6aaadll5tOJvce HTTP/1.1
Host: example.com
Authorization:Bearer 80a68fc6-945c-49e2-bfd6-abc9994de307
# in case of success

RESPONSE:
HTTP/1.1 200 OK
Content-Length:124 
Content-Type:application/json;charset=UTF-8

{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "order",
...
   "notes" : 
   {
      "_type" : "simple_link",
      "link" : "https://example.com/dw/shop/v23_2/orders/bc0KwiWexX0ZQaaadqRTwMZFga/notes"
   },
...
}


# in case of validation failure - example response when the note to be deleted can not be found:

RESPONSE:
HTTP/1.1 404 Not Found
Content-Type: application/json;charset=UTF-8

{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "fault" : 
   {
      "type" : "NoteNotFoundException",
      "message" : "The note 'NonExisting' could not be found."
   }
}</code></pre></div>

    </div>
<div class="section" id="id1963723735__id395462545"><h2 class="title sectiontitle">Add payment instrument to order</h2>
      
      <p class="p"><!-- --></p>
<p class="p">
 Adds a payment instrument to an order. It is possible either to supply the full payment information or only a
 customer payment instrument id and amount. In case the customer payment instrument id was set all the other
 properties (except amount) are ignored and the payment data is resolved from the stored customer payment
 information. An attempt is made to authorize the order by passing it to the authorize or authorizeCreditCard
 hook.
 </p>

 <p class="p">
 Details:
 </p>

 <ul class="ul">
 <li class="li">The payment instrument is added with the provided details or the details from the customer payment
 instrument. The payment method must be applicable for the order see <code class="ph codeph">GET
 /baskets/{basket_id}/payment_methods</code>, if the payment method is 'CREDIT_CARD' <code class="ph codeph">a
 payment_card</code> must be specified in the request.</li>

 <li class="li">
 <p class="p">
 Order authorization:
 </p>

 <p class="p">
 To authorize the order one of two possible customization hooks is called and an
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> is passed as an input argument.
 </p>

 <p class="p">
 Which hook is called?
 </p>

 <ul class="ul">
 <li class="li">If the request includes a <code class="ph codeph">payment_card</code> or the
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> contains a <code class="ph codeph">creditCardType</code> the customization
 hook <code class="ph codeph">dw.order.payment.authorizeCreditCard</code> is called. See
 <code class="ph codeph">dw.order.hooks.PaymentHooks.authorizeCreditCard(order : Order, paymentDetails : OrderPaymentInstrument,
 cvn : String) : Status</code>.</li>

 <li class="li">Otherwise <code class="ph codeph">dw.order.payment.authorize</code> is called. See
 <code class="ph codeph">dw.order.hooks.PaymentHooks.authorize(order : Order, paymentDetails : OrderPaymentInstrument) :
 Status</code>.</li>

 </ul>

 <p class="p">
 What is the <code class="ph codeph">dw.order.OrderPaymentInstrument</code> input argument passed to the hook?
 </p>

 <ul class="ul">
 <li class="li">If the request contains a <code class="ph codeph">customer_payment_instrument_id</code> the
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> is copied from the customer payment instrument (An exception is
 thrown if none was found).</li>

 <li class="li">Otherwise the data from the request document is passed (<code class="ph codeph">payment_card</code> or
 <code class="ph codeph">payment_bank_account</code> etc. information).</li>

 </ul>

 <p class="p">
 Note: the <code class="ph codeph">amount</code> and the <code class="ph codeph">security_code</code> (cvn) contained in the
 <code class="ph codeph">payment_card</code> data will be propagated if available to
 <code class="ph codeph">dw.order.payment.authorizeCreditCard</code> even if the
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> is resolved from a customer payment instrument.
 </p>

 </li>

 <li class="li">Customization hook <code class="ph codeph">dw.ocapi.shop.order.afterPostPaymentInstrument</code> is called. The default
 implementation places the order if the order status is CREATED and the authorization amount equals or exceeds the
 order total. Placing the order (equivalent to calling <code class="ph codeph">dw.order.OrderMgr.placeOrder(order :
 Order)</code> in the scripting API) results in the order being changed to status <code class="ph codeph">NEW</code> and
 prepared for export.</li>

 </ul>

      <p class="p subheading1" id="id1963723735__id129501246">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>POST https://hostname:port/dw/shop/v23_2/orders/{order_no}/payment_instruments?skip_authorization={Boolean}</code></pre>
      <p class="p subheading1" id="id1963723735__id-1043772757">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id1963723735__id1232672841">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e2989" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e2991" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e2989" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e2991" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e2989" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e2991" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id-242973092">Request Document</p>
<p class="p"><a class="xref" href="../Documents/OrderPaymentInstrumentRequest.html#id-950186033" shape="rect">OrderPaymentInstrumentRequest</a></p>
<p class="p subheading1" id="id1963723735__id-647179288">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Order.html#id-2029167375" shape="rect">Order</a></p>
<p class="p subheading1" id="id1963723735__id1058905747">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e3045" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e3047" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e3049" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e3051" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e3045" rowspan="1" style="text-align:left;vertical-align:top;">order_no</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e3047" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e3049" rowspan="1" style="text-align:left;vertical-align:top;">the order number</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e3051" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id1963723735__id1963734866">Query Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e3084" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e3086" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e3088" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e3090" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e3084" rowspan="1" style="text-align:left;vertical-align:top;">skip_authorization</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e3086" rowspan="1" style="text-align:left;vertical-align:top;">Boolean</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e3088" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e3090" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id1963723735__id646226274">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e3130" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e3132" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e3134" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e3136" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3130" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e3132" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidOrderNumberException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e3134" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3136" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the given order number is invalid.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3130" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e3132" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidPaymentMethodIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e3134" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">paymentMethodId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3136" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the provided payment method is invalid or not applicable.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3130" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e3132" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">OrderNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e3134" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">orderNumber (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3136" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the order with the given order number is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e3130" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e3132" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">PaymentInstrumentNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e3134" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">paymentInstrumentId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e3136" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that a customer payment instrument could not be resolved
             based on the provided customer payment instrument id.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id1963723735__id416216034">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e3203" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e3205" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3203" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.validateOrder</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3205" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateOrder</strong>
      (order : <a class="xref" href="../Documents/Order.html" shape="rect">
          Order
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<div class="p">Validate an order after the order has been updated.
 <p class="lines pdfonly"><!-- --></p>

 The hook is called outside a database transaction, so modifications to the order are not possible. Allows the addition of custom flashes to convey information to the client.
 <p class="lines pdfonly"><!-- --></p>

 Example showing addition of flashes:
 <pre class="pre codeblock" xml:space="preserve"><code>
       exports.validateBasket = function() {
         order.addFlash(   {type:"PaymentAuthorizationFailure",
                     message:"Order was not successfully authorized.",
                        path:"authorizations",
                     details:{ "result":"reject", "reason":"invalid_credit_card"}});
       </code></pre></div>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the modified order</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3203" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.payment_instrument.modifyPOSTResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3205" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPOSTResponse</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, orderResponse : <a class="xref" href="../Documents/Order.html" shape="rect">
          Order
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - target order</dd>
<dd class="dd pd ddexpand">orderResponse - order response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3203" rowspan="1" style="text-align:left;vertical-align:top;">dw.order.payment.authorize</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3205" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">authorize</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, paymentDetails : <a class="xref" href="../../../../Documents/api/class_dw_order_OrderPaymentInstrument.html" shape="rect" target="_blank">
          OrderPaymentInstrument
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<div class="p">Custom payment authorization - modify the
 order as needed.

 <ul class="ul">
 <li class="li">Prerequisite: An order has been created using the data api or via the storefront.</li>

 <li class="li">Return Status.OK: Corresponding payment transaction is marked as authorized (usually a custom property is used for this).</li>

 <li class="li">Return Status.ERROR: Order is held, authorization needs to be repeated.</li>

 </ul>
</div>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the order</dd>
<dd class="dd pd ddexpand">paymentDetails - specified payment details</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd"><ul class="ul">
         <li class="li">Status.OK successful authorization.</li>

         <li class="li">Status.ERROR authorization failed.</li>

         </ul>
</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3203" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.payment_instrument.beforePOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3205" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePOST</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, paymentInstrument : <a class="xref" href="../Documents/OrderPaymentInstrumentRequest.html" shape="rect">
          OrderPaymentInstrumentRequest
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before a
 payment instrument is added to the order.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the modified order</dd>
<dd class="dd pd ddexpand">paymentInstrument - the payment instrument to be added to the order</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3203" rowspan="1" style="text-align:left;vertical-align:top;">dw.order.payment.authorizeCreditCard</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3205" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">authorizeCreditCard</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, paymentDetails : <a class="xref" href="../../../../Documents/api/class_dw_order_OrderPaymentInstrument.html" shape="rect" target="_blank">
          OrderPaymentInstrument
        </a>, cvn : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<div class="p">Custom payment authorization
 of a credit card - modify the order as needed.


 <ul class="ul">
 <li class="li">Prerequisite: An order has been created using the data api or via the
 storefront.</li>

 <li class="li">Return Status.OK: Corresponding payment transaction is marked as
 authorized (usually a custom property is used for this).</li>

 <li class="li">Return Status.ERROR: Order is held, authorization needs to be
 repeated.</li>

 </ul>
</div>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the order</dd>
<dd class="dd pd ddexpand">paymentDetails - specified payment details</dd>
<dd class="dd pd ddexpand">cvn - the credit card verification number</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd"><ul class="ul">
         <li class="li">Status.OK successful authorization.</li>
 <li class="li">Status.ERROR
         authorization failed.</li>

         </ul>
</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e3203" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.payment_instrument.afterPOST</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e3205" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPOST</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, paymentInstrument : <a class="xref" href="../Documents/OrderPaymentInstrumentRequest.html" shape="rect">
          OrderPaymentInstrumentRequest
        </a>, successfullyAuthorized : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after a payment instrument was added to the order.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the modified order</dd>
<dd class="dd pd ddexpand">paymentInstrument - the payment instrument which was added to the order</dd>
<dd class="dd pd ddexpand">successfullyAuthorized - was the payment instrument successfully authorized.</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id1018170491">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
POST /shop/v23_2/orders/00000027/payment_instruments HTTP/1.1
Host: example.com
Authorization:Bearer eyJfdiI6IjXXXXXX.eyJfdiI6IjEiLCJleHAXXXXXXX.-d5wQW4c4O4wt-Zkl7_fiEiALW1XXXX 
Content-Type: application/json
{
  "amount": 2,
  "payment_card": {
    "number": "4111111111111111",
    "security_code": "112",
    "holder": "Ed Smith",
    "card_type": "Visa",
    "expiration_month": 2,
    "expiration_year": 2022
  },
  "payment_method_id": "CREDIT_CARD"
}
# in case of success

RESPONSE:
HTTP/1.1 200 OK
Content-Length:124 
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "order",
...
   "order_no" : "00000021",
...
   "payment_instruments" : 
   [
      {
         "_type" : "order_payment_instrument",
         "amount" : 2.00,
         "payment_card" : 
         {
            "_type" : "payment_card",
            "card_type" : "Visa",
            "credit_card_expired" : false,
            "credit_card_token" : "00000021-2",
            "expiration_month" : 2,
            "expiration_year" : 2022,
            "holder" : "Ed Smith",
            "masked_number" : "***********1111",
            "number_last_digits" : "1111"
         },
         "payment_method_id" : "CREDIT_CARD",
         "payment_instrument_id" : "cdZnraOu6bcqwaaadlW5ROJu9Y",
      }
   ],
...
}</code></pre></div>

    </div>
<div class="section" id="id1963723735__id-742188022"><h2 class="title sectiontitle">Updates payment instrument of order</h2>
      
      <p class="p"><!-- --></p>
<p class="p">
 Updates a payment instrument of an order and passes the order and updated payment instrument to the correct
 payment authorizeCreditcard or authorize hook.
 </p>

 <p class="p">
 Details:
 </p>

 <ul class="ul">
 <li class="li">The payment instrument is updated with the provided details. The payment method must be applicable for the
 order see <code class="ph codeph">GET /baskets/{basket_id}/payment_methods</code>, if the payment method is 'CREDIT_CARD' a
 <code class="ph codeph">payment_card</code> must be specified in the request.</li>

 <li class="li">
 <p class="p">
 Order authorization:
 </p>

 <p class="p">
 To authorize the order one of two possible customization hooks is called and an
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> is passed as an input argument.
 </p>

 <p class="p">
 Which hook is called?
 </p>

 <ul class="ul">
 <li class="li">If the request includes a <code class="ph codeph">payment_card</code> or the
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> contains a <code class="ph codeph">creditCardType</code> the customization
 hook <code class="ph codeph">dw.order.payment.authorizeCreditCard</code> is called. See
 <code class="ph codeph">dw.order.hooks.PaymentHooks.authorizeCreditCard(order : Order, paymentDetails : OrderPaymentInstrument,
 cvn : String) : Status</code>.</li>

 <li class="li">Otherwise <code class="ph codeph">dw.order.payment.authorize</code> is called. See
 <code class="ph codeph">dw.order.hooks.PaymentHooks.authorize(order : Order, paymentDetails : OrderPaymentInstrument) :
 Status</code>.</li>

 </ul>

 <p class="p">
 What is the <code class="ph codeph">dw.order.OrderPaymentInstrument</code> input argument passed to the hook?
 </p>

 <ul class="ul">
 <li class="li">If the request contains a <code class="ph codeph">customer_payment_instrument_id</code> the
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> is copied from the customer payment instrument (An exception is
 thrown if none was found).</li>

 <li class="li">Otherwise the data from the request document is passed (<code class="ph codeph">payment_card</code> or
 <code class="ph codeph">payment_bank_account</code> etc. information).</li>

 </ul>

 <p class="p">
 Note: the <code class="ph codeph">amount</code> and the <code class="ph codeph">security_code</code> (cvn) contained in the
 <code class="ph codeph">payment_card</code> data will be propagated if available to
 <code class="ph codeph">dw.order.payment.authorizeCreditCard</code> even if the
 <code class="ph codeph">dw.order.OrderPaymentInstrument</code> is resolved from a customer payment instrument.
 </p>

 </li>

 <li class="li">Customization hook <code class="ph codeph">dw.ocapi.shop.order.afterPatchPaymentInstrument</code> is called. The default
 implementation places the order if the order status is CREATED and the authorization amount equals or exceeds the
 order total. Placing the order (equivalent to calling <code class="ph codeph">dw.order.OrderMgr.placeOrder(order :
 Order)</code> in the scripting API) results in the order being changed to status <code class="ph codeph">NEW</code> and
 prepared for export.</li>

 </ul>

      <p class="p subheading1" id="id1963723735__id-31607515">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>PATCH https://hostname:port/dw/shop/v23_2/orders/{order_no}/payment_instruments/{payment_instrument_id}?skip_authorization={Boolean}</code></pre>
      <p class="p subheading1" id="id1963723735__id-2110772206">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id1963723735__id509355266">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e3716" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e3718" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3716" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3718" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e3716" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e3718" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id433539285">Request Document</p>
<p class="p"><a class="xref" href="../Documents/OrderPaymentInstrumentRequest.html#id-950186033" shape="rect">OrderPaymentInstrumentRequest</a></p>
<p class="p subheading1" id="id1963723735__id-1150132081">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Order.html#id-2029167375" shape="rect">Order</a></p>
<p class="p subheading1" id="id1963723735__id110897402">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e3772" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e3774" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e3776" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e3778" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3772" rowspan="1" style="text-align:left;vertical-align:top;">order_no</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e3774" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e3776" rowspan="1" style="text-align:left;vertical-align:top;">the order number</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3778" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e3772" rowspan="1" style="text-align:left;vertical-align:top;">payment_instrument_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e3774" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e3776" rowspan="1" style="text-align:left;vertical-align:top;">the id of the payment instrument to be updated</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e3778" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id1963723735__id-1654720053">Query Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e3820" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e3822" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e3824" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e3826" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e3820" rowspan="1" style="text-align:left;vertical-align:top;">skip_authorization</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e3822" rowspan="1" style="text-align:left;vertical-align:top;">Boolean</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e3824" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e3826" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id1963723735__id-1466403045">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e3866" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e3868" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e3870" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e3872" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3866" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e3868" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">PaymentInstrumentPermanentlyMaskedException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e3870" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">paymentInstrumentId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3872" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket payment instrument with the given
             id already is permanently masked.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3866" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e3868" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidPaymentMethodIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e3870" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">paymentMethodId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3872" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the provided payment method is invalid or not applicable.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3866" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e3868" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">OrderNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e3870" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">orderNumber (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3872" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the order with the given order number is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e3866" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e3868" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">PaymentInstrumentNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e3870" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">paymentInstrumentId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e3872" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the payment instrument with the given payment
             instrument number is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id1963723735__id392883209">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e3941" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e3943" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3941" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.payment_instrument.afterPATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3943" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPATCH</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, paymentInstrument : <a class="xref" href="../../../../Documents/api/class_dw_order_OrderPaymentInstrument.html" shape="rect" target="_blank">
          OrderPaymentInstrument
        </a>, newPaymentInstrument : <a class="xref" href="../Documents/OrderPaymentInstrumentRequest.html" shape="rect">
          OrderPaymentInstrumentRequest
        </a>, successfullyAuthorized : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after updating a payment instrument of an order.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the modified order</dd>
<dd class="dd pd ddexpand">paymentInstrument - the updated payment instrument</dd>
<dd class="dd pd ddexpand">newPaymentInstrument - the new payment instrument data</dd>
<dd class="dd pd ddexpand">successfullyAuthorized - was the payment instrument successfully authorized.</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3941" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.payment_instrument.modifyPATCHResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3943" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPATCHResponse</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, orderResponse : <a class="xref" href="../Documents/Order.html" shape="rect">
          Order
        </a>, paymentInstrumentId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - target order</dd>
<dd class="dd pd ddexpand">orderResponse - order response object</dd>
<dd class="dd pd ddexpand">paymentInstrumentId - payment instrument id</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3941" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.payment_instrument.beforePATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3943" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePATCH</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, paymentInstrument : <a class="xref" href="../../../../Documents/api/class_dw_order_OrderPaymentInstrument.html" shape="rect" target="_blank">
          OrderPaymentInstrument
        </a>, newPaymentInstrument : <a class="xref" href="../Documents/OrderPaymentInstrumentRequest.html" shape="rect">
          OrderPaymentInstrumentRequest
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before updating a payment instrument of an order.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the modified order</dd>
<dd class="dd pd ddexpand">paymentInstrument - the payment instrument to be updated</dd>
<dd class="dd pd ddexpand">newPaymentInstrument - the new payment instrument data</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3941" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.validateOrder</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3943" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateOrder</strong>
      (order : <a class="xref" href="../Documents/Order.html" shape="rect">
          Order
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<div class="p">Validate an order after the order has been updated.
 <p class="lines pdfonly"><!-- --></p>

 The hook is called outside a database transaction, so modifications to the order are not possible. Allows the addition of custom flashes to convey information to the client.
 <p class="lines pdfonly"><!-- --></p>

 Example showing addition of flashes:
 <pre class="pre codeblock" xml:space="preserve"><code>
       exports.validateBasket = function() {
         order.addFlash(   {type:"PaymentAuthorizationFailure",
                     message:"Order was not successfully authorized.",
                        path:"authorizations",
                     details:{ "result":"reject", "reason":"invalid_credit_card"}});
       </code></pre></div>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the modified order</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e3941" rowspan="1" style="text-align:left;vertical-align:top;">dw.order.payment.authorize</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e3943" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">authorize</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, paymentDetails : <a class="xref" href="../../../../Documents/api/class_dw_order_OrderPaymentInstrument.html" shape="rect" target="_blank">
          OrderPaymentInstrument
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<div class="p">Custom payment authorization - modify the
 order as needed.

 <ul class="ul">
 <li class="li">Prerequisite: An order has been created using the data api or via the storefront.</li>

 <li class="li">Return Status.OK: Corresponding payment transaction is marked as authorized (usually a custom property is used for this).</li>

 <li class="li">Return Status.ERROR: Order is held, authorization needs to be repeated.</li>

 </ul>
</div>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the order</dd>
<dd class="dd pd ddexpand">paymentDetails - specified payment details</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd"><ul class="ul">
         <li class="li">Status.OK successful authorization.</li>

         <li class="li">Status.ERROR authorization failed.</li>

         </ul>
</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e3941" rowspan="1" style="text-align:left;vertical-align:top;">dw.order.payment.authorizeCreditCard</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e3943" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">authorizeCreditCard</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, paymentDetails : <a class="xref" href="../../../../Documents/api/class_dw_order_OrderPaymentInstrument.html" shape="rect" target="_blank">
          OrderPaymentInstrument
        </a>, cvn : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<div class="p">Custom payment authorization
 of a credit card - modify the order as needed.


 <ul class="ul">
 <li class="li">Prerequisite: An order has been created using the data api or via the
 storefront.</li>

 <li class="li">Return Status.OK: Corresponding payment transaction is marked as
 authorized (usually a custom property is used for this).</li>

 <li class="li">Return Status.ERROR: Order is held, authorization needs to be
 repeated.</li>

 </ul>
</div>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the order</dd>
<dd class="dd pd ddexpand">paymentDetails - specified payment details</dd>
<dd class="dd pd ddexpand">cvn - the credit card verification number</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd"><ul class="ul">
         <li class="li">Status.OK successful authorization.</li>
 <li class="li">Status.ERROR
         authorization failed.</li>

         </ul>
</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id-1094458828">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
PATCH /dw/shop/v23_2/orders/00000021/payment_instruments/cdZnraOu6bcqwaaadlW5ROJu9Y HTTP/1.1
Host: example.com
Authorization:Bearer eyJfdiI6IjXXXXXX.eyJfdiI6IjEiLCJleHAXXXXXXX.-d5wQW4c4O4wt-Zkl7_fiEiALW1XXXX 
Content-Type: application/json
{
  "_resource_state" : "847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb",
  "amount": 2,
  "payment_card": {
    "number": "4111111111111111",
    "security_code": "112",
    "holder": "Ed Smith",
    "card_type": "Visa",
    "expiration_month": 2,
    "expiration_year": 2022
  },
  "payment_method_id": "CREDIT_CARD"
}
# in case of success

RESPONSE:
HTTP/1.1 200 OK
Content-Length:124 
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "order",
...
   "order_no" : "00000021",
...
   "payment_instruments" : 
   [
      {
         "_type" : "order_payment_instrument",
         "amount" : 2.00,
         "payment_card" : 
         {
            "_type" : "payment_card",
            "card_type" : "Visa",
            "credit_card_expired" : false,
            "credit_card_token" : "00000021-2",
            "expiration_month" : 2,
            "expiration_year" : 2022,
            "holder" : "Ed Smith",
            "masked_number" : "***********1111",
            "number_last_digits" : "1111"
         },
         "payment_method_id" : "CREDIT_CARD",
         "payment_instrument_id" : "cdZnraOu6bcqwaaadlW5ROJu9Y",
      }
   ],
...
}</code></pre></div>

    </div>
<div class="section" id="id1963723735__id-1926703731"><h2 class="title sectiontitle">Removes a payment instrument of an order</h2>
      
      <p class="p"><!-- --></p>
Removes a payment instrument of an order.
      <p class="p subheading1" id="id1963723735__id-487790398">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>DELETE https://hostname:port/dw/shop/v23_2/orders/{order_no}/payment_instruments/{payment_instrument_id}</code></pre>
      <p class="p subheading1" id="id1963723735__id1053968687">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id1963723735__id-1911456443">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e4353" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e4355" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e4353" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e4355" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e4353" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e4355" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id1539079532">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Order.html#id-2029167375" shape="rect">Order</a></p>
<p class="p subheading1" id="id1963723735__id-1919821545">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e4399" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e4401" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e4403" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e4405" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e4399" rowspan="1" style="text-align:left;vertical-align:top;">order_no</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e4401" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e4403" rowspan="1" style="text-align:left;vertical-align:top;">the order number</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e4405" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e4399" rowspan="1" style="text-align:left;vertical-align:top;">payment_instrument_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e4401" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e4403" rowspan="1" style="text-align:left;vertical-align:top;">the id of the payment instrument to be updated</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e4405" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id1963723735__id1960821342">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e4457" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e4459" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e4461" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e4463" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e4457" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e4459" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">OrderNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e4461" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">orderNumber (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e4463" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the order with the given order number is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e4457" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e4459" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">PaymentInstrumentNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e4461" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">paymentInstrumentId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e4463" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the payment instrument with the given payment
             instrument number is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id1963723735__id1700265830">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e4509" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e4511" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e4509" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.validateOrder</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e4511" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateOrder</strong>
      (order : <a class="xref" href="../Documents/Order.html" shape="rect">
          Order
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<div class="p">Validate an order after the order has been updated.
 <p class="lines pdfonly"><!-- --></p>

 The hook is called outside a database transaction, so modifications to the order are not possible. Allows the addition of custom flashes to convey information to the client.
 <p class="lines pdfonly"><!-- --></p>

 Example showing addition of flashes:
 <pre class="pre codeblock" xml:space="preserve"><code>
       exports.validateBasket = function() {
         order.addFlash(   {type:"PaymentAuthorizationFailure",
                     message:"Order was not successfully authorized.",
                        path:"authorizations",
                     details:{ "result":"reject", "reason":"invalid_credit_card"}});
       </code></pre></div>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the modified order</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e4509" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.payment_instrument.beforeDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e4511" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeDELETE</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, paymentInstrument : <a class="xref" href="../../../../Documents/api/class_dw_order_OrderPaymentInstrument.html" shape="rect" target="_blank">
          OrderPaymentInstrument
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before removing a payment instrument of an order.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the modified order</dd>
<dd class="dd pd ddexpand">paymentInstrument - the payment instrument to be removed</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e4509" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.payment_instrument.afterDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e4511" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterDELETE</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, paymentInstrument : <a class="xref" href="../../../../Documents/api/class_dw_order_OrderPaymentInstrument.html" shape="rect" target="_blank">
          OrderPaymentInstrument
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after removing a payment instrument of an order.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the modified order</dd>
<dd class="dd pd ddexpand">paymentInstrument - the removed payment instrument</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e4509" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.payment_instrument.modifyDELETEResponse</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e4511" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyDELETEResponse</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, orderResponse : <a class="xref" href="../Documents/Order.html" shape="rect">
          Order
        </a>, paymentInstrumentId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - target order</dd>
<dd class="dd pd ddexpand">orderResponse - order response object</dd>
<dd class="dd pd ddexpand">paymentInstrumentId - payment instrument id</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id-1962201737">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
DELETE /dw/shop/v23_2/orders/00000029/payment_instruments/cdXTraOu6bXT6aaadll5tOJvce HTTP/1.1
Host: example.com
Authorization:Bearer eyJfdiI6IjXXXXXX.eyJfdiI6IjEiLCJleHAXXXXXXX.-d5wQW4c4O4wt-Zkl7_fiEiALW1XXXX 
x-dw-resource-state: 847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb

# in case of success

RESPONSE:
HTTP/1.1 200 OK
Content-Length:124 
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_type" : "order",
...
   "order_no" : "00000021",
...
   "payment_instruments" : 
   [
      {
        ...
      }
   ],
...
}

# validation failure in case of an unknown payment instrument id:

RESPONSE:
HTTP/1.1 404 Not Found
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" :
   {
      "type" : "PaymentInstrumentNotFoundException",
      "message" : "The payment instrument with payment_instrument_id '123' couldn't be found."
   }
}</code></pre></div>

    </div>
<div class="section" id="id1963723735__id733875361"><h2 class="title sectiontitle">Get applicable payment methods for an order</h2>
      
      <p class="p"><!-- --></p>
Gets the applicable payment methods for an existing order considering the open payment amount only.
      <p class="p subheading1" id="id1963723735__id1497458990">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>GET https://hostname:port/dw/shop/v23_2/orders/{order_no}/payment_methods</code></pre>
      <p class="p subheading1" id="id1963723735__id2094576539">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id1963723735__id-1394687655">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e4761" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e4763" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e4761" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e4763" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e4761" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e4763" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id-859713320">Response Document</p>
<p class="p"><a class="xref" href="../Documents/PaymentMethodResult.html#id-710904517" shape="rect">PaymentMethodResult</a></p>
<p class="p subheading1" id="id1963723735__id1215108995">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e4807" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e4809" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e4811" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e4813" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e4807" rowspan="1" style="text-align:left;vertical-align:top;">order_no</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e4809" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e4811" rowspan="1" style="text-align:left;vertical-align:top;">the order number</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e4813" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id1963723735__id-1469293966">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e4856" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e4858" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4201771e4860" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e4862" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e4856" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e4858" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4201771e4860" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e4862" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the order does not
                match the verified customer represented by the JWT, not
                relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e4856" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e4858" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">OrderNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4201771e4860" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">orderNumber (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e4862" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the order with the given order number is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id1963723735__id747104466">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4201771e4906" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4201771e4908" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4201771e4906" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.payment_methods.beforeGET</td>
<td class="entry cell-norowborder" colspan="1" headers="d4201771e4908" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeGET</strong>
      (orderNumber : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before the request will be processed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">orderNumber - the order number</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4201771e4906" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.order.payment_methods.modifyGETResponse_v2</td>
<td class="entry cellrowborder" colspan="1" headers="d4201771e4908" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyGETResponse_v2</strong>
      (order : <a class="xref" href="../../../../Documents/api/class_dw_order_Order.html" shape="rect" target="_blank">
          Order
        </a>, paymentMethodResultResponse : <a class="xref" href="../Documents/PaymentMethodResult.html" shape="rect">
          PaymentMethodResult
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">order - the order the payment method result retrieved for.</dd>
<dd class="dd pd ddexpand">paymentMethodResultResponse - payment method result response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id1963723735__id-1097349749">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
GET /dw/shop/v23_2/orders/cdcM6iWbN5jyIaaadh5thrJrYj/payment_methods HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Cache-Control: max-age=0,no-cache,no-store,must-revalidate
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_type" : "payment_method_result",
   "applicable_payment_methods" : 
   [
      {
         "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
         "_type" : "payment_method",
         "id" : "BANK_TRANSFER",
         "name" : "Bank Transfer"
      },
      {
         "_resource_state" : "847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb",
         "_type" : "payment_method",
         "cards" : 
         [
            {
               "_type" : "payment_card_spec",
               "card_type" : "Visa",
               "checksum_verification_enabled" : true,
               "id" : "CREDIT_CARD.Visa",
               "name" : "Visa",
               "number_lengths" : 
               [
                  "13",
                  "16"
               ],
               "number_prefixes" : 
               [
                  "4"
               ],
               "security_code_length" : 3,
               "c_somestring" : "PaymentCard String Value"
            },
            {
               "_type" : "payment_card_spec",
               "card_type" : "Master",
               "checksum_verification_enabled" : true,
               "id" : "CREDIT_CARD.Master",
               "name" : "Mastercard",
               "number_lengths" : 
               [
                  "16"
               ],
               "number_prefixes" : 
               [
                  "2221-2720",
                  "51-55"
               ],
               "security_code_length" : 3,
               "c_somestring" : "PaymentCard String Value"
            },
            ...
}

# in case of validation failure:

RESPONSE:
HTTP/1.1 404 NOT FOUND
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: no-cache,no-store,must-revalidate
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "OrderNotFoundException",
      "message" : "No order with number 'non_existing_order' was found."
   }
}
</code></pre></div>

    </div>

      </div>

    <div><table class="copyright_table" width="100%"><tr><td align="left" colspan="1" rowspan="1"><p class="copyright_footer">© Copyright 2000-2023, Salesforce, Inc. All rights reserved. Various trademarks held by their respective owners.</p></td>
<td align="right" colspan="1" rowspan="1"><a href="#" id="bookmarklink" onclick="showLink();" shape="rect">Show URL</a><div id="bookmarkme" style="display:none"><!-- --></div></td>
<td align="right" colspan="1" rowspan="1"><a href="#" onclick="javascript:window.location='mailto:b2ccommercedocfeedback@salesforce.com?subject=' + document.title" shape="rect">Submit Feedback</a></td><td align="right" colspan="1" rowspan="1"><a href="https://www.salesforce.com/company/privacy/" shape="rect" target="_blank">Privacy Policy</a></td></tr>
</table></div><div id="ocapiDeprecationBanner"><a id="closeDeprecationBanner" onclick="closeDeprecationBanner()" shape="rect">X</a>
<b>OCAPI versions 15.x and 16.x will be retired on March 31, 2021. For dates and more information, see the <a href="https://documentation.b2c.commercecloud.salesforce.com/DOC2/topic/com.demandware.dochelp/OCAPI/current/usage/VersioningAndDeprecationPolicy.html" shape="rect" target="_blank">OCAPI versioning and deprecation policy</a> and this <a href="https://help.salesforce.com/articleView?id=000351399&amp;language=en_US&amp;type=1&amp;mode=1" shape="rect" target="_blank">Knowledge Article</a>.</b></div>
<div id="cookieConsent"><a id="closeCookieConsent" onclick="closeBanner()" shape="rect">X</a>
<b>Privacy Update:</b>    We use cookies to make interactions with our websites and services easy and meaningful, to better understand how they are used. By continuing to use this site you are giving us your consent to do this. <a href="https://www.salesforce.com/company/privacy/" shape="rect" target="_blank">Privacy Policy.</a>
</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="text/javascript" xml:space="preserve">
window.onload = function () {
	
	var ssFlag;
	var ocapiBannerElement =  document.getElementById('ocapiDeprecationBanner');
	
	// If we're not in the correct infocenter, don't bother going further.
	// Return immediately.
	if( location.hostname != "documentation.b2c.commercecloud.salesforce.com" ) {
		return;                                      
	}


	// Show the OCAPI deprecation banner for English
	if ( typeof(ocapiBannerElement) != 'undefined' ) {
		if ( ocapiBannerElement != null ) {
			ocapiBannerElement.style.display = "none";
		}
	}


	// If sessionStorage is supported, check if the sessionConsentFlag is true.
	// Return immediately if true.
	if(ssTest() === true){  
    	ssFlag = true;
    	if ( sessionStorage.getItem('sessionConsentFlag') == 'true' ) {
			return;                
		} 
	}	
	 
	// If localStorage isn't supported, return immediately.
	// If it is supported, check if the localConsentFlag is true.
	// Return immediately if true; othewise, display the banner and wait 
	// for the user's response.
	if(lsTest() === true){   
    	if ( localStorage.getItem('localConsentFlag') == 'true' ) {
			return;                
		}else{
			// Display the banner
			document.getElementById("cookieConsent").style.display = "none";
		} 
	}else{
    	return; 
	}

	return;
}

// Close the banner and set the flags.
function closeBanner() {
	document.getElementById("cookieConsent").style.display = "none";
	localStorage.setItem('localConsentFlag', 'true');
	if(ssFlag) {
		sessionStorage.setItem('sessionConsentFlag', 'true');
	}
	return;
}

// Close the deprecation banner.
function closeDeprecationBanner() {
	var ocapiBannerElem =  document.getElementById('ocapiDeprecationBanner');
	if ( typeof(ocapiBannerElem) != 'undefined' ) {
		if ( ocapiBannerElem != null ) {
			ocapiBannerElem.style.display = "none";
		}
	}
	return;
}

function lsTest(){
    var lcTest = 'test';
    try {
        localStorage.setItem(lcTest, lcTest);
        localStorage.removeItem(lcTest);
        return true;
    } catch(e) {
        return false;
    }
}

function ssTest(){
    var sstest = 'test';
    try {
        sessionStorage.setItem(sstest, sstest);
        sessionStorage.removeItem(sstest);
        return true;
    } catch(e) {
        return false;
    }
}
</script>
</body>


</html>