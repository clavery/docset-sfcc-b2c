<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" xml:lang="en-us">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-148075995-1" xml:space="preserve"><!-- --></script>
<script xml:space="preserve">
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-148075995-1');
</script>

<link href="https://developer.salesforce.com/docs/commerce/b2c-commerce/references/ocapi-shop-api?meta=Summary" rel="canonical"/><meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

<meta content="(C) Copyright 2023" name="copyright"/>
<meta content="(C) Copyright 2023" name="DC.rights.owner"/>
<meta content="concept" name="DC.Type"/>
<meta content="Baskets resource (Shop API 23.2)" name="DC.Title"/>
<meta content="" name="abstract"/>
<meta content="" name="description"/>
<meta content="XHTML" name="DC.Format"/>
<meta content="id-1036384929" name="DC.Identifier"/>
<meta content="en-us" name="DC.Language"/>
<link href="../../../../css/commonltr.css" rel="stylesheet" type="text/css"/><script src="../../../../scripts/jquery-3.5.0.min.js" type="text/javascript" xml:space="preserve"> //  // </script><script src="../../../../scripts/dwScript.js" type="text/javascript" xml:space="preserve"> //  // </script>
<title>Baskets resource (Shop API 23.2)</title>
<!-- text added to HEAD tag-->
<script src="../../../../../../advanced/synchWithToc.js" type="text/javascript" xml:space="preserve"><!-- --></script>

<link charset="ISO-8859-1" href="../../../../../../content/org.eclipse.help.webapp/advanced/breadcrumbs.css" rel="stylesheet" type="text/css"/>
<script src="../../../../../../content/org.eclipse.help/livehelp.js" type="text/javascript" xml:space="preserve"> </script>
<script type="text/javascript">
if( self == "blah" ){
  var  anchorParam = location.hash.length > 0 ? '\u0026anchor=' + location.hash.substr(1) : '';
  window.location.replace( "../../../../../../index.jsp?topic=%2Fcom.demandware.dochelp%2FOCAPI%2Fcurrent%2Fshop%2FResources%2FBaskets.html" + anchorParam);
}
</script>
<style>
@import url(//fonts.googleapis.com/css?family=Salesforce+Sans:400,400italic,bold,bolditalic);

/*
 | This file is part of the DITA Open Toolkit project. See the accompanying license.txt file for
 | applicable licenses.
*/
/*
 | (c) Copyright IBM Corp. 2004, 2005 All Rights Reserved.
 */
.unresolved { background-color: skyblue }
.noTemplate { background-color: yellow }
.base { background-color: #ffffff }
/* Add space for top level topics */
/*.nested0 { margin-top : 1em }*/
/* div with class=p is used for paragraphs that contain blocks, to keep the XHTML valid */
.p { margin-top: 1em }
/* Default of italics to set apart figure captions */
.figcap { font-style: italic }
.figdesc { font-style: normal }
/* Use @frame to create frames on figures */
.figborder {
    border-style: solid;
    padding-left : 3px;
    border-width : 2px;
    padding-right : 3px;
    margin-top: 1em;
    border-color : Silver;
}
.figsides {
    border-left : 2px solid;
    padding-left : 3px;
    border-right : 2px solid;
    padding-right : 3px;
    margin-top: 1em;
    border-color : Silver;
}
.figtop {
    border-top : 2px solid;
    margin-top: 1em;
    border-color : Silver;
}
.figbottom {
    border-bottom : 2px solid;
    border-color : Silver;
}
.figtopbot {
    border-top : 2px solid;
    border-bottom : 2px solid;
    margin-top: 1em;
    border-color : Silver;
}
/* Most link groups are created with <div>. Ensure they have space before and after. */
.ullinks {
  list-style-type: none;
}
.ulchildlink {
  margin-top: 1em;
  margin-bottom: 1em;
}
.olchildlink {
  margin-top: 1em;
  margin-bottom: 1em;
}
.linklist {
  margin-bottom: 1em;
}
.linklistwithchild {
    margin-left: 1.5em;
    margin-bottom: 1em;
}
.sublinklist {
    margin-left: 1.5em;
    margin-bottom: 1em;
}
.relconcepts {
    margin-top: 1em;
    margin-bottom: 1em;
}
.reltasks {
    margin-top: 1em;
    margin-bottom: 1em;
}
.relref {
    margin-top: 1em;
    margin-bottom: 1em;
}
.relinfo {
    margin-top: 1em;
    margin-bottom: 1em;
}
.breadcrumb {
    font-size : 1em;
    margin-bottom: 1em;
}
dt.prereq { margin-left : 20px }
/* Set heading sizes, getting smaller for deeper nesting */
.topictitle1 {
    color: #333333;
    font-size: 2em;
    font-weight: bold;
    line-height: 1.5em;
	margin-top: .5em
}
.topictitle2 {
    font-size: 1.6em;
    font-weight: bold;
    line-height: 1.5em;
}
.topictitle3 {
    /* margin-top: 1pc;
    margin-bottom: .17em;*/
    font-size: 1.4em;
    font-weight: bold;
    line-height: 1.5em;
}
.topictitle4 {
    /* margin-top: .83em; */
    font-size: 1.4em;
}
.topictitle5 { font-size: 1.2em }
.topictitle6 {
    font-size: 1.2em;
    font-style: italic;
}
.sectiontitle {
    font-size: 1.6em;
    font-style: bold;
}
.section {
    margin-top: 1em;
    margin-bottom: 1em;
}
.example {
    margin-top: 1em;
    margin-bottom: 1em;
}
div.tasklabel {
    margin-top: 1em;
    margin-bottom: 1em;
}
h2.tasklabel,
h3.tasklabel,
h4.tasklabel,
h5.tasklabel,
h6.tasklabel { font-size: 100% }
/* All note formats have the same default presentation */
.note {
    margin-top: 1em;
    margin-bottom : 1em;
}
.notetitle { font-weight: bold }
.notelisttitle { font-weight: bold }
.tip {
    margin-top: 1em;
    margin-bottom : 1em;
}
.tiptitle { font-weight: bold }
.fastpath {
    margin-top: 1em;
    margin-bottom : 1em;
}
.fastpathtitle { font-weight: bold }
.important {
    margin-top: 1em;
    margin-bottom : 1em;
}
.importanttitle { font-weight: bold }
.remember {
    margin-top: 1em;
    margin-bottom : 1em;
}
.remembertitle { font-weight: bold }
.restriction {
    margin-top: 1em;
    margin-bottom : 1em;
}
.restrictiontitle { font-weight: bold }
.attention {
    margin-top: 1em;
    margin-bottom : 1em;
}
.attentiontitle { font-weight: bold }
.dangertitle { font-weight: bold }
.danger {
    margin-top: 1em;
    margin-bottom : 1em;
}
.cautiontitle { font-weight: bold }
.caution {
    font-weight: bold;
    margin-bottom : 1em;
}
.warning {
    margin-top: 1em;
    margin-bottom : 1em;
}
.warningtitle { font-weight: bold }
/* Simple lists do not get a bullet */
ul.simple { list-style-type: none }
/* Used on the first column of a table, when rowheader="firstcol" is used */
.firstcol { font-weight : bold }
/* Various basic phrase styles */
.bold { font-weight: bold }
.boldItalic {
    font-weight: bold;
    font-style: italic;
}
.italic { font-style: italic }
.underlined { text-decoration: underline }
.uicontrol { font-weight: bold }
.parmname { font-weight: bold }
.kwd { font-weight: bold }
.defkwd {
    font-weight: bold;
    text-decoration: underline;
}
.var { font-style : italic }
.shortcut { text-decoration: underline }
/* Default of bold for definition list terms */
.dlterm { font-weight: bold }
/* Use CSS to expand lists with @compact="no" */
.dltermexpand {
    font-weight: bold;
    margin-top: 1em;
}
*[compact="yes"]>li { margin-top: 0em }
*[compact="no"]>li { margin-top: .53em }
.liexpand {
    margin-top: 1em;
    margin-bottom: 1em;
}
.sliexpand {
    margin-top: 1em;
    margin-bottom: 1em;
}
.dlexpand {
    margin-top: 1em;
    margin-bottom: 1em;
}
.ddexpand {
    margin-top: 1em;
    margin-bottom: 1em;
}
.stepexpand {
    margin-top: 1em;
    margin-bottom: 1em;
}
.substepexpand {
    margin-top: 1em;
    margin-bottom: 1em;
}
/* Align images based on @align on topic/image */
div.imageleft { text-align: left }
div.imagecenter { text-align: center }
div.imageright { text-align: right }
div.imagejustify { text-align: justify }
/* The cell border can be turned on with
   {border-right:solid}
   This value creates a very thick border in Firefox (does not match other tables)

   Firefox works with
   {border-right:solid 1pt}
   but this causes a barely visible line in IE */

pre.screen {
    padding: 5px 5px 5px 5px;
    border: outset;
    background-color: #CCCCCC;
    margin-top: 2px;
    margin-bottom : 2px;
    white-space: pre;
}
/* Demandware Styles */

span.filepath {
    color: #000000;
    font-family: "Courier New", Courier, "Lucida Console", Monaco, monospace;
}
html {
    background: none repeat scroll 0 0 #FFFFFF;
    padding: 10px 0;
}

.nocellnorowborder {
    border: 1px solid #ACB1B7;
}

.cellrowborder {
   border: 1px solid #ACB1B7;
}
.row-nocellborder {
    border: 1px solid #ACB1B7;
}
.cell-norowborder {
    border: 1px solid #ACB1B7;
}

.topictitle1{
    color: #253045;
    font-family: "Salesforce Sans", "Courier Bold", Courier, Georgia, Times, "Times New Roman", serif;
    font-weight: normal;
}
.topictitle2{
    color: #253045;
    font-family: "Salesforce Sans", "Courier Bold", Courier, Georgia, Times, "Times New Roman", serif;
    font-weight: normal;
}
.topictitle3{
    color: #253045;
    font-family: "Salesforce Sans", "Courier Bold", Courier, Georgia, Times, "Times New Roman", serif;
    font-weight: normal;
}
.sectiontitle{
    color: #706e6b;
    font-family: "Salesforce Sans", "Courier Bold", Courier, Georgia, Times, "Times New Roman", serif;
    font-weight: normal;
}

body {
    /* background: none repeat scroll 0 0 #F9F9F9;
    border: 1px solid #DADADA;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    */
    color: #111111;
    font-family: "Salesforce Sans", Helvetica, Arial, sans-serif;
    font-size: .8em;
    line-height: 1.4em;
    padding: 10px;
}
li { padding-top: 1em }
p.subheading1 { font-size: 1.4em }
p.subheading2 { font-size: 1.2em }
.copyright_footer {
	 font-size: 1em;
	 font-style: italic;
}
a:link,
a:visited { color: #008CB9 }
a:hover,
a:focus {
    color: #3778C7;
    text-decoration: underline;
}
strong { color: #000000 }
.help_breadcrumbs,
.help_breadcrumbs a {
    color: #1589ee;
    font-size: 13px;
    font-weight: normal;
    padding: 0 0 0px;
    text-decoration: none;
	margin: 0px;
}
.help_breadcrumbs a:hover { text-decoration: underline }
.related-links { font-size: 11px }
div.header{
	line-height: 1em;
}

.alignleft {
	float: left;
	font-size: 1em;
	font-style: italic;
	margin: 0px;
	padding: 0px;

}
.alignright {
	float: right;
	margin: 0px;
	padding: 0px;
}

li table {
	margin-top: 1em;
	margin-bottom: 1em;
}

div.tablenoborder {
	margin-top: 1em;
}


table {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 1px solid #E6E6E6;
    border-collapse: collapse;
    padding: 5px;
}
table th {
    /* filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#eef0f4', endColorstr = '#ccd1d8');; ;
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr = '#eef0f4', endColorstr = '#ccd1d8')";
    background-image: -moz-linear-gradient(top, #eef0f4, #ccd1d8);
    background-image: -ms-linear-gradient(top, #eef0f4, #ccd1d8);
    background-image: -o-linear-gradient(top, #eef0f4, #ccd1d8);
    background-image: -webkit-gradient(linear, center top, center bottom, from(#eef0f4), to(#ccd1d8));
    background-image: -webkit-linear-gradient(top, #eef0f4, #ccd1d8);
    background-image: linear-gradient(top, #eef0f4, #ccd1d8);*/
    background: url("../com.demandware.standard.infocenter/doc/icon_note.png") no-repeat scroll 6px 9px #efefef;
    color: #4F5762;
    font-size: 1em;
    font-weight: bold;
    /* padding: 10px 3px 8px 5px; */
    padding: 1em;
}
table.table td,
table.simpletable td {
    border: 1px solid #ACB1B7;
    /* filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#ffffff', endColorstr = '#e5e5e5');
    /*INNER ELEMENTS MUST NOT BREAK THIS ELEMENTS BOUNDARIES*//*Element must have a height (not auto)*//*All filters must be placed together*/
    /*-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr = '#ffffff', endColorstr = '#e5e5e5')"; */
    /*Element must have a height (not auto)*//*All filters must be placed together*/
    /* background-image: -moz-linear-gradient(top, #ffffff, #e5e5e5);
    background-image: -ms-linear-gradient(top, #ffffff, #e5e5e5);
    background-image: -o-linear-gradient(top, #ffffff, #e5e5e5);
    background-image: -webkit-gradient(linear, center top, center bottom, from(#ffffff), to(#e5e5e5));
    background-image: -webkit-linear-gradient(top, #ffffff, #e5e5e5);
    background-image: linear-gradient(top, #ffffff, #e5e5e5);*/
    /*--IE9 DOES NOT SUPPORT CSS3 GRADIENT BACKGROUNDS--*/
    /* padding: 12px 3px 12px 5px; */
    padding: 1em;
}
table.copyright_table {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 1px solid #FFFFFF;
    border-collapse: collapse;
    padding: 0px;
	margin:0;
}

table.copyright_table td {
    padding: 0px;
	margin:0;
}

body .resultofText {
    background-color: transparent;
    color: #60a345;
}
pre {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 1px solid #999999;
    color: #000000;
    font-family: "Courier New", Courier, "Lucida Console", Monaco, monospace;
    /* font-weight: bold; */
    margin: 8px;
    padding: 8px;
    overflow-x: auto;
}
pre code {
    font-family: "Courier New", Courier, "Lucida Console", Monaco, monospace;
}
.codeph {
    color: #000000;
    font-family: "Courier New", Courier, "Lucida Console", Monaco, monospace;
}
.note {
    background: url("../com.demandware.standard.infocenter/doc/icon_note.png") no-repeat scroll 6px 9px #efefef;
    border: 1px solid #ffffff;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    color: #333333;
/*    font-family: Verdana,Arial,Helvetica,sans-serif;  */
    font-size: 1em;
    padding: 10px 10px 10px 26px;
}
.hidden { display: none; }
.shown { display: block; }
div[role=search]{
	background-color: #25282A;
	color: #CCCCCC;
}
a:link.scopeLabel {color:#FFB549;}
#cookieConsent {
    background-color: rgba(20,20,20,0.8);
    min-height: 26px;
    font-size: 14px;
    color: #ccc;
    line-height: 26px;
    padding: 8px 0 8px 30px;
    font-family: "Trebuchet MS",Helvetica,sans-serif;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    display: none;
    z-index: 9999;
}
#cookieConsent a {
    color: #4B8EE7;
    text-decoration: none;
}
#closeCookieConsent {
    float: right;
    display: inline-block;
    cursor: pointer;
    height: 20px;
    width: 20px;
    margin: -15px 0 0 0;
    font-weight: bold;
}
#closeCookieConsent:hover {
    color: #FFF;
}
#cookieConsent a.cookieConsentOK {
    background-color: #F1D600;
    color: #000;
    display: inline-block;
    border-radius: 5px;
    padding: 0 20px;
    cursor: pointer;
    float: right;
    margin: 0 60px 0 10px;
}
#cookieConsent a.cookieConsentOK:hover {
    background-color: #E0C91F;
}
#ocapiDeprecationBanner {
    background-color: #0747a6;
    min-height: 26px;
    font-size: 14px;
    color: white;
    line-height: 26px;
    padding: 8px 0 8px 30px;
    font-family: "Trebuchet MS",Helvetica,sans-serif;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    display: none;
    z-index: 9999;
}
#ocapiDeprecationBanner a {
    color: #4B8EE7;
    text-decoration: none;
}
#closeDeprecationBanner {
    float: right;
    display: inline-block;
    cursor: pointer;
    height: 20px;
    width: 20px;
    margin: -15px 0 0 0;
    font-weight: bold;
}
.help_breadcrumbs { display: none !important; }
.copyright_table td { display: none; }
copyright_table td:nth-child(4) { display: table-cell; }
</style>
<body id="id-1036384929">
<div class="help_breadcrumbs"><a href="../../../../../../topic/com.demandware.dochelp/content/b2c_commerce/topics/getting_started/b2c_welcome.html" shape="rect">Salesforce B2C Commerce 23.6</a> &gt; <a href="../../../../../../topic/com.demandware.dochelp/OCAPI/current/usage/OpenCommerceAPI.html" shape="rect">Open Commerce API 23.2</a> &gt; <a href="../../../../../../topic/com.demandware.dochelp/OCAPI/current/usage/ShopAPIResources.html" shape="rect">Shop API resources 23.2</a></div>

<div><!-- text added to header of html--></div>
      <h1 class="title topictitle1" id="ariaid-title1">Baskets resource (Shop API 23.2)</h1>

      
      <div class="body conbody"><p class="shortdesc"> </p>
<div class="section" id="id-1036384929__Summary"><h2 class="title sectiontitle">Summary</h2>
      
      
<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">Http Method</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;">Resource</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">POST</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id49484514" shape="rect">/baskets</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Creates a new basket. The created basket is initialized with default values. Data provided in the body document
 will be populated into the created basket. It can be updated with further Shop API calls.
 <p class="lines pdfonly"><!-- --></p>
 Considered values from the request body are:
 <ul class="ul">
 <li class="li">customer information: PUT /baskets/{basket_id}/customer</li>

 <li class="li">billing address: PUT /baskets/{basket_id}/billing_address</li>

 <li class="li">shipments including shipping address and shipping method: POST /baskets/{basket_id}/shipments</li>

 <li class="li">product items: POST /baskets/{basket_id}/items</li>

 <li class="li">coupon items: POST /baskets/{basket_id}/coupons</li>

 <li class="li">Invalid coupons are silently ignored.</li>

 <li class="li">gift certificate items: POST /baskets/{basket_id}/gift_certificates</li>

 <li class="li">payment method and card type: POST /baskets/{basket_id}/payment_instruments</li>

 <li class="li">custom properties: PATCH /baskets/{basket_id}</li>

 </ul>

 Related resource means with which resource you can specify the same data after the basket creation.
 <p class="lines pdfonly"><!-- --></p>
 Identify the basket using the <code class="ph codeph">basket_id</code> property, which
 should be integrated into the path of an update request, for example a POST to
 <code class="ph codeph">/baskets/{basket_id}/items</code>. <p class="lines pdfonly"><!-- --></p>
 The resource supports JWT or
 OAuth tokens for authentication:
 <ul class="ul">
 <li class="li">A customer must provide a JWT, which specifies exactly one customer (it may be a guest or a registered
 customer). In this case the resource creates a basket for this customer.</li>

 <li class="li">An agent must provide an OAuth token. The agent can use this resource to create a basket for a new created
 guest customer, and can later update the customer if desired.</li>

 </ul>

 <p class="lines pdfonly"><!-- --></p>
 The number of baskets which can be created per customer is limited. When a
 basket is created it is said to be <em class="ph i">open</em>. It remains <em class="ph i">open</em> until either an order is created from it
 using a POST to resource <code class="ph codeph">/orders</code> or it is <em class="ph i">deleted</em> using a DELETE to resource
 <code class="ph codeph">/baskets/{basket_id}</code>. The number of <em class="ph i">open</em> baskets allowed depends on the authentication
 method used:
 <ul class="ul">
 <li class="li">When using JWT each customer can have just one <em class="ph i">open</em> basket.</li>

 <li class="li">When using OAuth each customer can have up to 4 <em class="ph i">open</em> baskets.</li>

 </ul>

 Custom properties in the form c_&lt;CUSTOM_NAME&gt; are supported. A custom property must correspond to a custom
 attribute (&lt;CUSTOM_NAME&gt;) defined for the Basket system object, and its value must be valid for that custom
 attribute. Other basket properties like the channel type or source code cannot be set with this resource.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">POST</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id492144294" shape="rect">/baskets/reference</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Creates a new basket based on a basket reference.
 <p class="p">
 The returned basket will be a copy of the basket in the reference. The basket in the reference must be a basket
 of a guest customer and the provided customer_id in the reference must match the guest customer in the basket.
 There is a check that an authenticated customer for whom a basket is being copied doesn't already have a basket.
 In case customer_id not matching a BasketNotFoundException will be returned as fault. All personal data like
 payment instruments and coupons will not be copied over to the new basket. When authenticated via JWT, a customer
 can only have one open basket and a CustomerBasketsQuotaExceededException is thrown, when the customer tries to
 create a second basket. Before using this endpoint to create a basket for a JWT-authenticated customer, verify
 that they don't already have one.
 </p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">GET</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id-1337309405" shape="rect">/baskets/{basket_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Gets a basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">PATCH</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id1441479317" shape="rect">/baskets/{basket_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Updates a basket. Only the currency of the basket, source code, and the custom
 properties of the basket and of the shipping items will be considered.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">DELETE</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id167589848" shape="rect">/baskets/{basket_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Removes a basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">PUT</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id1843586790" shape="rect">/baskets/{basket_id}/agent</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Marks a basket as an agent basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">GET</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id-2083429339" shape="rect">/baskets/{basket_id}/approaching_discounts</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Gets the approaching discounts of a basket</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">PUT</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id-1982259685" shape="rect">/baskets/{basket_id}/billing_address</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Sets the billing address of a basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">POST</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id-1630158641" shape="rect">/baskets/{basket_id}/coupons</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Adds a coupon to an existing basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">DELETE</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id-1047194111" shape="rect">/baskets/{basket_id}/coupons/{coupon_item_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Removes a coupon from the basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">PUT</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id1564670933" shape="rect">/baskets/{basket_id}/customer</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Sets customer information for an existing basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">POST</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id679113273" shape="rect">/baskets/{basket_id}/gift_certificate_items</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Adds a gift certificate item to an existing basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">DELETE</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id1877801007" shape="rect">/baskets/{basket_id}/gift_certificate_items/{gift_certificate_item_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Deletes a gift certificate item from an existing basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">PATCH</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id-1739886164" shape="rect">/baskets/{basket_id}/gift_certificate_items/{gift_certificate_item_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Updates a gift certificate item of an existing basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">POST</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id-183324740" shape="rect">/baskets/{basket_id}/items</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Adds new items to a basket. <p class="lines pdfonly"><!-- --></p>
 The added items are associated with the
 specified shipment. If no shipment id is specified, the added items are associated with the default shipment.
 <p class="lines pdfonly"><!-- --></p>
 Considered values from the request body, for each item are:
 <ul class="ul">
 <li class="li"><strong class="ph b">product_id</strong>: a valid product id. This is the id of the product to be added to the basket. If the
 product is already in the basket, the API either increments the quantity of the existing product line item or
 creates a new product line item, based on the site preference 'Add Product Behavior'. For option products and
 product bundles containing variation masters, the API creates a new product line item regardless of the site
 preference.</li>

 <li class="li"><strong class="ph b">shipment_id</strong>: a valid shipment id (optional). This is the id of the shipment in which the product item
 is created.</li>

 <li class="li"><strong class="ph b">quantity</strong>: a number between 0.01 and 999. This is the quantity of the product to order.</li>

 <li class="li"><strong class="ph b">inventory_id</strong>: a valid inventory id (optional). This is the id of the inventory from which the item is
 allocated.</li>

 <li class="li"><strong class="ph b">bonus_discount_line_item_id</strong>: a valid bonus discount line item id (optional). This is the id of the
 bonus discount line item for which the added product is a selected bonus product.</li>

 <li class="li"><strong class="ph b">option_items/option_value_id</strong>: a valid option value id. This is an option value for an option item of
 an option product. <p class="lines pdfonly"><!-- --></p>
 This is only possible if the product item is an option
 product. To set option values, you must specify a collection of option items in the <code class="ph codeph">option_items</code>
 property. These option items must contain <code class="ph codeph">option_id</code> and <code class="ph codeph">option_value_id</code>. Also,
 the values you specify must be valid for the option product that this product item represents. Otherwise, the
 server throws an <code class="ph codeph">InvalidProductOptionItemException</code> or an
 <code class="ph codeph">InvalidProductOptionValueItemException</code>.</li>

 <li class="li"><strong class="ph b">custom properties in the form c_&lt;CUSTOM_NAME&gt;</strong>: the custom property must correspond to a custom
 attribute (&lt;CUSTOM_NAME&gt;) defined for ProductLineItem. The value of this property must be valid for the
 type of custom attribute defined for ProductLineItem.</li>

 </ul>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">PATCH</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id3485570" shape="rect">/baskets/{basket_id}/items/{item_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Updates an item in a basket. <p class="lines pdfonly"><!-- --></p>
 The
 following values in the request body are considered by the server:
 <ul class="ul">
 <li class="li"><code class="ph codeph">product_id</code>: a valid product id. The purpose of this
 value is to exchange a variation of a variation product.</li>

 <li class="li"><code class="ph codeph">shipment_id</code>: a valid shipment id. The purpose of
 this value is to move a product item to another shipment.</li>

 <li class="li"><code class="ph codeph">quantity</code>: a number between 0 and 999. The purpose of
 this value is to change quantity of the product item. If quantity is 0,
 the product item is removed.</li>

 <li class="li"><code class="ph codeph">option_items/option_value_id</code>: a valid option value
 id. The purpose of this value is to exchange an option value for an
 option item of an option product. <p class="lines pdfonly"><!-- --></p>

 This is only possible if the product item is an option product. To change
 option values a collection of option items to be changed need to be
 provided in property <code class="ph codeph">option_items</code>. Those
 <code class="ph codeph">option_items</code> need to contain <code class="ph codeph">option_id</code>
 and <code class="ph codeph">option_value_id</code>. The provided values must be valid
 for the option product that this product item represents. Otherwise
 <code class="ph codeph">InvalidProductOptionItemException</code> or
 <code class="ph codeph">InvalidProductOptionValueItemException</code> will be thrown.</li>

 <li class="li"><code class="ph codeph"><em class="ph i">custom properties</em> c_&lt;CUSTOM_NAME&gt;</code>: a
 value corresponding to the type defined for custom attribute
 &lt;CUSTOM_NAME&gt; of ProductLineItem. The purpose of this value is to
 add or change the value of a custom attribute defined for
 ProductLineItem.</li>

 </ul>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">DELETE</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id1864517317" shape="rect">/baskets/{basket_id}/items/{item_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Removes a product item from the basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">POST</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id-44357413" shape="rect">/baskets/{basket_id}/notes</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Adds a note to an existing basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">GET</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id-1114665359" shape="rect">/baskets/{basket_id}/notes</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Retrieves notes for a basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">DELETE</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id-950000731" shape="rect">/baskets/{basket_id}/notes/{note_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Removes a basket note.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">POST</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id468168297" shape="rect">/baskets/{basket_id}/payment_instruments</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Adds a payment instrument to a basket.
 <p class="p">
 Payment instruments are usually authorized after order creation, for example in a custom hook. The default
 payment authorization process executes an authorization when a payment instrument is added to an order or
 updated. See <code class="ph codeph">POST /orders/{order_no}/payment_instruments</code> and <code class="ph codeph">PATCH
 /orders/{order_no}/payment_instruments/{payment_instrument_id}</code>. NOTE: If CREDIT_CARD is selected as the
 payment_method_id, it is mandatory to provide the property card_type.
 </p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">PATCH</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id969914594" shape="rect">/baskets/{basket_id}/payment_instruments/{payment_instrument_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Updates a payment instrument of a basket.
 <p class="p">
 Payment instruments are usually authorized after order creation, for example in a custom hook. The default
 payment authorization process executes an authorization when a payment instrument is added to an order or
 updated. See <code class="ph codeph">POST /orders/{order_no}/payment_instruments</code> and <code class="ph codeph">PATCH
 /orders/{order_no}/payment_instruments/{payment_instrument_id}</code>
 </p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">DELETE</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id816651685" shape="rect">/baskets/{basket_id}/payment_instruments/{payment_instrument_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Removes a payment instrument of a basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">GET</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id-1955917319" shape="rect">/baskets/{basket_id}/payment_methods</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Gets applicable payment methods for an existing basket considering the open payment amount only.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">POST</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id1804404556" shape="rect">/baskets/{basket_id}/price_adjustments</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Adds a custom manual price adjustment to the basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">DELETE</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id1387776709" shape="rect">/baskets/{basket_id}/price_adjustments/{price_adjustment_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Removes a custom manual price adjustment from the basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">PATCH</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id-1422160766" shape="rect">/baskets/{basket_id}/price_adjustments/{price_adjustment_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Updates a custom manual price adjustment on the basket. Only the following PATH values are considered for the
 update: discount, item_text, reason_code and custom properties; all other attributes are ignored. The discount
 type of a price adjustment cannot be updated and therefore, the value of the existing type must be passed. For an
 adjustment of type PERCENTAGE, the 'percentage' attribute is mandatory. For adjustments of type AMOUNT and
 FIXED_PRICE, the 'amount' attribute is mandatory.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">POST</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id-1800910333" shape="rect">/baskets/{basket_id}/shipments</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Creates a new shipment for a basket.
 <p class="lines pdfonly"><!-- --></p>

 The created shipment is initialized with values provided in the body
 document and can be updated with further data API calls. Considered from
 the body are the following properties if specified:
 <ul class="ul">
 <li class="li">the id</li>

 <li class="li">the shipping address</li>

 <li class="li">the shipping method</li>

 <li class="li">gift boolean flag</li>

 <li class="li">gift message</li>

 <li class="li">custom properties</li>

 </ul>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">PATCH</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id560799458" shape="rect">/baskets/{basket_id}/shipments/{shipment_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Updates a shipment for a basket. <p class="lines pdfonly"><!-- --></p>
 The body can include updated values for
 the following properties:
 <ul class="ul">
 <li class="li">the id</li>

 <li class="li">the shipping address</li>

 <li class="li">the shipping method</li>

 <li class="li">gift boolean flag</li>

 <li class="li">gift message</li>

 <li class="li">custom properties</li>

 </ul>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">DELETE</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id1195131685" shape="rect">/baskets/{basket_id}/shipments/{shipment_id}</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Removes a specified shipment and all associated product, gift certificate, shipping and price adjustment line
 items from a basket. You can't remove a default shipment (id = "me").</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">PUT</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id641780291" shape="rect">/baskets/{basket_id}/shipments/{shipment_id}/shipping_address</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Sets a shipping address of a specific shipment of a basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">PUT</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id-1062659770" shape="rect">/baskets/{basket_id}/shipments/{shipment_id}/shipping_method</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Sets a shipping method to a specific shipment of a basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">GET</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id-1126774498" shape="rect">/baskets/{basket_id}/shipments/{shipment_id}/shipping_methods</a></td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Gets the applicable shipping methods for a certain shipment of a basket.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e32" rowspan="1" style="text-align:left;vertical-align:top;">PUT</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e34" rowspan="1" style="text-align:left;vertical-align:top;"><a class="xref" href="Baskets.html#id-1036384929__id895933963" shape="rect">/baskets/{basket_id}/storefront</a></td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e36" rowspan="1" style="text-align:left;vertical-align:top;">Marks a basket as storefront basket.</td>
</tr>

          </tbody>
</table>
</div>

    </div>
<div class="section" id="id-1036384929__id49484514"><h2 class="title sectiontitle">Create basket</h2>
      
      <p class="p"><!-- --></p>
Creates a new basket. The created basket is initialized with default values. Data provided in the body document
 will be populated into the created basket. It can be updated with further Shop API calls.
 <p class="lines pdfonly"><!-- --></p>
 Considered values from the request body are:
 <ul class="ul">
 <li class="li">customer information: PUT /baskets/{basket_id}/customer</li>

 <li class="li">billing address: PUT /baskets/{basket_id}/billing_address</li>

 <li class="li">shipments including shipping address and shipping method: POST /baskets/{basket_id}/shipments</li>

 <li class="li">product items: POST /baskets/{basket_id}/items</li>

 <li class="li">coupon items: POST /baskets/{basket_id}/coupons</li>

 <li class="li">Invalid coupons are silently ignored.</li>

 <li class="li">gift certificate items: POST /baskets/{basket_id}/gift_certificates</li>

 <li class="li">payment method and card type: POST /baskets/{basket_id}/payment_instruments</li>

 <li class="li">custom properties: PATCH /baskets/{basket_id}</li>

 </ul>

 Related resource means with which resource you can specify the same data after the basket creation.
 <p class="lines pdfonly"><!-- --></p>
 Identify the basket using the <code class="ph codeph">basket_id</code> property, which
 should be integrated into the path of an update request, for example a POST to
 <code class="ph codeph">/baskets/{basket_id}/items</code>. <p class="lines pdfonly"><!-- --></p>
 The resource supports JWT or
 OAuth tokens for authentication:
 <ul class="ul">
 <li class="li">A customer must provide a JWT, which specifies exactly one customer (it may be a guest or a registered
 customer). In this case the resource creates a basket for this customer.</li>

 <li class="li">An agent must provide an OAuth token. The agent can use this resource to create a basket for a new created
 guest customer, and can later update the customer if desired.</li>

 </ul>

 <p class="lines pdfonly"><!-- --></p>
 The number of baskets which can be created per customer is limited. When a
 basket is created it is said to be <em class="ph i">open</em>. It remains <em class="ph i">open</em> until either an order is created from it
 using a POST to resource <code class="ph codeph">/orders</code> or it is <em class="ph i">deleted</em> using a DELETE to resource
 <code class="ph codeph">/baskets/{basket_id}</code>. The number of <em class="ph i">open</em> baskets allowed depends on the authentication
 method used:
 <ul class="ul">
 <li class="li">When using JWT each customer can have just one <em class="ph i">open</em> basket.</li>

 <li class="li">When using OAuth each customer can have up to 4 <em class="ph i">open</em> baskets.</li>

 </ul>

 Custom properties in the form c_&lt;CUSTOM_NAME&gt; are supported. A custom property must correspond to a custom
 attribute (&lt;CUSTOM_NAME&gt;) defined for the Basket system object, and its value must be valid for that custom
 attribute. Other basket properties like the channel type or source code cannot be set with this resource.
      <p class="p subheading1" id="id-1036384929__id1019490125">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>POST https://hostname:port/dw/shop/v23_2/baskets</code></pre>
      <p class="p subheading1" id="id-1036384929__id-1220718022">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id948388314">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e742" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e744" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e742" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e744" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e742" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e744" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1437503405">Request Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id-92015433">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id1471802355">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e807" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e809" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e811" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e813" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e807" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e809" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidPaymentMethodIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e811" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">paymentMethodId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e813" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the provided payment method is invalid or not applicable.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e807" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e809" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e811" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e813" rowspan="1" style="text-align:left;vertical-align:top;">Thrown if the customerId URL parameter does not match the verified customer
             represented by the JWT, not relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e807" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e809" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">CustomerBasketsQuotaExceededException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e811" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketIds (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e813" rowspan="1" style="text-align:left;vertical-align:top;">Thrown if a new basket cannot be created because the maximum number
             of baskets per customer would be exceeded.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e807" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e809" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">DuplicateShipmentIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e811" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e813" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the same shipment id appeared twice in the body.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e807" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e809" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">MissingCouponCodeException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e811" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e813" rowspan="1" style="text-align:left;vertical-align:top;">Thrown if the coupon number is not provided.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e807" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e809" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidPriceAdjustmentLevelException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e811" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e813" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that a fixed price adjustment was added at order level
             which is disallowed.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e807" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e809" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidPromotionIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e811" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">promotionId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e813" rowspan="1" style="text-align:left;vertical-align:top;">When attempting to add a price adjustment, indicates that a promotion id was
             used twice.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e807" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e809" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">SystemPromotionIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e811" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">promotionId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e813" rowspan="1" style="text-align:left;vertical-align:top;">When attempting to add a price adjustment, indicates that a system promotion
             id was used as a manual promotion id.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e807" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e809" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">TooManyPromotionsException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e811" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e813" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that more than one hundred price adjustments would have been
             created.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e807" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e809" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">ShipmentNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e811" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e813" rowspan="1" style="text-align:left;vertical-align:top;">Thrown if the shipment with the given shipment id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id-8596431">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e939" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e941" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e939" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.beforePOST_v2</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e941" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePOST_v2</strong>
      (basketRequest : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before the request will be processed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketRequest - the basket request</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e939" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.afterPOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e941" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPOST</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after the basket was created.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the created basket</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e939" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.modifyPOSTResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e941" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPOSTResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the created basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e939" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e941" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>


 <pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
 </code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1843746572">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code># create a basket with the given token

REQUEST:
POST /dw/shop/v23_2/baskets HTTP/1.1
Host: example.com
Authorization:Bearer eyJfdiI6IjXXXXXX.eyJfdiI6IjEiLCJleHAXXXXXXX.-d5wQW4c4O4wt-Zkl7_fiEiALW1XXXX 
Content-Type: application/json
Content-Length: 0

# in case of success, response contains new created basket with its ID and resource state

RESPONSE:
HTTP/1.1 200 OK
Content-Length:124 
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "basket",
   "_flash" : 
   [
...  
   ]
...
   "basket_id" : "bczFTaOjgEqUkaaadkvHwbgrP5",
   "currency" : "USD",
   "customer_info" : 
   {
      "_type" : "customer_info",
      "customer_id" : "adNJrbxJovaT5DPxUSfOywk6Et",
      "email" : ""
   },
...
   "order_total" : 0.00,
   "product_sub_total" : 0.00,
   "product_total" : 0.00,
   "shipments" : 
   [
      {
         "_type" : "shipment",
         "id" : "me",
         "shipment_id" : "bc5OTaOjgEqUoaaadkvHwbgrP5"
      }
   ],
   "shipping_items" : 
   [
      {
...      
         "shipment_id" : "me",
         "item_id" : "bcwsbaOjgEqUsaaadkvHwbgrP5"
      }
   ],
   "shipping_total" : 0.00,
   "shipping_total_tax" : 0.00,
   "taxation" : "net",
   "tax_total" : 0.00
}


</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id492144294"><h2 class="title sectiontitle">Create a basket from a reference</h2>
      
      <p class="p"><!-- --></p>
Creates a new basket based on a basket reference.
 <p class="p">
 The returned basket will be a copy of the basket in the reference. The basket in the reference must be a basket
 of a guest customer and the provided customer_id in the reference must match the guest customer in the basket.
 There is a check that an authenticated customer for whom a basket is being copied doesn't already have a basket.
 In case customer_id not matching a BasketNotFoundException will be returned as fault. All personal data like
 payment instruments and coupons will not be copied over to the new basket. When authenticated via JWT, a customer
 can only have one open basket and a CustomerBasketsQuotaExceededException is thrown, when the customer tries to
 create a second basket. Before using this endpoint to create a basket for a JWT-authenticated customer, verify
 that they don't already have one.
 </p>

      <p class="p subheading1" id="id-1036384929__id-1547569911">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>POST https://hostname:port/dw/shop/v23_2/baskets/reference</code></pre>
      <p class="p subheading1" id="id-1036384929__id975821302">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-601764194">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e1188" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e1190" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e1188" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e1190" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id2094594929">Request Document</p>
<p class="p"><a class="xref" href="../Documents/BasketReference.html#id1490254010" shape="rect">BasketReference</a></p>
<p class="p subheading1" id="id-1036384929__id-1197014669">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-1921024841">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e1248" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e1250" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e1252" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e1254" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e1248" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e1250" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e1252" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e1254" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id and customer id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id-474243347">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e1289" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e1291" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e1289" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.reference.beforePOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e1291" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePOST</strong>
      (sourceBasket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, request : <a class="xref" href="../Documents/BasketReference.html" shape="rect">
          BasketReference
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">sourceBasket - the basket to copy the data from</dd>
<dd class="dd pd ddexpand">basketReferenceRequest - the basket reference input document</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e1289" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.reference.afterPOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e1291" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPOST</strong>
      (sourceBasket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, request : <a class="xref" href="../Documents/BasketReference.html" shape="rect">
          BasketReference
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">sourceBasket - the basket to copy the data from</dd>
<dd class="dd pd ddexpand">basket - the created basket</dd>
<dd class="dd pd ddexpand">basketReferenceRequest - the basket reference input document</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e1289" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.reference.modifyPOSTResponse</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e1291" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPOSTResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, basketReferenceRequest : <a class="xref" href="../Documents/BasketReference.html" shape="rect">
          BasketReference
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the created basket</dd>
<dd class="dd pd ddexpand">basketResponse - the basket response object</dd>
<dd class="dd pd ddexpand">basketReferenceRequest - the basket reference input document</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1549080624">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code># create a basket with the given token and copy data from referenced guest basket

REQUEST:
POST /dw/shop/v23_2/baskets_reference HTTP/1.1
Host: example.com
Authorization:Bearer eyJfdiI6IjXXXXXX.eyJfdiI6IjEiLCJleHAXXXXXXX.-d5wQW4c4O4wt-Zkl7_fiEiALW1XXXX 
Content-Type: application/json
{
  "basket_id" :"tczFTaOjgEqUkacedkvHwbgrP3",
  "customer_id" : "dlNJrbxJovaT5TPxUSfOywk6as"
}

# in case of success, response contains new created basket with its id and resource state

RESPONSE:
HTTP/1.1 200 OK
Content-Length:124 
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "basket",
   "_flash" : 
   [
...  
   ]
...
   "basket_id" : "bczFTaOjgEqUkaaadkvHwbgrP5",
   "currency" : "USD",
   "customer_info" : 
   {
      "_type" : "customer_info",
      "customer_id" : "adNJrbxJovaT5DPxUSfOywk6Et",
      "email" : ""
   },
...
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id-1337309405"><h2 class="title sectiontitle">Get basket</h2>
      
      <p class="p"><!-- --></p>
Gets a basket.
      <p class="p subheading1" id="id-1036384929__id332269420">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>GET https://hostname:port/dw/shop/v23_2/baskets/{basket_id}</code></pre>
      <p class="p subheading1" id="id-1036384929__id-951057703">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-1544982437">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e1503" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e1505" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e1503" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e1505" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e1503" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e1505" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1359325846">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id850938049">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e1549" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e1551" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e1553" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e1555" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e1549" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e1551" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e1553" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be retrieved</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e1555" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-1706087564">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e1598" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e1600" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e1602" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e1604" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e1598" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1600" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1602" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e1604" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the verified
             customer represented by the JWT, not relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e1598" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e1600" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e1602" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e1604" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id1573540240">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e1648" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e1650" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e1648" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.beforeGET</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e1650" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeGET</strong>
      (basketId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before the request will be processed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketId - the basket id</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e1648" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.modifyGETResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e1650" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyGETResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e1648" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e1650" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
 <pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
 </code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1334143347">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code># get a basket by id, request includes Authorization:Bearer token

REQUEST:
GET /dw/shop/v23_2/baskets/bczFTaOjgEqUkaaadkvHwbgrP5 HTTP/1.1
Host: example.com
Authorization:Bearer eyJfdiI6IjXXXXXX.eyJfdiI6IjEiLCJleHAXXXXXXX.-d5wQW4c4O4wt-Zkl7_fiEiALW1XXXX 
Content-Type: application/json

# in case of success

RESPONSE:
HTTP/1.1 200 OK
Content-Length:124 
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "basket",
...
   "basket_id" : "bczFTaOjgEqUkaaadkvHwbgrP5",
   "currency" : "USD",
   "channel_type" : "callcenter"
...
}

# in case basket for given ID not found

RESPONSE:
HTTP/1.1 404 Not Found
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "BasketNotFoundException",
      "message" : "No basket with ID 'xxbcql1aOjgEsaaadkOtMbgrQq' could be found."
   }
}
</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id1441479317"><h2 class="title sectiontitle">Update the customer of a basket</h2>
      
      <p class="p"><!-- --></p>
Updates a basket. Only the currency of the basket, source code, and the custom
 properties of the basket and of the shipping items will be considered.
      <p class="p subheading1" id="id-1036384929__id2027423418">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>PATCH https://hostname:port/dw/shop/v23_2/baskets/{basket_id}</code></pre>
      <p class="p subheading1" id="id-1036384929__id-1920095449">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id991589453">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e1849" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e1851" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e1849" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e1851" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e1849" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e1851" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id4125024">Request Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id-1577072284">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id-2119711985">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e1904" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e1906" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e1908" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e1910" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e1904" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e1906" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e1908" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e1910" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-1598799514">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e1953" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e1955" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e1957" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e1959" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e1953" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1955" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1957" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e1959" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not
             match the verified customer represented by the JWT, not
             relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e1953" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1955" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">UnsupportedCurrencyException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1957" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">currency (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e1959" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket cannot be updated because the
             requested currency is not supported by the site.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e1953" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1955" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidShippingItemIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1957" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shippingItemId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e1959" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the given shipping item id is null or empty.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e1953" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1955" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">DuplicateShippingItemIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1957" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shippingItemId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e1959" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that a few shipping items with the same item id are
             provided.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e1953" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1955" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">SourceCodeInactiveException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1957" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">sourceCode (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e1959" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the provided code is not currently active.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e1953" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1955" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1957" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e1959" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e1953" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1955" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">ShippingItemNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e1957" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shippingItemId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e1959" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the shipping item with the given item id is
             unknown for the basket</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e1953" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e1955" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">SourceCodeNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e1957" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">sourceCode (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e1959" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the provided code was not found.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id-145750178">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e2069" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e2071" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e2069" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.beforePATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e2071" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePATCH</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketInput : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before updating of the basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket to be updated</dd>
<dd class="dd pd ddexpand">basketInput - the basket delta containing the desired changes</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e2069" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.afterPATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e2071" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPATCH</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketInput : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after updating of the basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket which was updated</dd>
<dd class="dd pd ddexpand">basketInput - the basket delta containing the desired changes</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e2069" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.modifyPATCHResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e2071" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPATCHResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e2069" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e2071" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1226855297">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
PATCH /dw/shop/v23_2/baskets/bczFTaOjgEqUkaaadkvHwbgrP5 HTTP/1.1
Host: example.com
Authorization:Bearer eyJfdiI6IjXXXXXX.eyJfdiI6IjEiLCJleHAXXXXXXX.-d5wQW4c4O4wt-Zkl7_fiEiALW1XXXX 
Content-Type: application/json
{
   "_resource_state" : "847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb",
   "c_newCustomProperty:"customValue"
}
# in case of success

RESPONSE:
HTTP/1.1 200 OK
Content-Length:124 
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "basket",
...
   "basket_id" : "bczFTaOjgEqUkaaadkvHwbgrP5",
   "c_newCustomProperty" : "customValue",
...
}

# in case basket for given ID not found

RESPONSE:
HTTP/1.1 404 Not Found
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "BasketNotFoundException",
      "message" : "No basket with ID 'xxbcql1aOjgEsaaadkOtMbgrQq' could be found."
   }
}
</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id167589848"><h2 class="title sectiontitle">Remove a basket</h2>
      
      <p class="p"><!-- --></p>
Removes a basket.
      <p class="p subheading1" id="id-1036384929__id1917279895">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>DELETE https://hostname:port/dw/shop/v23_2/baskets/{basket_id}</code></pre>
      <p class="p subheading1" id="id-1036384929__id228838532">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id1507491920">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e2329" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e2331" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e2329" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e2331" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e2329" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e2331" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id988362604">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e2366" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e2368" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e2370" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e2372" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e2366" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e2368" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e2370" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be retrieved</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e2372" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-1529479063">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e2414" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e2416" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e2418" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e2420" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e2414" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e2416" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e2418" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e2420" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the verified
             customer represented by the JWT, not relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e2414" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e2416" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e2418" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e2420" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id1949101819">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e2465" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e2467" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e2465" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.beforeDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e2467" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeDELETE</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before removing a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket to be removed</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e2465" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.afterDELETE</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e2467" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterDELETE</strong>
      (basketId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after removing a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketId - the identifier of the removed basket</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1157534846">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code># remove a basket by id, request includes Authorization:Bearer token

REQUEST:
DELETE /dw/shop/v23_2/baskets/bczFTaOjgEqUkaaadkvHwbgrP5 HTTP/1.1
Authorization:Bearer eyJfdiI6IjXXXXXX.eyJfdiI6IjEiLCJleHAXXXXXXX.-d5wQW4c4O4wt-Zkl7_fiEiALW1XXXX 
Content-Type: application/json
x-dw-resource-state: 860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5

# in case of success

RESPONSE:
HTTP/1.1 204 NO CONTENT

# validation failure in case of an unknown basket id:

RESPONSE:
HTTP/1.1 404 Not Found
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" :
   {
      "type" : "BasketNotFoundException",
      "message" : "No basket with ID '123' could be found."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id1843586790"><h2 class="title sectiontitle">Put a basket as agent basket.</h2>
      
      <p class="p"><!-- --></p>
Marks a basket as an agent basket.
      <p class="p subheading1" id="id-1036384929__id-1747604279">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>PUT https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/agent</code></pre>
      <p class="p subheading1" id="id-1036384929__id169587126">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id1889648350">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e2599" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e2601" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e2599" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e2601" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT. A valid user is required.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e2599" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e2601" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-855758541">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id-49689954">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e2645" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e2647" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e2649" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e2651" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e2645" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e2647" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e2649" rowspan="1" style="text-align:left;vertical-align:top;">the basket id</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e2651" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id269724919">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e2694" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e2696" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e2698" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e2700" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e2694" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e2696" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">CustomerBasketsQuotaExceededException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e2698" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketIds (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e2700" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that marking this basket as an agent basket would exceed
             the open agent basket limit for the basket customer</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e2694" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e2696" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e2698" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e2700" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id1130145453">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e2746" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e2748" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e2746" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.agent.beforePUT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e2748" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePUT</strong>
      (basketId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before the request will be processed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketId - the basket id</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e2746" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.agent.afterPUT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e2748" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPUT</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after a put of a basket as an agent basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e2746" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.agent.modifyPUTResponse</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e2748" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPUTResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id641669136">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
POST /dw/shop/v23_2/baskets/123324d33edew2443/agent HTTP/1.1
Host: example.com
Authorization: Bearer xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx
Content-Type: application/json


# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Cache-Control: no-cache,no-store,must-revalidate
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
...
  "basket_id" : "bcRTDaOjgyscwaaadkrhhQHmrP",
  "agent_basket": true,
...
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id-2083429339"><h2 class="title sectiontitle">Get approaching discounts of a basket</h2>
      
      <p class="p"><!-- --></p>
Gets the approaching discounts of a basket
      <p class="p subheading1" id="id-1036384929__id-870927574">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>GET https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/approaching_discounts</code></pre>
      <p class="p subheading1" id="id-1036384929__id-1883201641">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-839867939">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e2929" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e2931" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e2929" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e2931" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e2929" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e2931" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id740291028">Response Document</p>
<p class="p"><a class="xref" href="../Documents/ApproachingDiscountResult.html#id288412775" shape="rect">ApproachingDiscountResult</a></p>
<p class="p subheading1" id="id-1036384929__id1234651007">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e2975" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e2977" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e2979" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e2981" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e2975" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e2977" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e2979" rowspan="1" style="text-align:left;vertical-align:top;">The id of the basket to be checked.</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e2981" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-350683402">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e3024" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e3026" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e3028" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e3030" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e3024" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e3026" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e3028" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e3030" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id-1590302770">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e3065" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e3067" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3065" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.approaching_discounts.beforeGET</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3067" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeGET</strong>
      (basketId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before the request will be processed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketId - the basket id</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e3065" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.approaching_discounts.modifyGETResponse</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e3067" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyGETResponse</strong>
      (approachingDiscountResultResponse : <a class="xref" href="../Documents/ApproachingDiscountResult.html" shape="rect">
          ApproachingDiscountResult
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">approachingDiscountResultResponse - approaching discount result response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id21260815">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
GET /dw/shop/v23_2/baskets/bczFTaOjgEqUkaaadkvHwbgrP5/approaching_discounts HTTP/1.1
Host: example.com
Authorization:Bearer eyJfdiI6IjXXXXXX.eyJfdiI6IjEiLCJleHAXXXXXXX.-d5wQW4c4O4wt-Zkl7_fiEiALW1XXXX 
Content-Type: application/json

# in case of success

RESPONSE:
HTTP/1.1 200 OK
Content-Length:124 
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_type" : "approaching_discount_result",
   "approaching_discounts" : [
      {
         "_type" : "approaching_discount",
         "condition_threshold" : 100.00,
         ...
         "type" : order
      },
      ...
   ]
}

# in case basket for given id not found

RESPONSE:
HTTP/1.1 404 Not Found
Content-Type:application/json;charset=UTF-8

{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "BasketNotFoundException",
      "message" : "No basket with id 'xxbcql1aOjgEsaaadkOtMbgrQq' found."
   }
}
</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id-1982259685"><h2 class="title sectiontitle">Set billing address of a basket</h2>
      
      <p class="p"><!-- --></p>
Sets the billing address of a basket.
      <p class="p subheading1" id="id-1036384929__id-1992807052">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>PUT https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/billing_address?use_as_shipping={Boolean}&amp;customer_address_id={String}</code></pre>
      <p class="p subheading1" id="id-1036384929__id-1884822303">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id609793363">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e3201" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e3203" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3201" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3203" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e3201" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e3203" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1829697306">Request Document</p>
<p class="p"><a class="xref" href="../Documents/OrderAddress.html#id677127267" shape="rect">OrderAddress</a></p>
<p class="p subheading1" id="id-1036384929__id1703977630">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id-1070488887">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e3256" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e3258" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e3260" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e3262" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e3256" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e3258" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e3260" rowspan="1" style="text-align:left;vertical-align:top;">The id of the basket to be modified.</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e3262" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id377010652">Query Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e3296" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e3298" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e3300" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e3302" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3296" rowspan="1" style="text-align:left;vertical-align:top;">customer_address_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3298" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3300" rowspan="1" style="text-align:left;vertical-align:top;">The id of the customer address to be set as billing address.
            Cannot be used together with an existing body.</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3302" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e3296" rowspan="1" style="text-align:left;vertical-align:top;">use_as_shipping</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e3298" rowspan="1" style="text-align:left;vertical-align:top;">Boolean</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e3300" rowspan="1" style="text-align:left;vertical-align:top;">The flag indicating whether the given address will also be
            used as shipping address for the default shipment.</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e3302" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id1173284972">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e3352" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e3354" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e3356" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e3358" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3352" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3354" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">CustomerAddressIdNotApplicableException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3356" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3358" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that both customer_address_id and address body was
             provided.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3352" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3354" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3356" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3358" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not
             match the verified customer represented by the JWT (not
             relevant when using OAuth).</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3352" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3354" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">EmptyBillingAddressException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3356" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3358" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the billing address was null and no customer_address_id was provided.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3352" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3354" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3356" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3358" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e3352" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e3354" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">AddressNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e3356" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">addressName (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e3358" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the address specified by customer_address_id is
             unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id811765144">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e3431" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e3433" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3431" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.billing_address.beforePUT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3433" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePUT</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, billingAddress : <a class="xref" href="../Documents/OrderAddress.html" shape="rect">
          OrderAddress
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before setting of
 the billing address to the basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">billingAddress - the billing address to be set to the basket</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3431" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.billing_address.afterPUT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3433" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPUT</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, billingAddress : <a class="xref" href="../Documents/OrderAddress.html" shape="rect">
          OrderAddress
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after setting of
 the billing address to the basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">billingAddress - the billing address that was set to the basket</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3431" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.billing_address.modifyPUTResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3433" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPUTResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, addressRequest : <a class="xref" href="../Documents/OrderAddress.html" shape="rect">
          OrderAddress
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">addressRequest - address request object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e3431" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e3433" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1545229189">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
PUT /dw/shop/v23_2/baskets/cdTwMiWbOhGJgaaadkIKbj5op9/billing_address HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json
{
  "first_name":"John",
  "last_name":"Smith",
  "city":"Boston",
  "country_code":"US",
  "c_strValue":"cTest"
}

# in case of success:

RESPONSE:
HTTP/1.1 200 OK

Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
...
   "billing_address" : 
   {
      "_type" : "order_address",
      "city" : "Boston",
      "country_code" : "US",
      "first_name" : "John",
      "full_name" : "John Smith",
      "last_name" : "Smith",
      "c_strValue" : "cTest"
   },
...
}

# with an address from a customer profile
REQUEST:
PUT /dw/shop/v23_2/baskets/cdTwMiWbOhGJgaaadkIKbj5op9/billing_address?customer_address_id=home HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json
{
}

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
...
   "billing_address" : 
   {
      "_type" : "order_address",
      "city" : "Boston",
      "country_code" : "US",
      "first_name" : "John",
      "full_name" : "John Smith",
      "last_name" : "Smith",
      "c_strValue" : "cTest"
   },
...
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id-1630158641"><h2 class="title sectiontitle">Update basket with coupon</h2>
      
      <p class="p"><!-- --></p>
Adds a coupon to an existing basket.
      <p class="p subheading1" id="id-1036384929__id-860742080">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>POST https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/coupons</code></pre>
      <p class="p subheading1" id="id-1036384929__id-1343975507">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-673673977">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e3701" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e3703" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3701" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3703" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e3701" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e3703" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1708770202">Request Document</p>
<p class="p"><a class="xref" href="../Documents/CouponItem.html#id-855111184" shape="rect">CouponItem</a></p>
<p class="p subheading1" id="id-1036384929__id-272679318">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id2091696533">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e3756" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e3758" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e3760" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e3762" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e3756" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e3758" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e3760" rowspan="1" style="text-align:left;vertical-align:top;">The id of the basket to be modified.</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e3762" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-1857309664">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e3805" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e3807" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e3809" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e3811" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3805" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3807" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3809" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3811" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not
             match the verified customer represented by the JWT, not
             relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3805" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3807" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">MissingCouponCodeException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3809" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3811" rowspan="1" style="text-align:left;vertical-align:top;">Thrown if the coupon number is not provided.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3805" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3807" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCouponCodeException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e3809" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">couponCode (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3811" rowspan="1" style="text-align:left;vertical-align:top;">Thrown if the coupon code specified is invalid.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e3805" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e3807" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e3809" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e3811" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is
             unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id1047457636">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e3875" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e3877" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3875" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.coupon.beforePOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3877" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePOST</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, couponItem : <a class="xref" href="../Documents/CouponItem.html" shape="rect">
          CouponItem
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before adding a coupon
 to a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket the coupon get added to</dd>
<dd class="dd pd ddexpand">couponItem - the coupon information</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3875" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.coupon.afterPOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3877" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPOST</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, couponItem : <a class="xref" href="../Documents/CouponItem.html" shape="rect">
          CouponItem
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after adding a coupon to
 a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket the coupon get added to</dd>
<dd class="dd pd ddexpand">couponItem - the coupon information</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e3875" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.coupon.modifyPOSTResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e3877" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPOSTResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, couponRequest : <a class="xref" href="../Documents/CouponItem.html" shape="rect">
          CouponItem
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">couponRequest - coupon request object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e3875" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e3877" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1485365447">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
POST /dw/shop/v23_2/baskets/bcRTDaOjgyscwaaadkrhhQHmrP/coupons HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json
{
 "code" : "the99coupon"
}

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Cache-Control: no-cache,no-store,must-revalidate
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
...
  "basket_id" : "bcRTDaOjgyscwaaadkrhhQHmrP",
   "coupon_items" : 
   [
      {
         "_type" : "coupon_item",
         "code" : "the99coupon",
         "status_code" : "applied",
         "valid" : true
      }
   ],
...
}

# in case of validation failure:

RESPONSE:
HTTP/1.1 400 BAD REQUEST
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: no-cache,no-store,must-revalidate
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "InvalidCouponItemException",
      "message" : "The coupon item with coupon code 'notExitingCoupon' is invalid."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id-1047194111"><h2 class="title sectiontitle">Remove coupon from basket</h2>
      
      <p class="p"><!-- --></p>
Removes a coupon from the basket.
      <p class="p subheading1" id="id-1036384929__id1682793422">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>DELETE https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/coupons/{coupon_item_id}</code></pre>
      <p class="p subheading1" id="id-1036384929__id-702128581">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id662299321">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e4144" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e4146" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e4144" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e4146" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e4144" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e4146" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1754090632">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id557195811">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e4190" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e4192" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e4194" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e4196" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e4190" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e4192" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e4194" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e4196" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e4190" rowspan="1" style="text-align:left;vertical-align:top;">coupon_item_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e4192" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e4194" rowspan="1" style="text-align:left;vertical-align:top;">the id of the coupon item to be removed</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e4196" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id795794386">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e4248" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e4250" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e4252" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e4254" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e4248" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e4250" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e4252" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e4254" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not
             match the verified customer represented by the JWT, not
             relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e4248" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e4250" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e4252" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e4254" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e4248" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e4250" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">CouponItemNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e4252" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">couponItemId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e4254" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the couponItemId URL parameter does not match any
             coupon item id in the basket.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id-1957487758">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e4309" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e4311" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e4309" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.coupon.beforeDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e4311" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeDELETE</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, couponItemID : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before removing a
 coupon from a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket the coupon get removed from</dd>
<dd class="dd pd ddexpand">couponItemID - the coupon information</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e4309" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.coupon.afterDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e4311" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterDELETE</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, couponItemID : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after removing a coupon
 from a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket the coupon get removed from</dd>
<dd class="dd pd ddexpand">couponItemID - the coupon information</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e4309" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.coupon.modifyDELETEResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e4311" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyDELETEResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, couponItemId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">couponItemId - coupon item id</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e4309" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e4311" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1167738603">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
DELETE /dw/shop/v23_2/baskets/cgHV79aadbwZIaaaekLlYxEcg7/coupons/cd5ON9aacbJAQaaadlc1RUojQv HTTP/1.1
Host: example.com
Authorization:Bearer 2afa983a-3ece-441d-a6f4-cdb4af1cff56 
x-dw-resource-state: 847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb

# in case of success:
 
RESPONSE:
HTTP/1.1 200 OK
Date:Thu, 19 Mar 2015 13:34:17 GMT
Server:Salesforce Commerce Cloud eCommerce Server/2.4.10 (Unix) OpenSSL/1.0.1f
Content-Length:2011
Keep-Alive:timeout=15, max=98
Connection:Keep-Alive
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "basket",
...
}

# in case of error:
RESPONSE:
HTTP/1.1 404 Not Found
Date:Thu, 19 Mar 2015 13:34:17 GMT
Content-Length:114
Keep-Alive:timeout=15, max=96
Connection:Keep-Alive
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "CouponItemNotFoundException",
      "message" : "The coupon item ID 'cd5ON9aacbJAQaaadlc1RUojQv' couldn't be found."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id1564670933"><h2 class="title sectiontitle">Update customer of basket</h2>
      
      <p class="p"><!-- --></p>
Sets customer information for an existing basket.
      <p class="p subheading1" id="id-1036384929__id-168182406">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>PUT https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/customer</code></pre>
      <p class="p subheading1" id="id-1036384929__id-1586101785">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id2557325">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e4570" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e4572" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e4570" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e4572" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e4570" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e4572" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1267977568">Request Document</p>
<p class="p"><a class="xref" href="../Documents/CustomerInfo.html#id776864573" shape="rect">CustomerInfo</a></p>
<p class="p subheading1" id="id-1036384929__id1937420324">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id1580030415">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e4625" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e4627" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e4629" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e4631" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e4625" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e4627" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e4629" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e4631" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id1460015782">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e4674" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e4676" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e4678" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e4680" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e4674" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e4676" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e4678" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e4680" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the verified
             customer represented by the JWT, not relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e4674" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e4676" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">CustomerBasketsQuotaExceededException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e4678" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketIds (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e4680" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer cannot be set to the basket because the
             max number of baskets per customer would be exceeded.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e4674" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e4676" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">CustomerNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e4678" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">customerId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e4680" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer with the given customer number is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e4674" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e4676" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e4678" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e4680" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id-2117317090">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e4746" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e4748" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e4746" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.customer.beforePUT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e4748" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePUT</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, customerInfo : <a class="xref" href="../Documents/CustomerInfo.html" shape="rect">
          CustomerInfo
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before setting of
 customer information for the basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">customerInfo - the customer information to be set to the basket</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e4746" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.customer.afterPUT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e4748" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPUT</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, customerInfo : <a class="xref" href="../Documents/CustomerInfo.html" shape="rect">
          CustomerInfo
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after setting of
 customer information for the basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">customerInfo - the customer information that were set to the basket</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e4746" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.customer.modifyPUTResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e4748" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPUTResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, customerRequest : <a class="xref" href="../Documents/CustomerInfo.html" shape="rect">
          CustomerInfo
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">customerRequest - customer request object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e4746" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e4748" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1831959999">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
PUT /dw/shop/v23_2/baskets/cdCxIiWbPdiKAaaadhKTtczLvk/customer HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json
{
  "customer_no":"customer0012",
  "email":"<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2355424f4a4763464e424a4f0d404c4e">[email&#160;protected]</a>"
}

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
...
   "customer_info" : 
   {
      "_type" : "customer_info",
      "customer_id" : "bc4ZGjva2LWAZVEvE6MvlbX6GD",
      "customer_no" : "customer0012",
      "email" : "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c4b2a5a8ada084a1a9a5ada8eaa7aba9">[email&#160;protected]</a>"
   },
...
}

# in case of validation failure:

RESPONSE:
HTTP/1.1 409 CONFLICT
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "CustomerNotFoundException",
      "message" : "No customer with ID 'customer0013' could be found."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id679113273"><h2 class="title sectiontitle">Add a gift certificate item to a basket</h2>
      
      <p class="p"><!-- --></p>
Adds a gift certificate item to an existing basket.
      <p class="p subheading1" id="id-1036384929__id-2127299434">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>POST https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/gift_certificate_items</code></pre>
      <p class="p subheading1" id="id-1036384929__id2030260995">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-1681031951">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e5015" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e5017" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5015" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5017" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e5015" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e5017" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id5398788">Request Document</p>
<p class="p"><a class="xref" href="../Documents/GiftCertificateItem.html#id798310021" shape="rect">GiftCertificateItem</a></p>
<p class="p subheading1" id="id-1036384929__id-1537585600">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id928370411">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e5070" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e5072" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e5074" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e5076" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e5070" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e5072" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e5074" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e5076" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id1715219978">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e5119" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e5121" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e5123" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e5125" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5119" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e5121" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidGiftCertificateItemAmountException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e5123" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">giftCertificateItemAmount (Decimal)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5125" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the gift certificate item amount is negative.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5119" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e5121" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e5123" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5125" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e5119" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e5121" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">ShipmentNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e5123" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e5125" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the shipment with the given shipment id is
             unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id1569151546">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e5182" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e5184" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5182" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.gift_certificate_item.beforePOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5184" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePOST</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, item : <a class="xref" href="../Documents/GiftCertificateItem.html" shape="rect">
          GiftCertificateItem
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before adding a gift certificate item to a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">item - the gift certificate item to add</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5182" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.gift_certificate_item.afterPOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5184" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPOST</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, item : <a class="xref" href="../Documents/GiftCertificateItem.html" shape="rect">
          GiftCertificateItem
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after adding a gift certificate item to a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">item - the gift certificate item to add</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5182" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.gift_certificate_item.modifyPOSTResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5184" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPOSTResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, certificateItemRequest : <a class="xref" href="../Documents/GiftCertificateItem.html" shape="rect">
          GiftCertificateItem
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">certificateItemRequest - certificateItem request object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e5182" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e5184" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id2087164195">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>#
# Example: Add a gift certificate item to a basket
#
REQUEST:
POST /dw/shop/v23_2/baskets/cdcM6iWbN5jyIaaadh5thrJrYj/gift_certificate_items HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json; charset=UTF-8

{
  "recipient_email" : "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="bed3dfcad6d7dfcdfed0d1d0dbc6d7cdcadbd0ca90dadb">[email&#160;protected]</a>", 
  "recipient_name" : "Mathias Doe", 
  "sender_name" : "John Doe", 
  "message" : "Present from your brother", 
  "amount" : 200.00 
}

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Cache-Control: max-age=0,no-cache,no-store,must-revalidate
Expires: Thu, 01-Jan-1970 00:00:00 GMT
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "basket",
...
   "gift_certificate_line_items" : 
   [
      
      {
         "_type" : "gift_certificate_item",
         "amount" : 200.00,
         "message" : "Present from your brother",
         "recipient_email" : "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="97fdf6f9f2d7f3f8f2b9f3f2">[email&#160;protected]</a>",
         "recipient_name" : "Jane Doe",
         "sender_name" : "John Doe",
         "shipment_id" : "beRyAiWcyEk4UaaadmbdFBKNcy"
      }
   ],
...
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id1877801007"><h2 class="title sectiontitle">Delete a gift certificate item from a basket</h2>
      
      <p class="p"><!-- --></p>
Deletes a gift certificate item from an existing basket.
      <p class="p subheading1" id="id-1036384929__id-379114784">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>DELETE https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/gift_certificate_items/{gift_certificate_item_id}</code></pre>
      <p class="p subheading1" id="id-1036384929__id469912653">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id1254841447">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e5451" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e5453" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5451" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5453" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e5451" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e5453" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1647201526">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id1746132533">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e5497" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e5499" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e5501" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e5503" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5497" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e5499" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e5501" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5503" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e5497" rowspan="1" style="text-align:left;vertical-align:top;">gift_certificate_item_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e5499" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e5501" rowspan="1" style="text-align:left;vertical-align:top;">the id of the gift certificate item to be removed</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e5503" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id1110696832">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e5555" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e5557" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e5559" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e5561" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5555" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e5557" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e5559" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5561" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e5555" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e5557" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">GiftCertificateItemNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e5559" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">giftCertificateItemId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e5561" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the gift certificate item with the given gift certificate item id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id-2076920828">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e5607" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e5609" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5607" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.gift_certificate_item.beforeDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5609" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeDELETE</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, giftCertificateItemId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before deleting a gift certificate item from a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">giftCertificateItemId - the id of the gift certificate item to be deleted</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5607" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.gift_certificate_item.afterDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5609" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterDELETE</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, giftCertificateItemId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after deleting a gift certificate item from a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">giftCertificateItemId - the id of the deleted gift certificate item</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e5607" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.gift_certificate_item.modifyDELETEResponse</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e5609" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyDELETEResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, giftCertificateItemId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">giftCertificateItemId - the id of the deleted gift certificate item</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1482641049">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>#
# Example: Remove a gift certificate item from a basket
#
REQUEST:
DELETE /dw/shop/v23_2/baskets/cdcM6iWbN5jyIaaadh5thrJrYj/gift_certificate_items/915a3d54e1c18caed233c46153 HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json; charset=UTF-8


# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_type" : "basket",
   "_resource_state" : "5086203b16875cc1d545a634cabb76d297c18e098a41bff3a4420913f10fabae",
...
   "gift_certificate_line_items" : 
   [
      
      {
         "_type" : "gift_certificate_item",
         "amount" : 300.00,
         "gift_certificate_item_id" : "12343d54e1c18caed233c46153",
         "message" : "Present from your brother",
         "recipient_email" : "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4e242f202b0e2a212b602a2b">[email&#160;protected]</a>", 
         "recipient_name" : "Jane Doe",
         "sender_name" : "John Doe",
         "shipment_id" : "beRyAiWcyEk4UaaadmbdFBKNcy"
      }
   ],
...
}

# in case of failure - basket for given ID is not found:

RESPONSE:
HTTP/1.1 404 Not Found
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "BasketNotFoundException",
      "message" : "No basket with ID 'cdcM6iWbN5jyIaaadh5thrJrYj' was found."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id-1739886164"><h2 class="title sectiontitle">Updates a gift certificate item of a basket</h2>
      
      <p class="p"><!-- --></p>
Updates a gift certificate item of an existing basket.
      <p class="p subheading1" id="id-1036384929__id-1283267517">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>PATCH https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/gift_certificate_items/{gift_certificate_item_id}</code></pre>
      <p class="p subheading1" id="id-1036384929__id-1794335696">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id201652004">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e5808" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e5810" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5808" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5810" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e5808" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e5810" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1083447927">Request Document</p>
<p class="p"><a class="xref" href="../Documents/GiftCertificateItem.html#id798310021" shape="rect">GiftCertificateItem</a></p>
<p class="p subheading1" id="id-1036384929__id1817166637">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id-837969128">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e5863" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e5865" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e5867" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e5869" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5863" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e5865" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e5867" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5869" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e5863" rowspan="1" style="text-align:left;vertical-align:top;">gift_certificate_item_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e5865" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e5867" rowspan="1" style="text-align:left;vertical-align:top;">the id of the gift certificate item to be updated</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e5869" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-763458755">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e5921" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e5923" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e5925" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e5927" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5921" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e5923" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidGiftCertificateItemAmountException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e5925" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">giftCertificateItemAmount (Decimal)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5927" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the gift certificate item amount is negative.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5921" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e5923" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e5925" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5927" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e5921" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e5923" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">GiftCertificateItemNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e5925" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">giftCertificateItemId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e5927" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the gift certificate item with the given gift certificate item id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id-2110894681">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e5984" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e5986" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5984" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.gift_certificate_item.beforePATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5986" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePATCH</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, giftCertificateItemId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>, item : <a class="xref" href="../Documents/GiftCertificateItem.html" shape="rect">
          GiftCertificateItem
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before updating a gift certificate item of a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">giftCertificateItemId - the id of the gift certificate item to be updated</dd>
<dd class="dd pd ddexpand">item - the new gift certificate item data</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e5984" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.gift_certificate_item.afterPATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e5986" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPATCH</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, giftCertificateItemId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>, item : <a class="xref" href="../Documents/GiftCertificateItem.html" shape="rect">
          GiftCertificateItem
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after updating a gift certificate item of a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">giftCertificateItemId - the id of the updated gift certificate item</dd>
<dd class="dd pd ddexpand">item - the new gift certificate item data</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e5984" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.gift_certificate_item.modifyPATCHResponse</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e5986" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPATCHResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, giftCertificateItemId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">giftCertificateItemId - the id of the updated gift certificate item</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-391514538">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>#
# Example: Update a gift certificate item of a basket
#
REQUEST:
PATCH /dw/shop/v23_2/baskets/cdcM6iWbN5jyIaaadh5thrJrYj/gift_certificate_items/915a3d54e1c18caed233c46153 HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json; charset=UTF-8

{
  "recipient_email" : "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="315c504559585042715f5e5f5449584245545f451f5554">[email&#160;protected]</a>", 
  "recipient_name" : "Mathias Doe", 
  "sender_name" : "John Doe", 
  "message" : "Present from your brother", 
  "amount" : 300.00 
}

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_type" : "basket",
   "_resource_state" : "5086203b16875cc1d545a634cabb76d297c18e098a41bff3a4420913f10fabae",
...
   "gift_certificate_line_items" : 
   [
      
      {
         "_type" : "gift_certificate_item",
         "amount" : 300.00,
         "gift_certificate_item_id" : "915a3d54e1c18caed233c46153",
         "message" : "Present from your brother",
         "recipient_email" : "<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4d272c23280d292228632928">[email&#160;protected]</a>", 
         "recipient_name" : "Jane Doe",
         "sender_name" : "John Doe",
         "shipment_id" : "beRyAiWcyEk4UaaadmbdFBKNcy"
      }
   ],
...
}

# in case of failure - example when the basket does not contain gift certificate item with the provided id:

RESPONSE:
HTTP/1.1 404 Not Found
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" : 
   {
      "arguments" : 
      {
         "giftCertificateItemId" : "915a3d54e1c18caed233c46153"
      },
      "type" : "GiftCertificateItemNotFoundException",
      "message" : "The gift certificate item with gift_certificate_item_id '915a3d54e1c18caed233c46153' was not found."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id-183324740"><h2 class="title sectiontitle">Add items to a basket</h2>
      
      <p class="p"><!-- --></p>
Adds new items to a basket. <p class="lines pdfonly"><!-- --></p>
 The added items are associated with the
 specified shipment. If no shipment id is specified, the added items are associated with the default shipment.
 <p class="lines pdfonly"><!-- --></p>
 Considered values from the request body, for each item are:
 <ul class="ul">
 <li class="li"><strong class="ph b">product_id</strong>: a valid product id. This is the id of the product to be added to the basket. If the
 product is already in the basket, the API either increments the quantity of the existing product line item or
 creates a new product line item, based on the site preference 'Add Product Behavior'. For option products and
 product bundles containing variation masters, the API creates a new product line item regardless of the site
 preference.</li>

 <li class="li"><strong class="ph b">shipment_id</strong>: a valid shipment id (optional). This is the id of the shipment in which the product item
 is created.</li>

 <li class="li"><strong class="ph b">quantity</strong>: a number between 0.01 and 999. This is the quantity of the product to order.</li>

 <li class="li"><strong class="ph b">inventory_id</strong>: a valid inventory id (optional). This is the id of the inventory from which the item is
 allocated.</li>

 <li class="li"><strong class="ph b">bonus_discount_line_item_id</strong>: a valid bonus discount line item id (optional). This is the id of the
 bonus discount line item for which the added product is a selected bonus product.</li>

 <li class="li"><strong class="ph b">option_items/option_value_id</strong>: a valid option value id. This is an option value for an option item of
 an option product. <p class="lines pdfonly"><!-- --></p>
 This is only possible if the product item is an option
 product. To set option values, you must specify a collection of option items in the <code class="ph codeph">option_items</code>
 property. These option items must contain <code class="ph codeph">option_id</code> and <code class="ph codeph">option_value_id</code>. Also,
 the values you specify must be valid for the option product that this product item represents. Otherwise, the
 server throws an <code class="ph codeph">InvalidProductOptionItemException</code> or an
 <code class="ph codeph">InvalidProductOptionValueItemException</code>.</li>

 <li class="li"><strong class="ph b">custom properties in the form c_&lt;CUSTOM_NAME&gt;</strong>: the custom property must correspond to a custom
 attribute (&lt;CUSTOM_NAME&gt;) defined for ProductLineItem. The value of this property must be valid for the
 type of custom attribute defined for ProductLineItem.</li>

 </ul>

      <p class="p subheading1" id="id-1036384929__id1771187251">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>POST https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/items</code></pre>
      <p class="p subheading1" id="id-1036384929__id-1588171744">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-1040295628">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e6264" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e6266" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6264" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6266" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e6264" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e6266" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1572681863">Request Document</p>
<p class="p"><a class="xref" href="../Documents/ProductItem.html#id1327995869" shape="rect">ProductItem</a></p>
<p class="p subheading1" id="id-1036384929__id-196450531">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id-683640056">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e6320" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e6322" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e6324" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e6326" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e6320" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e6322" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e6324" rowspan="1" style="text-align:left;vertical-align:top;">The id of the basket to be modified.</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e6326" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id1321401677">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e6368" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e6370" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e6372" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e6374" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6368" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6370" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6372" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6374" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the given product id is <code class="ph codeph">null</code> or invalid.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6368" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6370" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductItemException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6372" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">productId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6374" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the product with the given product id is unknown, offline or
             not assigned to site catalog or the given product item quantity is <code class="ph codeph">null</code> or invalid.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6368" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6370" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductItemQuantityException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6372" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6374" rowspan="1" style="text-align:left;vertical-align:top;">Indicates a null quantity value</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6368" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6370" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">ProductItemNotAvailableException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6372" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">productId (String)</p>
<p class="p">quantity (Decimal)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6374" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the requested product quantity is not available.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6368" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6370" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductTypeException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6372" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">productId (String)</p>
<p class="p">type (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6374" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the product cannot be added to the basket because of its type.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6368" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6370" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductOptionItemException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6372" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">productId (String)</p>
<p class="p">optionId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6374" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that an option with the specified option id is unknown.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6368" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6370" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductOptionValueItemException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6372" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">productId (String)</p>
<p class="p">optionValueId (String)</p>
<p class="p">optionId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6374" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that an option with the specified option value id is
             unknown.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6368" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6370" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketQuotaExceededException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6372" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6374" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the maximum allowed number, of products added to the basket,
             has been exceeded.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6368" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6370" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6372" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6374" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the verified
             customer represented by the JWT, not relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6368" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6370" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BonusDiscountLineItemNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6372" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">bonusDiscountLineItemId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6374" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the provided bonus discount line item id is not
             present in the current basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6368" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6370" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BonusProductQuantityException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6372" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">bonusDiscountLineItemId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6374" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the quantity of the product to be added will result in the
             number of selected bonus choice products to exceed the amount that the user is permitted to select.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6368" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6370" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidBonusProductException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6372" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">productId (String)</p>
<p class="p">bonusDiscountLineItemId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6374" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the selected bonus product is not an applicable product for
             the bonus discount line item provided.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6368" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6370" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6372" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6374" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e6368" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e6370" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">ShipmentNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e6372" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e6374" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket does not contain a shipment with the given shipment
             id.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id897083799">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e6564" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e6566" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6564" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.items.beforePOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6566" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePOST</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, items : <a class="xref" href="../Documents/ProductItem.html" shape="rect">
          ProductItem
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">items - productItems array of product items</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6564" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.items.afterPOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6566" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPOST</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, items : <a class="xref" href="../Documents/ProductItem.html" shape="rect">
          ProductItem
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">items - productItems array of product items</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6564" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.items.modifyPOSTResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6566" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPOSTResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, productItems : <a class="xref" href="../Documents/ProductItem.html" shape="rect">
          ProductItem
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">productItems - productItems array of product items</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e6564" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e6566" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1693345894">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
POST /dw/shop/v23_2/baskets/this/items HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json
[{
  "product_id" : "cup-white",
  "quantity" : 1.00,
  "c_anycustomproperty": "CustomPropertyValue"
}]

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Cache-Control: no-cache,no-store,must-revalidate
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
...
   "product_items" : [
      {
         "adjusted_tax" : 5.00,
         "base_price" : 16.49,
         "bonus_product_line_item" : false,
         "item_text" : "cup-white Product details...",
         "price" : 16.49,
         "price_after_item_discount" : 16.49,
         "price_after_order_discount" : 16.49,
         "product_id" : "cup-white",
         "product_name" : "cup-white Product Name",
         "quantity" : 1.0,
         "shipment_id" : "me",
         "tax" : 5.00,
         "tax_basis" : 16.49,
         "tax_class_id" : null,
         "tax_rate" : 0.05,
         "item_id" : "dedcaiWbNShRkaaadhKSo2jbZi",
         "c_anycustomproperty": "CustomPropertyValue"
      }
   ],
...
}

# in case of validation failure:

RESPONSE:
HTTP/1.1 400 BAD REQUEST
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: no-cache,no-store,must-revalidate
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "InvalidProductItemException",
      "message" : "Product 'cup-white' is unknown, offline or not assigned to the site catalog."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id3485570"><h2 class="title sectiontitle">Update an item of a basket</h2>
      
      <p class="p"><!-- --></p>
Updates an item in a basket. <p class="lines pdfonly"><!-- --></p>
 The
 following values in the request body are considered by the server:
 <ul class="ul">
 <li class="li"><code class="ph codeph">product_id</code>: a valid product id. The purpose of this
 value is to exchange a variation of a variation product.</li>

 <li class="li"><code class="ph codeph">shipment_id</code>: a valid shipment id. The purpose of
 this value is to move a product item to another shipment.</li>

 <li class="li"><code class="ph codeph">quantity</code>: a number between 0 and 999. The purpose of
 this value is to change quantity of the product item. If quantity is 0,
 the product item is removed.</li>

 <li class="li"><code class="ph codeph">option_items/option_value_id</code>: a valid option value
 id. The purpose of this value is to exchange an option value for an
 option item of an option product. <p class="lines pdfonly"><!-- --></p>

 This is only possible if the product item is an option product. To change
 option values a collection of option items to be changed need to be
 provided in property <code class="ph codeph">option_items</code>. Those
 <code class="ph codeph">option_items</code> need to contain <code class="ph codeph">option_id</code>
 and <code class="ph codeph">option_value_id</code>. The provided values must be valid
 for the option product that this product item represents. Otherwise
 <code class="ph codeph">InvalidProductOptionItemException</code> or
 <code class="ph codeph">InvalidProductOptionValueItemException</code> will be thrown.</li>

 <li class="li"><code class="ph codeph"><em class="ph i">custom properties</em> c_&lt;CUSTOM_NAME&gt;</code>: a
 value corresponding to the type defined for custom attribute
 &lt;CUSTOM_NAME&gt; of ProductLineItem. The purpose of this value is to
 add or change the value of a custom attribute defined for
 ProductLineItem.</li>

 </ul>

      <p class="p subheading1" id="id-1036384929__id759516845">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>PATCH https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/items/{item_id}</code></pre>
      <p class="p subheading1" id="id-1036384929__id962576794">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id51037818">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e6884" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e6886" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6884" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6886" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e6884" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e6886" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1922864051">Request Document</p>
<p class="p"><a class="xref" href="../Documents/ProductItem.html#id1327995869" shape="rect">ProductItem</a></p>
<p class="p subheading1" id="id-1036384929__id-1184191465">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id-1212041598">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e6940" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e6942" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e6944" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e6946" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6940" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6942" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6944" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e6946" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e6940" rowspan="1" style="text-align:left;vertical-align:top;">item_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e6942" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e6944" rowspan="1" style="text-align:left;vertical-align:top;">the it of the item to be updated</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e6946" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id433852563">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e6997" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e6999" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e7001" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e7003" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6997" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6999" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductItemIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e7001" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">productItemId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7003" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that no product item with given item id was found
             for the basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6997" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6999" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductItemException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e7001" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">productId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7003" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the product with the given product id in the
             request body is invalid.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6997" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6999" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductItemQuantityException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e7001" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7003" rowspan="1" style="text-align:left;vertical-align:top;">Indicates a null quantity value</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6997" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6999" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductOptionItemException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e7001" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">optionId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7003" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that an option with the specified option id is unknown.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6997" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6999" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidProductOptionValueItemException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e7001" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">optionValueId (String)</p>
<p class="p">optionId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7003" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that an option with the specified option value id is unknown.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6997" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6999" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidShipmentIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e7001" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7003" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the given shipment id is invalid.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6997" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6999" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e7001" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7003" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not
             match the verified customer represented by the JWT, not
             relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e6997" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e6999" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e7001" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7003" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e6997" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e6999" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">ShipmentNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e7001" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e7003" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that a shipment with it's given id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id-1977205871">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e7124" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e7126" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e7124" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.item.beforePATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7126" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePATCH</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, item : <a class="xref" href="../Documents/ProductItem.html" shape="rect">
          ProductItem
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before updating of the
 basket's item.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">item - the product item delta containing the desired changes to the
            product item</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e7124" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.item.afterPATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7126" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPATCH</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, item : <a class="xref" href="../Documents/ProductItem.html" shape="rect">
          ProductItem
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after updating of the
 basket's item.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">item - the product item delta containing the desired changes to the
            product item</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e7124" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.item.modifyPATCHResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7126" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPATCHResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, productItemId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">productItemId - productItemId request object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e7124" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e7126" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id805796780">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>#
# Example: Update option value
#
REQUEST:
PATCH /dw/shop/v23_2/baskets/cd6HwiWbLaZuUaaadgtglhMTrG/items/cdheYiWbLasNkaaadgwMthMTrG HTTP/1.1
Host: example.com
Authorization: Bearer a5b6eb0d-8312-41a3-88f3-2c53c4507367
{
  "_resource_state" : "847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb",
  "product_id": "IPad2",
  "quantity": 1,
  "option_items": [
    {
      "option_id": "Warranty",
      "option_value_id": "oneYear"
    }
  ]
}

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Cache-Control: max-age=0,no-cache,no-store,must-revalidate
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
...
   "product_items" : [
      {
         "adjusted_price" : 20.00,
         "adjusted_tax" : 1.00,
         "base_price" : 20.00,
         "bonus_product_line_item" : false,
         "item_text" : "IPad 2",
         "option_items" : [
            {
               "adjusted_tax" : 1.00,
               "base_price" : 20.00,
               "item_text" : "Warranty One Year",
               "option_id" : "Warranty",
               "option_value_id" : "oneYear",
               "price" : 20.00,
               "quantity" : 1.0,
               "tax" : 1.00,
               "tax_basis" : 20.00,
               "tax_class_id" : "DefaultTaxClass",
               "tax_rate" : 0.05
            }
         ],
         "price" : 20.00,
         "product_id" : "IPad2",
         "product_name" : "IPad 2",
         "quantity" : 1.0,
         "shipment_id" : "me",
         "tax" : 1.00,
         "tax_basis" : 20.00,
         "tax_class_id" : "DefaultTaxClass",
         "tax_rate" : 0.05,
         "item_id" : "cdheYiWbLasNkaaadgwMthMTrG"
      }
   ],
   "product_sub_total" : 40.00,
   "product_total" : 40.00,
   ...
}

#
# Example Response: Update option value, invalid option id
#

RESPONSE:
HTTP/1.1 400 BAD REQUEST
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: max-age=0,no-cache,no-store,must-revalidate
Content-Length: 47
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "InvalidOptionItemException",
      "message" : "Product option 'Insurance' is not supported."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id1864517317"><h2 class="title sectiontitle">Remove product item from basket</h2>
      
      <p class="p"><!-- --></p>
Removes a product item from the basket.
      <p class="p subheading1" id="id-1036384929__id-976532342">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>DELETE https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/items/{item_id}</code></pre>
      <p class="p subheading1" id="id-1036384929__id13207799">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-1976537987">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e7391" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e7393" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e7391" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7393" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e7391" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e7393" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-274947276">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id357617887">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e7437" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e7439" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e7441" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e7443" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e7437" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e7439" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e7441" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7443" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e7437" rowspan="1" style="text-align:left;vertical-align:top;">item_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e7439" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e7441" rowspan="1" style="text-align:left;vertical-align:top;">the id of the product item to be removed</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e7443" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id1788701078">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e7495" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e7497" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e7499" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e7501" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e7495" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e7497" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e7499" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7501" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the verified
             customer represented by the JWT, not relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e7495" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e7497" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e7499" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7501" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e7495" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e7497" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">ProductItemNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e7499" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">itemId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e7501" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the product item with the given product item id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id-1904064210">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e7556" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e7558" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e7556" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.item.beforeDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7558" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeDELETE</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, productItemId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before a basket item is
 removed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">productItemId - the id of the product item to be removed</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e7556" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.item.afterDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7558" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterDELETE</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, productItemId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after a basket item is
 removed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">productItemId - the id of the removed product item</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e7556" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.item.modifyDELETEResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7558" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyDELETEResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, productItemId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">productItemId - productItemId request object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e7556" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e7558" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-2134322001">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
DELETE /dw/shop/v23_2/baskets/ceK4aiWbN132MaaadkYERkclwC/items/cerZoiWbN1K2Yaaadk6URkclwC HTTP/1.1
Host: example.com
Authorization: Bearer cd669706-3638-4dd1-a8b2-310ab900ca53
Content-Type: application/json
x-dw-resource-state: 847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "basket",
...
   "product_items" : 
   [
      {
         "_type" : "product_item",
         "adjusted_tax" : 5.00,
         "base_price" : 16.49,
         "bonus_product_line_item" : false,
         "item_text" : "Simple Product",
         "price" : 16.49,
         "price_after_item_discount" : 16.49,
         "price_after_order_discount" : 16.49,
         "product_id" : "SimpleProduct",
         "product_name" : "Simple Product",
         "quantity" : 1.00,
         "shipment_id" : "me",
         "tax" : 5.00,
         "tax_basis" : 16.49,
         "tax_class_id" : null,
         "tax_rate" : 0.05,
         "item_id" : "ce0dwiWbN132QaaadkYERkclwC"
      }
   ],
...
}

# in case of validation failure - example response in case of registered customer scenario when the basket's customer ID does not match the authenticated customer id:

RESPONSE:
HTTP/1.1 400 BAD REQUEST
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "InvalidCustomerException",
      "message" : "Invalid customer."
   }
}

# validation failure in case of an unknown product item id:

RESPONSE:
HTTP/1.1 404 Not Found
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" :
   {
      "type" : "ProductItemNotFoundException",
      "message" : "The product item with ID '123' couldn't be found."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id-44357413"><h2 class="title sectiontitle">Add a note to a basket</h2>
      
      <p class="p"><!-- --></p>
Adds a note to an existing basket.
      <p class="p subheading1" id="id-1036384929__id1398352564">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>POST https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/notes</code></pre>
      <p class="p subheading1" id="id-1036384929__id982008353">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id1125183507">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e7816" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e7818" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e7816" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7818" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT. A valid user is required.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e7816" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e7818" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-461007962">Request Document</p>
<p class="p"><a class="xref" href="../Documents/Note.html#id719330743" shape="rect">Note</a></p>
<p class="p subheading1" id="id-1036384929__id1183674334">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id2021703689">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e7871" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e7873" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e7875" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e7877" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e7871" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e7873" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e7875" rowspan="1" style="text-align:left;vertical-align:top;">The id of the basket to be modified.</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e7877" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id988668716">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e7920" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e7922" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e7924" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e7926" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e7920" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e7922" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e7924" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e7926" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id274201304">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e7961" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e7963" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e7961" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.note.beforePOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7963" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePOST</strong>
      (basketId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>, note : <a class="xref" href="../Documents/Note.html" shape="rect">
          Note
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before a note is added.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketId - the basket</dd>
<dd class="dd pd ddexpand">note - the note to be addded</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e7961" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.note.afterPOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7963" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPOST</strong>
      (basketId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>, note : <a class="xref" href="../Documents/Note.html" shape="rect">
          Note
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after a note is added.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket</dd>
<dd class="dd pd ddexpand">note - the note to be added</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e7961" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.note.modifyPOSTResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e7963" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPOSTResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, noteRequest : <a class="xref" href="../Documents/Note.html" shape="rect">
          Note
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">noteRequest - note request object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e7961" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e7963" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1360612933">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>#
# Example: Add a note to a basket
#
REQUEST:
POST /dw/shop/v23_2/baskets/cdcM6iWbN5jyIaaadh5thrJrYj/notes HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json; charset=UTF-8
{
  "subject" : "this is an example subject",
  "text" : "This is a note because the customer was not very happy."
}

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Cache-Control: max-age=0,no-cache,no-store,must-revalidate
Expires: Thu, 01-Jan-1970 00:00:00 GMT
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "basket",
...
   "notes" : { 
       "link" : "https://example.com/dw/shop/v23_2/baskets/cdcM6iWbN5jyIaaadh5thrJrYj/notes"
    }
...
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id-1114665359"><h2 class="title sectiontitle">Get notes from a basket</h2>
      
      <p class="p"><!-- --></p>
Retrieves notes for a basket.
      <p class="p subheading1" id="id-1036384929__id1691538782">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>GET https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/notes</code></pre>
      <p class="p subheading1" id="id-1036384929__id1282967499">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-809445591">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e8230" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e8232" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e8230" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e8232" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT. A valid user is required.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e8230" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e8232" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id814360840">Response Document</p>
<p class="p"><a class="xref" href="../Documents/NotesResult.html#id-859718719" shape="rect">NotesResult</a></p>
<p class="p subheading1" id="id-1036384929__id-2117223501">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e8276" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e8278" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e8280" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e8282" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e8276" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e8278" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e8280" rowspan="1" style="text-align:left;vertical-align:top;">The id of the basket for which you want to retrieve the notes.</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e8282" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-664190910">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e8325" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e8327" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e8329" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e8331" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e8325" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e8327" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e8329" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e8331" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id488888578">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e8366" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e8368" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e8366" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.notes.beforeGET</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e8368" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeGET</strong>
      (basketId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before the request will be processed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketId - the basket id the notes result retrieved for.</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e8366" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.notes.modifyGETResponse_v2</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e8368" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyGETResponse_v2</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, notesResponse : <a class="xref" href="../Documents/NotesResult.html" shape="rect">
          NotesResult
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket the notes result retrieved for.</dd>
<dd class="dd pd ddexpand">notesResponse - notes response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-292246693">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
GET /dw/shop/v23_2/baskets/cdcM6iWbN5jyIaaadh5thrJrYj/notes HTTP/1.1
Host: example.com
 
RESPONSE:
HTTP/1.1 200 OK
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: max-age=0,no-cache,no-store,must-revalidate
Content-Length: 158
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "notes_result",
   "notes" : 
   [
      {
         "subject" : "Unhappy customer",
         "text" : "The customer was not very happy due to a delay."
      },
      {
         "subject" : "Happy customer",
         "text" : "The customer is already happy!"
      }
   ]
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id-950000731"><h2 class="title sectiontitle">Remove a note from a basket</h2>
      
      <p class="p"><!-- --></p>
Removes a basket note.
      <p class="p subheading1" id="id-1036384929__id-1932147798">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>DELETE https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/notes/{note_id}</code></pre>
      <p class="p subheading1" id="id-1036384929__id-1048350697">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id1660567901">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e8508" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e8510" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e8508" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e8510" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT. A valid user is required.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e8508" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e8510" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-688381356">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id1438750719">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e8554" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e8556" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e8558" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e8560" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e8554" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e8556" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e8558" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e8560" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e8554" rowspan="1" style="text-align:left;vertical-align:top;">note_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e8556" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e8558" rowspan="1" style="text-align:left;vertical-align:top;">the id of the note to be removed</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e8560" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id91889270">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e8612" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e8614" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e8616" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e8618" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e8612" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e8614" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e8616" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e8618" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id2092587086">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e8653" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e8655" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e8653" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.note.beforeDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e8655" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeDELETE</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, note : <a class="xref" href="../../../../Documents/api/class_dw_object_Note.html" shape="rect" target="_blank">
          Note
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before a note is deleted.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket</dd>
<dd class="dd pd ddexpand">note - the note to be removed</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e8653" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.note.afterDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e8655" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterDELETE</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, note : <a class="xref" href="../../../../Documents/api/class_dw_object_Note.html" shape="rect" target="_blank">
          Note
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after a note is deleted.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket</dd>
<dd class="dd pd ddexpand">note - the note to be removed</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e8653" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.note.modifyDELETEResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e8655" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyDELETEResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, noteId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">noteId - deleted note id</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e8653" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e8655" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id463833487">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
DELETE /dw/shop/v23_2/baskets/00000029/notes/cdXTraOu6bXT6aaadll5tOJvce HTTP/1.1
Host: example.com
Authorization:Bearer 80a68fc6-945c-49e2-bfd6-abc9994de307
x-dw-resource-state: 847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb

# in case of success

RESPONSE:
HTTP/1.1 200 OK
Content-Length:124 
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "basket",
...
   "notes" : 
   {
      "_type" : "simple_link",
      "link" : "https://example.com/dw/shop/v23_2/baskets/bc0KwiWexX0ZQaaadqRTwMZFga/notes"
   },
...
}


# in case of validation failure - example response when the note to be deleted can not be found:

RESPONSE:
HTTP/1.1 404 Not Found
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "NoteNotFoundException",
      "message" : "The note 'NonExisting' could not be found."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id468168297"><h2 class="title sectiontitle">Add payment instrument to basket</h2>
      
      <p class="p"><!-- --></p>
Adds a payment instrument to a basket.
 <p class="p">
 Payment instruments are usually authorized after order creation, for example in a custom hook. The default
 payment authorization process executes an authorization when a payment instrument is added to an order or
 updated. See <code class="ph codeph">POST /orders/{order_no}/payment_instruments</code> and <code class="ph codeph">PATCH
 /orders/{order_no}/payment_instruments/{payment_instrument_id}</code>. NOTE: If CREDIT_CARD is selected as the
 payment_method_id, it is mandatory to provide the property card_type.
 </p>

      <p class="p subheading1" id="id-1036384929__id1443041894">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>POST https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/payment_instruments</code></pre>
      <p class="p subheading1" id="id-1036384929__id-2118975277">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-762993375">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e8922" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e8924" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e8922" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e8924" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e8922" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e8924" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1772174644">Request Document</p>
<p class="p"><a class="xref" href="../Documents/BasketPaymentInstrumentRequest.html#id1963833345" shape="rect">BasketPaymentInstrumentRequest</a></p>
<p class="p subheading1" id="id-1036384929__id1692858384">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id-677204805">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e8978" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e8980" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e8982" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e8984" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e8978" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e8980" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e8982" rowspan="1" style="text-align:left;vertical-align:top;">the basket id</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e8984" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id888636986">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e9026" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e9028" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e9030" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e9032" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9026" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9028" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidPaymentMethodIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9030" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">paymentMethodId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9032" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the provided payment method is invalid or not applicable.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9026" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9028" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9030" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9032" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the verified
             customer represented by the JWT, not relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9026" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9028" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9030" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9032" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e9026" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e9028" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">PaymentInstrumentNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e9030" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">paymentInstrumentId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e9032" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the payment instrument with the given customer payment
             instrument id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id2014407690">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e9098" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e9100" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9098" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.payment_instrument.beforePOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9100" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePOST</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, paymentInstrument : <a class="xref" href="../Documents/BasketPaymentInstrumentRequest.html" shape="rect">
          BasketPaymentInstrumentRequest
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before payment
 instrument adding to a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">paymentInstrument - the payment instrument to be added to the basket</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9098" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.payment_instrument.afterPOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9100" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPOST</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, paymentInstrument : <a class="xref" href="../Documents/BasketPaymentInstrumentRequest.html" shape="rect">
          BasketPaymentInstrumentRequest
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after payment
 instrument adding to a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">paymentInstrument - the payment instrument added to the basket</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9098" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.payment_instrument.modifyPOSTResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9100" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPOSTResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, paymentInstrumentRequest : <a class="xref" href="../Documents/BasketPaymentInstrumentRequest.html" shape="rect">
          BasketPaymentInstrumentRequest
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">paymentInstrumentRequest - payment instrument request object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e9098" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e9100" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1260581203">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
POST /dw/shop/v23_2/baskets/cgUZoiWbN19xdaaaekBrRkclwC/payment_instruments HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json
{
  "amount" : 1.0,
  "payment_card" : {
                     "number":"411111111111111",
                     "security_code":"121",
                     "holder":"John Doe",
                     "card_type":"Visa",
                     "expiration_month":1,
                     "expiration_year":2021
                    },
  "payment_method_id" : "CREDIT_CARD",
  "c_strValue":"any custom value"
}


# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Cache-Control: no-cache,no-store,must-revalidate
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "basket",
...
   "payment_instruments" : 
   [
      
      {
         "_type" : "order_payment_instrument",
         "amount" : 1.00,
         "payment_card" : 
         {
            "_type" : "payment_card",
            "card_type" : "Visa",
            "credit_card_expired" : false,
            "expiration_month" : 1,
            "expiration_year" : 2021,
            "holder" : "John Doe",
            "masked_number" : "***********1111",
            "number_last_digits" : "1111"
         },
         "payment_method_id" : "CREDIT_CARD",
         "payment_instrument_id" : "ceDUYiWbN1IkkaaadkYHRkclwC",
         "c_strValue" : "any custom value"
      }
   ],
...
}


# in case of validation failure:

RESPONSE:
HTTP/1.1 400 BAD REQUEST
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: no-cache,no-store,must-revalidate
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "InvalidPaymentMethodIdException",
      "message" : "The payment method with ID 'InvalidPaymentMethodId' cannot be applied."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id969914594"><h2 class="title sectiontitle">Updates payment instrument of basket</h2>
      
      <p class="p"><!-- --></p>
Updates a payment instrument of a basket.
 <p class="p">
 Payment instruments are usually authorized after order creation, for example in a custom hook. The default
 payment authorization process executes an authorization when a payment instrument is added to an order or
 updated. See <code class="ph codeph">POST /orders/{order_no}/payment_instruments</code> and <code class="ph codeph">PATCH
 /orders/{order_no}/payment_instruments/{payment_instrument_id}</code>
 </p>

      <p class="p subheading1" id="id-1036384929__id-1814181555">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>PATCH https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/payment_instruments/{payment_instrument_id}</code></pre>
      <p class="p subheading1" id="id-1036384929__id1408887866">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-2058786854">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e9378" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e9380" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9378" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9380" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e9378" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e9380" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id2055157165">Request Document</p>
<p class="p"><a class="xref" href="../Documents/BasketPaymentInstrumentRequest.html#id1963833345" shape="rect">BasketPaymentInstrumentRequest</a></p>
<p class="p subheading1" id="id-1036384929__id1875381943">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id2102870306">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e9434" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e9436" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e9438" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e9440" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9434" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9436" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9438" rowspan="1" style="text-align:left;vertical-align:top;">the basket id</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9440" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e9434" rowspan="1" style="text-align:left;vertical-align:top;">payment_instrument_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e9436" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e9438" rowspan="1" style="text-align:left;vertical-align:top;">the id of the payment instrument to be updated</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e9440" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id1140986355">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e9491" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e9493" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e9495" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e9497" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9491" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9493" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidPaymentMethodIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9495" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">paymentMethodId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9497" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the provided payment method is invalid or not applicable.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9491" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9493" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">PaymentInstrumentPermanentlyMaskedException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9495" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">paymentInstrumentId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9497" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket payment instrument with the given
             id already is permanently masked. Please see
             <code class="ph codeph">dw.order.PaymentInstrument.isPermanentlyMasked()</code> for detailed information.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9491" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9493" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9495" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9497" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the verified
             customer represented by the JWT, not relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9491" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9493" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9495" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9497" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e9491" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e9493" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">PaymentInstrumentNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e9495" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">paymentInstrumentId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e9497" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the payment instrument with the given payment
             instrument number is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id-1629622735">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e9577" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e9579" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9577" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.payment_instrument.beforePATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9579" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePATCH</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, paymentInstrument : <a class="xref" href="../../../../Documents/api/class_dw_order_OrderPaymentInstrument.html" shape="rect" target="_blank">
          OrderPaymentInstrument
        </a>, newPaymentInstrument : <a class="xref" href="../Documents/BasketPaymentInstrumentRequest.html" shape="rect">
          BasketPaymentInstrumentRequest
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before
 updating a payment instrument of a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">paymentInstrument - the payment instrument to be updated</dd>
<dd class="dd pd ddexpand">newPaymentInstrument - the new payment instrument data</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9577" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.payment_instrument.afterPATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9579" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPATCH</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, paymentInstrument : <a class="xref" href="../../../../Documents/api/class_dw_order_OrderPaymentInstrument.html" shape="rect" target="_blank">
          OrderPaymentInstrument
        </a>, paymentInstrumentRequest : <a class="xref" href="../Documents/BasketPaymentInstrumentRequest.html" shape="rect">
          BasketPaymentInstrumentRequest
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after
 updating a payment instrument of a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">paymentInstrument - the updated payment instrument</dd>
<dd class="dd pd ddexpand">paymentInstrumentRequest - the new payment instrument data</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9577" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.payment_instrument.modifyPATCHResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9579" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPATCHResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, paymentInstrumentId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">paymentInstrumentRequest - payment instrument id</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e9577" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e9579" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1512930572">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
PATCH /dw/shop/v23_2/baskets/cg2N2iWbN1ApAaaaekYdekclwC/payment_instruments/cgqoaiWbN1fhsaaaek6dekclwC HTTP/1.1
Host: example.com
Authorization: Bearer cd669706-3638-4dd1-a8b2-310ab900ca53
Content-Type: application/json
{
  "_resource_state" : "847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb",
  "amount" : 2.0,
  "payment_card" : {
                     "number":"411111111111111",
                     "security_code":"112",
                     "holder":"John Doe",
                     "card_type":"Visa",
                     "expiration_month":2,
                     "expiration_year":2022
                    },
  "payment_method_id" : "CREDIT_CARD"
}

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "basket",
...
   "payment_instruments" : 
   [
      
      {
         "_type" : "order_payment_instrument",
         "amount" : 2.00,
         "payment_card" : 
         {
            "_type" : "payment_card",
            "card_type" : "Visa",
            "credit_card_expired" : false,
            "expiration_month" : 2,
            "expiration_year" : 2022,
            "holder" : "John Doe",
            "masked_number" : "***********1111",
            "number_last_digits" : "1111"
         },
         "payment_method_id" : "CREDIT_CARD",
         "payment_instrument_id" : "cgqoaiWbN1fhsaaaek6dekclwC"
      }
   ],
...
}

# in case of validation failure:

RESPONSE:
HTTP/1.1 400 BAD REQUEST
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "PaymentInstrumentPermanentlyMaskedException",
      "message" : "The payment instrument with ID 'ceqRMiWbN1my2aaadkgYlkclwC' already permanently masked."
   }
}
</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id816651685"><h2 class="title sectiontitle">Removes a payment instrument from a basket</h2>
      
      <p class="p"><!-- --></p>
Removes a payment instrument of a basket.
      <p class="p subheading1" id="id-1036384929__id-2119267926">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>DELETE https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/payment_instruments/{payment_instrument_id}</code></pre>
      <p class="p subheading1" id="id-1036384929__id1888040471">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-586564771">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e9856" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e9858" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9856" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9858" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e9856" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e9858" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id637429844">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id497114623">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e9902" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e9904" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e9906" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e9908" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9902" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9904" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9906" rowspan="1" style="text-align:left;vertical-align:top;">the basket id</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9908" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e9902" rowspan="1" style="text-align:left;vertical-align:top;">payment_instrument_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e9904" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e9906" rowspan="1" style="text-align:left;vertical-align:top;">the id of the payment instrument to be removed</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e9908" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id463706230">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e9960" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e9962" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e9964" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e9966" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9960" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9962" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9964" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9966" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the verified
             customer represented by the JWT, not relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e9960" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9962" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e9964" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e9966" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e9960" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e9962" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">PaymentInstrumentNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e9964" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">paymentInstrumentId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e9966" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the payment instrument with the given payment
             instrument number is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id634625614">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e10021" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e10023" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10021" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.payment_instrument.beforeDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10023" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeDELETE</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, delete : <a class="xref" href="../../../../Documents/api/class_dw_order_OrderPaymentInstrument.html" shape="rect" target="_blank">
          OrderPaymentInstrument
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">It is called before the <em class="ph i">order payment instrument</em> is removed from the basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket to remove the payment instrument from</dd>
<dd class="dd pd ddexpand">delete - the order payment instrument document.</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10021" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.payment_instrument.afterDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10023" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterDELETE</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">It is called after the <em class="ph i">order payment instrument</em> is removed from the basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket the payment instrument was removed from</dd>
<dd class="dd pd ddexpand">paymentInstrument - the payment instrument to be deleted</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10021" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.payment_instrument.modifyDELETEResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10023" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyDELETEResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, paymentInstrumentId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">paymentInstrumentRequest - payment instrument id</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e10021" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e10023" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id835650447">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
DELETE /dw/shop/v23_2/baskets/cg2N2iWbN1ApAaaaekYdekclwC/payment_instruments/cgqoaiWbN1fhsaaaek6dekclwC HTTP/1.1
Host: example.com
Authorization: Bearer cd669706-3638-4dd1-a8b2-310ab900ca53
Content-Type: application/json
x-dw-resource-state: 847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "basket",
...
   "payment_instruments" : 
   [
      
      {
        ...
      }
   ],
...
}

# validation failure in case of an unknown payment instrument id:

RESPONSE:
HTTP/1.1 404 Not Found
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" :
   {
      "type" : "PaymentInstrumentNotFoundException",
      "message" : "The payment instrument with payment_instrument_id '123' couldn't be found."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id-1955917319"><h2 class="title sectiontitle">Get applicable payment methods for basket</h2>
      
      <p class="p"><!-- --></p>
Gets applicable payment methods for an existing basket considering the open payment amount only.
      <p class="p subheading1" id="id-1036384929__id1088570582">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>GET https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/payment_methods</code></pre>
      <p class="p subheading1" id="id-1036384929__id-1412203709">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-968127311">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e10283" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e10285" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10283" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10285" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e10283" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e10285" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-2008734080">Response Document</p>
<p class="p"><a class="xref" href="../Documents/PaymentMethodResult.html#id-710904517" shape="rect">PaymentMethodResult</a></p>
<p class="p subheading1" id="id-1036384929__id1553577771">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e10329" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e10331" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e10333" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e10335" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e10329" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e10331" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e10333" rowspan="1" style="text-align:left;vertical-align:top;">the basket id</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e10335" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-2136605238">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e10378" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e10380" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e10382" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e10384" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10378" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e10380" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e10382" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10384" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the
                verified customer represented by the JWT, not relevant
                when using OAuth.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e10378" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e10380" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e10382" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e10384" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is
                unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id1730695802">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e10428" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e10430" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10428" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.payment_methods.beforeGET</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10430" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeGET</strong>
      (basketId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before the request will be processed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketId - the basket id</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10428" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.payment_methods.afterGET</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10430" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterGET</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, paymentMethods : <a class="xref" href="../Documents/PaymentMethodResult.html" shape="rect">
          PaymentMethodResult
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Called before returning the list of available payment methods to the customer. Allowing modifications of the result.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket</dd>
<dd class="dd pd ddexpand">paymentMethods - the available payment methods</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e10428" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.payment_methods.modifyGETResponse_v2</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e10430" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyGETResponse_v2</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, paymentMethodResultResponse : <a class="xref" href="../Documents/PaymentMethodResult.html" shape="rect">
          PaymentMethodResult
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket the payment method result retrieved for.</dd>
<dd class="dd pd ddexpand">paymentMethodResultResponse - paymentMethodResult response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1764661021">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
GET /dw/shop/v23_2/baskets/cdcM6iWbN5jyIaaadh5thrJrYj/payment_methods HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19

Content-Type: application/json

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Cache-Control: max-age=0,no-cache,no-store,must-revalidate
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_type" : "payment_method_result",
   "applicable_payment_methods" : 
   [
      {
         "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
         "_type" : "payment_method",
         "id" : "BANK_TRANSFER",
         "name" : "Bank Transfer"
      },
      
      {
         "_resource_state" : "847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb",
         "_type" : "payment_method",
         "cards" : 
         [
            
            {
               "_type" : "payment_card_spec",
               "card_type" : "Visa",
               "checksum_verification_enabled" : true,
               "id" : "CREDIT_CARD.Visa",
               "name" : "Visa",
               "number_lengths" : 
               [
                  "13",
                  "16"
               ],
               "number_prefixes" : 
               [
                  "4"
               ],
               "security_code_length" : 3
            },
            
            {
               "_type" : "payment_card_spec",
               "card_type" : "Master",
               "checksum_verification_enabled" : true,
               "id" : "CREDIT_CARD.Master",
               "name" : "Mastercard",
               "number_lengths" : 
               [
                  "16"
               ],
               "number_prefixes" : 
               [
                  "2221-2720",
                  "51-55"
               ],
               "security_code_length" : 3
            },
            
            {
               "_type" : "payment_card_spec",
               "card_type" : "Amex",
               "checksum_verification_enabled" : true,
               "id" : "CREDIT_CARD.Amex",
               "name" : "American Express",
               "number_lengths" : 
               [
                  "15"
               ],
               "number_prefixes" : 
               [
                  "34",
                  "37"
               ],
               "security_code_length" : 4
            }
         ],
         "id" : "CREDIT_CARD",
         "name" : "Credit Card",
         "c_somestring" : "PaymentMethod String Value"
      },
      {
         "_resource_state" : 9cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
         "_type" : "payment_method",
         "description" : "A conditional payment method on customer group 'Unregistered'.",
         "id" : "OCAPI_Payment_Unregistered",
         "image" : "https://example.com/on/demandware.static/Sites-SiteGenesis-Site/Sites/default/v1426675691129/office.jpg",
         "name" : "OCAPI Payment (Unregistered)"
      },
      {
         "_resource_state" : "cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
         "_type" : "payment_method",
         "description" : "A conditional payment method on country 'DE'.",
         "id" : "OCAPI_Payment_DE",
         "image" : "https://example.com/on/demandware.static/Sites-SiteGenesis-Site/Sites/default/v1426675691129/office.jpg",
         "name" : "OCAPI Payment (DE)"
      },
      {
         "_resource_state" : "41470b3046aeec31f07757991b792d722e10079926f7a289fb",
         "_type" : "payment_method",
         "description" : "A simple payment method without any conditions.",
         "id" : "OCAPI_Payment_Simple",
         "image" : "https://example.com/on/demandware.static/Sites-SiteGenesis-Site/Sites/default/v1426675691129/office.jpg",
         "name" : "OCAPI Payment (Simple)"
      }
   ]
}

# in case of validation failure:

RESPONSE:
HTTP/1.1 404 NOT FOUND
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: no-cache,no-store,must-revalidate
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "BasketNotFoundException",
      "message" : "No basket with ID 'non_existing_basket' could be found."
   }
}
</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id1804404556"><h2 class="title sectiontitle">Add price adjustment to basket</h2>
      
      <p class="p"><!-- --></p>
Adds a custom manual price adjustment to the basket.
      <p class="p subheading1" id="id-1036384929__id-794432861">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>POST https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/price_adjustments</code></pre>
      <p class="p subheading1" id="id-1036384929__id-1031441776">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id2004890820">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e10620" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e10622" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10620" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10622" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT. A valid user is required.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e10620" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e10622" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1170837481">Request Document</p>
<p class="p"><a class="xref" href="../Documents/PriceAdjustmentRequest.html#id1305920688" shape="rect">PriceAdjustmentRequest</a></p>
<p class="p subheading1" id="id-1036384929__id653795725">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id-772140680">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e10675" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e10677" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e10679" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e10681" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e10675" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e10677" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e10679" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e10681" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-2124322595">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e10724" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e10726" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e10728" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e10730" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10724" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e10726" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">FixedPriceAdjustmentAlreadyExistsException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e10728" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">itemId (String)</p>
<p class="p">level (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10730" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that a fixed price adjustment was already created for the given level.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10724" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e10726" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidPriceAdjustmentLevelException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e10728" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10730" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that a fixed price adjustment was added at order level.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10724" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e10726" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidPromotionIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e10728" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">promotionId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10730" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that a promotion id was used twice.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10724" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e10726" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">SystemPromotionIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e10728" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">promotionId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10730" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that a system promotion id was used as a manual promotion id.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10724" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e10726" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">TooManyPromotionsException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e10728" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10730" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that more than one hundred price adjustments would have been created.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10724" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e10726" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">PriceAdjustmentLimitExceededException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e10728" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">priceAdjustmentLimit (Decimal)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10730" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the price adjustment limit is exceeded.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e10724" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e10726" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e10728" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e10730" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is
             unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id25484295">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e10829" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e10831" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10829" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.price_adjustment.beforePOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10831" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePOST</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, request : <a class="xref" href="../Documents/PriceAdjustmentRequest.html" shape="rect">
          PriceAdjustmentRequest
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before a custom
 price adjustment is added.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket</dd>
<dd class="dd pd ddexpand">request - The request for the price adjustment</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10829" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.price_adjustment.afterPOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10831" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPOST</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, request : <a class="xref" href="../Documents/PriceAdjustmentRequest.html" shape="rect">
          PriceAdjustmentRequest
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after a custom
 price adjustment was added.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket</dd>
<dd class="dd pd ddexpand">request - The request for the price adjustment</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e10829" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.price_adjustment.modifyPOSTResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e10831" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPOSTResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, priceAdjustmentRequest : <a class="xref" href="../Documents/PriceAdjustmentRequest.html" shape="rect">
          PriceAdjustmentRequest
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">priceAdjustmentRequest - price adjustment request object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e10829" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e10831" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1752378378">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
POST /dw/shop/v23_2/baskets/cdpcIiWbO5cMcaaadlIDUtofOK/price_adjustments HTTP/1.1
Host: example.com
Authorization: Bearer cd669706-3638-4dd1-a8b2-310ab900ca53
Content-Type: application/json;charset=UTF-8
{
  "discount" : {
                 "value" : 5,
                 "type" : "percentage"
               },
  "item_text" : "MyOrderAdjustment",
  "level" : "order",
  "promotion_id" : "manual adjustment"
}

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Cache-Control: no-cache,no-store,must-revalidate
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "basket",
...
   "order_price_adjustments" : 
   [
      
      {
         "_type" : "price_adjustment",
         "applied_discount" : 
         {
            "_type" : "discount",
            "amount" : 0.05,
            "percentage" : 5,
            "type" : "percentage"
         },
         "created_by" : "testAgent",
         "creation_date" : "2015-05-25T09:13:10.942Z",
         "custom" : true,
         "item_text" : "MyOrderAdjustment",
         "manual" : true,
         "price" : -10.00,
         "promotion_id" : "manual adjustment",
         "price_adjustment_id" : "cdzoAiWbOmbiUaaadlfSpMDgNw"
      }
   ],
...
}

# in case of validation failure - example response in case the user does not have a functional permission to add price adjustment:

HTTP/1.1 403 FORBIDDEN
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "UserAccessForbiddenException",
      "message" : "Access to resource 'POST /dw/shop/v23_2/baskets' is not allowed for current user."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id1387776709"><h2 class="title sectiontitle">Remove price adjustment from basket</h2>
      
      <p class="p"><!-- --></p>
Removes a custom manual price adjustment from the basket.
      <p class="p subheading1" id="id-1036384929__id-99137398">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>DELETE https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/price_adjustments/{price_adjustment_id}</code></pre>
      <p class="p subheading1" id="id-1036384929__id-155745033">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id667873405">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e11098" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e11100" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e11098" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e11100" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT. A valid user is required.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e11098" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e11100" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1094688564">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id729992415">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e11144" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e11146" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e11148" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e11150" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e11144" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e11146" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e11148" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e11150" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e11144" rowspan="1" style="text-align:left;vertical-align:top;">price_adjustment_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e11146" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e11148" rowspan="1" style="text-align:left;vertical-align:top;">the uuid of the adjustment to be removed</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e11150" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id1090514326">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e11202" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e11204" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e11206" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e11208" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e11202" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e11204" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidPriceAdjustmentItemIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e11206" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">priceAdjustmentId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e11208" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the priceAdjustmentId is missing, empty or
             whitespace.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e11202" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e11204" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e11206" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e11208" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is
             unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id1090733358">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e11254" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e11256" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e11254" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.price_adjustment.beforeDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e11256" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeDELETE</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, priceAdjustmentId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before a
 custom price adjustment is removed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket</dd>
<dd class="dd pd ddexpand">priceAdjustmentId - the id of the price adjustment to be deleted</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e11254" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.price_adjustment.afterDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e11256" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterDELETE</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, priceAdjustmentId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after a
 custom price adjustment was removed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket</dd>
<dd class="dd pd ddexpand">priceAdjustmentId - the id of the deleted price adjustment</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e11254" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.price_adjustment.modifyDELETEResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e11256" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyDELETEResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, priceAdjustmentId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">priceAdjustmentId - price adjustment id</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e11254" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e11256" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1462458543">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
DELETE /dw/shop/v23_2/baskets/cdpcIiWbO5cMcaaadlIDUtofOK/price_adjustments/cd0PQiWbO5xrQaaadllDYtofOK HTTP/1.1
Host: example.com
Authorization: Bearer cd669706-3638-4dd1-a8b2-310ab900ca53
Content-Type: application/json;charset=UTF-8
x-dw-resource-state: 847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb

# in case of success when a product item price adjustment is deleted:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "basket",
...   
   "product_items" : 
   [
      {
         "_type" : "product_item",
         "adjusted_tax" : 10.00,
         "base_price" : 16.49,
         "bonus_product_line_item" : false,
         "item_text" : "Simple Product",
         "price" : 116.48,
         "price_after_item_discount" : 116.48,
         "price_after_order_discount" : 116.48,
         "product_id" : "SimpleProduct",
         "product_name" : "Simple Product",
         "quantity" : 2.00,
         "shipment_id" : "me",
         "tax" : 10.00,
         "tax_basis" : 116.48,
         "tax_class_id" : null,
         "tax_rate" : 0.05,
         "item_id" : "dgHc6iWbO57GEaaaeldnYtofOK"
      }
   ],
...
}

# in case of validation failure - example response in case the user does not have a functional permission to delete price adjustment:

RESPONSE:
HTTP/1.1 403 FORBIDDEN
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "UserAccessForbiddenException",
      "message" : "Access to resource 'DELETE /dw/shop/v23_2/baskets' is not allowed for current user."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id-1422160766"><h2 class="title sectiontitle">Updates a price adjustment on a basket</h2>
      
      <p class="p"><!-- --></p>
Updates a custom manual price adjustment on the basket. Only the following PATH values are considered for the
 update: discount, item_text, reason_code and custom properties; all other attributes are ignored. The discount
 type of a price adjustment cannot be updated and therefore, the value of the existing type must be passed. For an
 adjustment of type PERCENTAGE, the 'percentage' attribute is mandatory. For adjustments of type AMOUNT and
 FIXED_PRICE, the 'amount' attribute is mandatory.
      <p class="p subheading1" id="id-1036384929__id-2033856083">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>PATCH https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/price_adjustments/{price_adjustment_id}</code></pre>
      <p class="p subheading1" id="id-1036384929__id149341338">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-1591057542">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e11514" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e11516" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e11514" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e11516" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT. A valid user is required.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e11514" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e11516" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id571459917">Request Document</p>
<p class="p"><a class="xref" href="../Documents/PriceAdjustment.html#id-140474391" shape="rect">PriceAdjustment</a></p>
<p class="p subheading1" id="id-1036384929__id-1169559785">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id-577390206">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e11569" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e11571" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e11573" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e11575" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e11569" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e11571" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e11573" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e11575" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e11569" rowspan="1" style="text-align:left;vertical-align:top;">price_adjustment_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e11571" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e11573" rowspan="1" style="text-align:left;vertical-align:top;">the uuid of the adjustment to be updated</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e11575" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-1947685485">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e11627" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e11629" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e11631" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e11633" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e11627" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e11629" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">PriceAdjustmentUpdateNotManualException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e11631" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">priceAdjustmentId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e11633" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the price adjustment is not manual and cannot be
             updated.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e11627" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e11629" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">PriceAdjustmentUpdateAttributeMissingException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e11631" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">attribute (String)</p>
<p class="p">discountType (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e11633" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the expected attributes are missing in the
             input.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e11627" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e11629" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">PriceAdjustmentUpdateTypeMismatchException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e11631" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">existingDiscountType (String)</p>
<p class="p">inputDiscountType (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e11633" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the type of a price adjustment does not match
             the adjustment type of the input data.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e11627" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e11629" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">PriceAdjustmentLimitExceededException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e11631" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">priceAdjustmentLimit (Decimal)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e11633" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the price adjustment limit is exceeded.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e11627" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e11629" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">PriceAdjustmentIdNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e11631" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">priceAdjustmentId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e11633" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the priceAdjustmentId is not found.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id186580625">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e11716" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e11718" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e11716" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.price_adjustment.beforePATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e11718" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePATCH</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, priceAdjustmentId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>, priceAdjustmentWO : <a class="xref" href="../Documents/PriceAdjustment.html" shape="rect">
          PriceAdjustment
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before a custom price adjustment is updated.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket</dd>
<dd class="dd pd ddexpand">priceAdjustmentId - the id of the price adjustment to be updated</dd>
<dd class="dd pd ddexpand">priceAdjustmentWO - the new price adjustment data</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e11716" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.price_adjustment.afterPATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e11718" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPATCH</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, priceAdjustmentId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>, priceAdjustmentWO : <a class="xref" href="../Documents/PriceAdjustment.html" shape="rect">
          PriceAdjustment
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after a custom price adjustment was updated.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket</dd>
<dd class="dd pd ddexpand">priceAdjustmentId - the id of the updated price adjustment</dd>
<dd class="dd pd ddexpand">priceAdjustmentWO - the new price adjustment data</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e11716" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.price_adjustment.modifyPATCHResponse</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e11718" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPATCHResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, priceAdjustmentId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">priceAdjustmentId - price adjustment id</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1575741268">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
PATCH /dw/shop/v23_2/baskets/b30bdba5b8ed654e6e236e2ff3/price_adjustments/e397cd21f9a9c0643277ba1011 HTTP/1.1
Host: example.com
Authorization: Bearer cd669706-3638-4dd1-a8b2-310ab900ca53
Content-Type: application/json;charset=UTF-8
{
  "applied_discount" : {
                 "amount" : 15,
                 "type" : "amount"
               },
  "item_text" : "MyOrderAdjustment",
  "reason_code" : "override manual promo"
}

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Cache-Control: no-cache,no-store,must-revalidate
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
   "_type" : "basket",
...
   "order_price_adjustments" : 
   [
      
      {
         "_type" : "price_adjustment",
         "applied_discount" : 
         {
            "_type" : "discount",
            "amount" : 15,
            "type" : "amount"
         },
         "created_by" : "testWapiAgent",
         "creation_date" : "2017-03-14T09:15:35.543Z",
         "custom" : true,
         "item_text" : "MyOrderAdjustment",
         "last_modified" : "2017-03-14T09:15:35.594Z",
         "manual" : true,
         "price" : -15.00,
         "price_adjustment_id" : "e397cd21f9a9c0643277ba1011",
         "promotion_id" : "manual adjustment",
         "reason_code" : "override manual promo",
         "uuid" : "e397cd21f9a9c0643277ba1011",
         "c_wapi-string" : "my custom property"
      }
   ],
...
}

# in case of validation failure - example response in case required attributes are missing in the input:

HTTP/1.1 400 Bad Request
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" : 
   {
      "arguments" : 
      {
         "attribute" : "percentage",
         "discountType" : "PERCENTAGE"
      },
      "type" : "PriceAdjustmentUpdateAttributeMissingException",
      "message" : "Expected attribute 'percentage' not found for price adjustment of type 'PERCENTAGE'."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id-1800910333"><h2 class="title sectiontitle">Create shipment for a basket</h2>
      
      <p class="p"><!-- --></p>
Creates a new shipment for a basket.
 <p class="lines pdfonly"><!-- --></p>

 The created shipment is initialized with values provided in the body
 document and can be updated with further data API calls. Considered from
 the body are the following properties if specified:
 <ul class="ul">
 <li class="li">the id</li>

 <li class="li">the shipping address</li>

 <li class="li">the shipping method</li>

 <li class="li">gift boolean flag</li>

 <li class="li">gift message</li>

 <li class="li">custom properties</li>

 </ul>

      <p class="p subheading1" id="id-1036384929__id1811847308">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>POST https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/shipments</code></pre>
      <p class="p subheading1" id="id-1036384929__id-2070739975">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-493294789">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e11959" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e11961" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e11959" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e11961" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e11959" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e11961" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1040489266">Request Document</p>
<p class="p"><a class="xref" href="../Documents/Shipment.html#id1649588879" shape="rect">Shipment</a></p>
<p class="p subheading1" id="id-1036384929__id399623094">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id-906483231">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e12015" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e12017" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e12019" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e12021" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e12015" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e12017" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e12019" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e12021" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id1444382292">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e12063" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e12065" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e12067" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e12069" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12063" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12065" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">MissingShipmentIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12067" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12069" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that a shipment id is not provided.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12063" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12065" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">DuplicateShipmentIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12067" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12069" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that a shipment with the provided id already
             exists for the basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12063" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12065" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">DuplicateShipmentNoException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12067" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentNo (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12069" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that a shipment with the provided shipment number
             already exists for the basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12063" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12065" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidShippingMethodIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12067" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shippingMethodId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12069" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that a shipping method with an id was specified
             which is not a valid shipping method id.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12063" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12065" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12067" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12069" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the
             verified customer represented by the JWT, not relevant
             when using OAuth.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e12063" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e12065" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e12067" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e12069" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is
             unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id1607465648">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e12155" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e12157" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12155" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipment.beforePOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12157" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePOST</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, shipment : <a class="xref" href="../Documents/Shipment.html" shape="rect">
          Shipment
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before the creation of
 a shipment for a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the shipment will be created</dd>
<dd class="dd pd ddexpand">shipment - the shipment information for the shipment creation</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12155" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipment.afterPOST</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12157" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPOST</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, shipment : <a class="xref" href="../Documents/Shipment.html" shape="rect">
          Shipment
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after the creation of
 a shipment for a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the shipment was created</dd>
<dd class="dd pd ddexpand">shipment - the shipment information for the shipment creation</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12155" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipment.modifyPOSTResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12157" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPOSTResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, shipmentRequest : <a class="xref" href="../Documents/Shipment.html" shape="rect">
          Shipment
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">shipmentRequest - shipment request object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e12155" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e12157" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1816326509">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>#
# Example: Create a shipment for a basket
#
REQUEST:
POST /dw/shop/v23_2/baskets/cdcM6iWbN5jyIaaadh5thrJrYj/shipments HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json; charset=UTF-8
{
  "gift":true,
  "gift_message":"Happy Birthday, Sværre",
  "id": "StandardShipping",
  "shipping_method":
  {
    "id":"BaseShippingMethod"
  },
  "shipping_address" :
  {
    "first_name":"John",
    "last_name":"Smith",
    "city":"Boston",
    "country_code":"US",
   },
   "c_somestring":"shipment_custom_property"
}
# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Cache-Control: max-age=0,no-cache,no-store,must-revalidate
Expires: Thu, 01-Jan-1970 00:00:00 GMT
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
...
   "shipments": [
    {
      "gift": true,
      "gift_message", "Happy Birthday, Sværre",    
      "id": "StandardShipping",
      "shipping_address":
      {
        "city": "Boston",
        "country_code": "US",
        "first_name": "John",
        "full_name": "John Smith",
        "last_name": "Smith",
        "c_strValue" : "cTest"
      },
      "shipping_method":
      {
        "description" : "The base shipping method.",
        "id" : "BaseShippingMethod",
        "name" : "Base Shipping Method",
        "price" : 5.55
      },
      "shipment_id": "deQcx9aaabfGQaaadiAZ6KZFcl",
      "c_somestring" : "shipment_custom_property"
    }
  ],
...
}

# in case of validation failure - example response when the shipping method is not existing or is not applicable:
RESPONSE:
HTTP/1.1 400 BAD REQUEST
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: no-cache,no-store,must-revalidate
{
  "_v" : "23.2",
  "fault": {
    "details": {
      "validation.type": "InvalidShippingMethod",
      "validation.message": "The shipping method with ID 'NotExistingMethodId' is unknown or cannot be applied to the basket."
    },
    "type": "InvalidShippingMethodIdException",
    "message": "The shipping method with ID 'NotExistingMethodId' is unknown or cannot be applied to the basket."
  }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id560799458"><h2 class="title sectiontitle">Update shipment for a basket</h2>
      
      <p class="p"><!-- --></p>
Updates a shipment for a basket. <p class="lines pdfonly"><!-- --></p>
 The body can include updated values for
 the following properties:
 <ul class="ul">
 <li class="li">the id</li>

 <li class="li">the shipping address</li>

 <li class="li">the shipping method</li>

 <li class="li">gift boolean flag</li>

 <li class="li">gift message</li>

 <li class="li">custom properties</li>

 </ul>

      <p class="p subheading1" id="id-1036384929__id-646012083">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>PATCH https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/shipments/{shipment_id}</code></pre>
      <p class="p subheading1" id="id-1036384929__id-912406982">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-1032040998">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e12449" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e12451" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12449" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12451" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e12449" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e12451" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id915446701">Request Document</p>
<p class="p"><a class="xref" href="../Documents/Shipment.html#id1649588879" shape="rect">Shipment</a></p>
<p class="p subheading1" id="id-1036384929__id904095927">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id-427746526">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e12505" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e12507" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e12509" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e12511" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12505" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12507" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12509" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12511" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e12505" rowspan="1" style="text-align:left;vertical-align:top;">shipment_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e12507" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e12509" rowspan="1" style="text-align:left;vertical-align:top;">the id of the shipment to be modified</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e12511" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-42272781">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e12562" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e12564" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e12566" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e12568" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12562" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12564" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidShipmentIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12566" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12568" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the given shipment id was invalid.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12562" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12564" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">DuplicateShipmentIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12566" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12568" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that a shipment with the provided id already exists for the
             basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12562" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12564" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">DuplicateShipmentNoException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12566" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentNo (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12568" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that a shipment with the provided shipment number already exists
             for the basket.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12562" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12564" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">MissingShippingMethodIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12566" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12568" rowspan="1" style="text-align:left;vertical-align:top;">Indicates a missing shipping method.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12562" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12564" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidShippingMethodIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12566" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shippingMethodId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12568" rowspan="1" style="text-align:left;vertical-align:top;">Indicates an invalid shipping method.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12562" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12564" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12566" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12568" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the verified
             customer represented by the JWT, not relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e12562" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e12564" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e12566" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e12568" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id481708081">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e12667" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e12669" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12667" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipment.beforePATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12669" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePATCH</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, shipment : <a class="xref" href="../../../../Documents/api/class_dw_order_Shipment.html" shape="rect" target="_blank">
          Shipment
        </a>, shipmentInfo : <a class="xref" href="../Documents/Shipment.html" shape="rect">
          Shipment
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before changing of
 a shipment for a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the shipment will be updated</dd>
<dd class="dd pd ddexpand">shipment - the current shipment to be updated</dd>
<dd class="dd pd ddexpand">shipmentInfo - the shipment information for the shipment update (update data)</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12667" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipment.afterPATCH</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12669" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPATCH</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, shipment : <a class="xref" href="../../../../Documents/api/class_dw_order_Shipment.html" shape="rect" target="_blank">
          Shipment
        </a>, shipmentInfo : <a class="xref" href="../Documents/Shipment.html" shape="rect">
          Shipment
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after patching of
 a shipment for a basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the shipment was changed</dd>
<dd class="dd pd ddexpand">shipment - the shipment which has been updated</dd>
<dd class="dd pd ddexpand">shipmentInfo - the shipment information for the shipment update</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12667" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipment.modifyPATCHResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12669" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPATCHResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, shipmentId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">shipmentId - shipment id</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e12667" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e12669" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id329671436">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>#
# Example: Update a shipment of a basket
#
REQUEST:
PATCH /dw/shop/v23_2/baskets/cdHyF9aacbudgaaadl5x7bVp1i/shipments/cdL6b9aacbUNAaaadlbiBbVp1i HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json; charset=UTF-8
{
    "_resource_state" : "847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb",
    "c_somestring":"shipment_custom_property",
    "gift":true,
    "gift_message": "Happy Birthday, Sværre"
}
# in case of success:

RESPONSE:
Date:Mon, 04 May 2015 07:18:49 GMT
Server:Salesforce Commerce Cloud eCommerce Server/2.4.10 (Unix) OpenSSL/1.0.1f
Content-Length:2815

Keep-Alive:timeout=15, max=97
Connection:Keep-Alive
Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
...
   "shipments": [
    {
      "gift":true,
      "gift_message":"Happy Birthday, Sværre",
      "id": "StandardShipping",
      "shipping_address":
      {
        "city": "Boston",
        "country_code": "US",
        "first_name": "John",
        "full_name": "John Smith",
        "last_name": "Smith",
      },
      "shipment_no" : "me",      
      "shipping_method":
      {
        "description" : "The base shipping method.",
        "id" : "BaseShippingMethod",
        "name" : "Base Shipping Method",
        "price" : 5.55
      },
      "shipment_id": "cdL6b9aacbUNAaaadlbiBbVp1i",
      "c_somestring" : "shipment_custom_property"
    }
  ],
...
}

# in case of validation failure - example response when the shipping method is not existing or is not applicable:
RESPONSE:
HTTP/1.1 400 BAD REQUEST
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: no-cache,no-store,must-revalidate
{
  "_v" : "23.2",
  "fault": {
    "details": {
      "validation.type": "InvalidShippingMethod",
      "validation.message": "The shipping method with ID 'NotExistingMethodId' is unknown or cannot be applied to the basket."
    },
    "type": "InvalidShippingMethodIdException",
    "message": "The shipping method with ID 'NotExistingMethodId' is unknown or cannot be applied to the basket."
  }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id1195131685"><h2 class="title sectiontitle">Remove shipment from basket</h2>
      
      <p class="p"><!-- --></p>
Removes a specified shipment and all associated product, gift certificate, shipping and price adjustment line
 items from a basket. You can't remove a default shipment (id = "me").
      <p class="p subheading1" id="id-1036384929__id-1110739926">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>DELETE https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/shipments/{shipment_id}</code></pre>
      <p class="p subheading1" id="id-1036384929__id657252503">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id1902723293">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e12946" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e12948" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12946" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12948" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e12946" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e12948" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id2112811732">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id355633279">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e12992" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e12994" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e12996" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e12998" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e12992" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12994" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e12996" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e12998" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e12992" rowspan="1" style="text-align:left;vertical-align:top;">shipment_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e12994" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e12996" rowspan="1" style="text-align:left;vertical-align:top;">the id of the shipment to be deleted</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e12998" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-2069848586">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e13050" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e13052" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e13054" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e13056" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13050" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13052" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidShipmentIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13054" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13056" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the given shipment id is invalid.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13050" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13052" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13054" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13056" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the verified
             customer represented by the JWT, not relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13050" rowspan="1" style="text-align:left;vertical-align:top;">403</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13052" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">DefaultShipmentDeletionForbiddenException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13054" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13056" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the given shipment id corresponds to the default
             shipment (shipment ID always set to "me") and cannot be removed.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e13050" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e13052" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e13054" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e13056" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id1823303886">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e13122" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e13124" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13122" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipment.beforeDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13124" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeDELETE</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, shipment : <a class="xref" href="../../../../Documents/api/class_dw_order_Shipment.html" shape="rect" target="_blank">
          Shipment
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Called before the basket's shipment is removed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket to be updated</dd>
<dd class="dd pd ddexpand">shipment - the shipment to be deleted</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13122" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipment.afterDELETE</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13124" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterDELETE</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, shipmentId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Called after the basket's shipment was removed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket which was updated</dd>
<dd class="dd pd ddexpand">shipmentId - the id of the deleted shipment</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13122" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipment.modifyDELETEResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13124" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyDELETEResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, shipmentId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">shipmentId - shipment id</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e13122" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e13124" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1697904369">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>#
# Example: Delete a shipment from a basket
#
REQUEST:
DELETE /dw/shop/v23_2/baskets/cdHyF9aacbudgaaadl5x7bVp1i/shipments/cdL6b9aacbUNAaaadlbiBbVp1i HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
x-dw-resource-state: 847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb

# in case of success:

RESPONSE:
HTTP/1.1 200 OK

Content-Type:application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
...
   "shipments": [
    {
      "gift":false,
      "id": "StandardShipping",
      "shipping_address":
      {
        "city": "Boston",
        "country_code": "US",
        "first_name": "John",
        "full_name": "John Smith",
        "last_name": "Smith",
      },
      "shipment_no" : "me",      
      "shipping_method":
      {
        "description" : "The base shipping method.",
        "id" : "BaseShippingMethod",
        "name" : "Base Shipping Method",
        "price" : 5.55
      },
      "shipment_id": "abc6b9aacbUNAaaadlbiBbVp1i",
      "c_somestring" : "shipment_custom_property"
    }
  ],
...
}

# in case of validation failure - example response when the shipment ID corresponds to the default basket shipment:
RESPONSE:
HTTP/1.1 403 FORBIDDEN
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" : 
   {
      "arguments" : 
      {
         "shipmentId" : "me"
      },
      "type" : "DefaultShipmentDeletionForbiddenException",
      "message" : "The shipment with ID 'me' corresponds to the default shipment and cannot be deleted."
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id641780291"><h2 class="title sectiontitle">Sets the shipping address of a shipment</h2>
      
      <p class="p"><!-- --></p>
Sets a shipping address of a specific shipment of a basket.
      <p class="p subheading1" id="id-1036384929__id-1917636532">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>PUT https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/shipments/{shipment_id}/shipping_address?use_as_billing={Boolean}&amp;customer_address_id={String}</code></pre>
      <p class="p subheading1" id="id-1036384929__id112573369">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-164889733">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e13382" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e13384" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13382" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13384" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e13382" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e13384" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1024156942">Request Document</p>
<p class="p"><a class="xref" href="../Documents/OrderAddress.html#id677127267" shape="rect">OrderAddress</a></p>
<p class="p subheading1" id="id-1036384929__id-20853898">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id684138913">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e13437" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e13439" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e13441" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e13443" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13437" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13439" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13441" rowspan="1" style="text-align:left;vertical-align:top;">The id of the basket to be modified.</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13443" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e13437" rowspan="1" style="text-align:left;vertical-align:top;">shipment_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e13439" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e13441" rowspan="1" style="text-align:left;vertical-align:top;">The id of the shipment to be modified.</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e13443" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id-1064102396">Query Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e13486" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e13488" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e13490" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e13492" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13486" rowspan="1" style="text-align:left;vertical-align:top;">customer_address_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13488" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13490" rowspan="1" style="text-align:left;vertical-align:top;">The id of the customer address to be set as shipping address.
            Cannot be used together with an existing body.</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13492" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e13486" rowspan="1" style="text-align:left;vertical-align:top;">use_as_billing</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e13488" rowspan="1" style="text-align:left;vertical-align:top;">Boolean</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e13490" rowspan="1" style="text-align:left;vertical-align:top;">The flag indicating whether the given address will also be
            used as billing address.</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e13492" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-1394682220">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e13542" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e13544" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e13546" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e13548" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13542" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13544" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">CustomerAddressIdNotApplicableException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13546" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13548" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that both customer_address_id and address body was
             provided.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13542" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13544" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidShipmentIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13546" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13548" rowspan="1" style="text-align:left;vertical-align:top;">Thrown if the shipment with the given shipment id is unknown.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13542" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13544" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13546" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13548" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not
             match the verified customer represented by the JWT (not
             relevant when using OAuth).</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13542" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13544" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13546" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13548" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that an customerAddressId was provided but either
             an anonymous or no customer was set.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13542" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13544" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13546" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13548" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e13542" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e13544" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">AddressNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e13546" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">addressName (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e13548" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the address specified by customer_address_id is
             unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id-2122718608">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e13632" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e13634" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13632" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipment.shipping_address.beforePUT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13634" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePUT</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, shipment : <a class="xref" href="../../../../Documents/api/class_dw_order_Shipment.html" shape="rect" target="_blank">
          Shipment
        </a>, shippingAddress : <a class="xref" href="../Documents/OrderAddress.html" shape="rect">
          OrderAddress
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before setting
 of the shipping address to a certain shipment of the basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">shipment - the shipment information for the shipment creation</dd>
<dd class="dd pd ddexpand">shippingAddress - the shipping address to be set to the shipment</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13632" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipment.shipping_address.afterPUT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13634" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPUT</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, shipment : <a class="xref" href="../../../../Documents/api/class_dw_order_Shipment.html" shape="rect" target="_blank">
          Shipment
        </a>, shippingAddress : <a class="xref" href="../Documents/OrderAddress.html" shape="rect">
          OrderAddress
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after setting of
 the shipping address to a certain shipment of the basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">shipment - the shipment information for the shipment creation</dd>
<dd class="dd pd ddexpand">shippingAddress - the shipping address that was set to the shipment</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13632" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipment.shipping_address.modifyPUTResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13634" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPUTResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, orderAddressRequest : <a class="xref" href="../Documents/OrderAddress.html" shape="rect">
          OrderAddress
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">orderAddressRequest - order address request object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e13632" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e13634" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1022738003">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
PUT /dw/shop/v23_2/baskets/cdCxIiWbPdiKAaaadhKTtczLvk/shipments/shipmentId123/shipping_address HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json
{
  "first_name":"John",
  "last_name":"Smith",
  "city":"Boston",
  "country_code":"US",
  "c_strValue":"cTest"
}

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
...
   "shipments" : 
   [
      
      {
         "_type" : "shipment",
         "id" : "me",
         "shipping_method" : 
         {
            "_type" : "shipping_method",
            "description" : "The default shipping method.",
            "id" : "DefaultShippingMethod",
            "name" : "Default Shipping Method",
            "price" : 5.55,
            "c_somestring" : "ShippingMethod String Value"
         },
         "shipment_id" : "cdKeciWbNL21saaadjZkbNt6xg"
      },
            
      {
         "_type" : "shipment",
         "id" : "shipmentId123",
         "shipping_address" : 
         {
            "_type" : "order_address",
            "city" : "Boston",
            "country_code" : "US",
            "first_name" : "John",
            "full_name" : "John Smith",
            "last_name" : "Smith",
            "c_strValue" : "cTest"
         },
         "shipment_id" : "cdOlsiWbNLWhkaaadjbQdNt6xg"
      }
   ],
...
}

REQUEST:
PUT /dw/shop/v23_2/baskets/cdCxIiWbPdiKAaaadhKTtczLvk/shipments/shipmentId123/shipping_address?customer_address_id=homeaddress HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json
{
}

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
...
   "shipments" : 
   [
      
      {
         "_type" : "shipment",
         "id" : "me",
         "shipping_method" : 
         {
            "_type" : "shipping_method",
            "description" : "The default shipping method.",
            "id" : "DefaultShippingMethod",
            "name" : "Default Shipping Method",
            "price" : 5.55,
            "c_somestring" : "ShippingMethod String Value"
         },
         "shipment_id" : "cdKeciWbNL21saaadjZkbNt6xg"
      },
            
      {
         "_type" : "shipment",
         "id" : "shipmentId123",
         "shipping_address" : 
         {
            "_type" : "order_address",
            "city" : "Boston",
            "country_code" : "US",
            "first_name" : "John",
            "full_name" : "John Smith",
            "last_name" : "Smith",
            "c_strValue" : "cTest"
         },
         "shipment_id" : "cdOlsiWbNLWhkaaadjbQdNt6xg"
      }
   ],
...
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id-1062659770"><h2 class="title sectiontitle">Set shipping method to shipment</h2>
      
      <p class="p"><!-- --></p>
Sets a shipping method to a specific shipment of a basket.
      <p class="p subheading1" id="id-1036384929__id506846825">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>PUT https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/shipments/{shipment_id}/shipping_method</code></pre>
      <p class="p subheading1" id="id-1036384929__id466228054">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id-34584258">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e13914" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e13916" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13914" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13916" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e13914" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e13916" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id1693666833">Request Document</p>
<p class="p"><a class="xref" href="../Documents/ShippingMethod.html#id-1925015206" shape="rect">ShippingMethod</a></p>
<p class="p subheading1" id="id-1036384929__id-740883757">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id428641342">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e13969" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e13971" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e13973" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e13975" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e13969" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13971" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e13973" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket to be modified</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e13975" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e13969" rowspan="1" style="text-align:left;vertical-align:top;">shipment_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e13971" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e13973" rowspan="1" style="text-align:left;vertical-align:top;">the id of the shipment to be modified</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e13975" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-2076010665">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e14027" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e14029" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e14031" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e14033" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e14027" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e14029" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">MissingShippingMethodIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e14031" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e14033" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the id of the shipping method is missing.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e14027" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e14029" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidShippingMethodIdException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e14031" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shippingMethodId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e14033" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that a shipping method with an id was specified
             which is not a valid shipping method id.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e14027" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e14029" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e14031" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e14033" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the
             verified customer represented by the JWT, not relevant
             when using OAuth.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e14027" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e14029" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e14031" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e14033" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is
             unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id652431437">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e14099" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e14101" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e14099" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipment.shipping_method.beforePUT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e14101" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePUT</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, shipment : <a class="xref" href="../../../../Documents/api/class_dw_order_Shipment.html" shape="rect" target="_blank">
          Shipment
        </a>, shippingMethod : <a class="xref" href="../Documents/ShippingMethod.html" shape="rect">
          ShippingMethod
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before setting of
 the shipping method to a certain shipment of the basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">shipment - the shipment information for the shipment creation</dd>
<dd class="dd pd ddexpand">shippingMethod - the shipping method to be set to the shipment</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e14099" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipment.shipping_method.afterPUT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e14101" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPUT</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, shipment : <a class="xref" href="../../../../Documents/api/class_dw_order_Shipment.html" shape="rect" target="_blank">
          Shipment
        </a>, shippingMethod : <a class="xref" href="../Documents/ShippingMethod.html" shape="rect">
          ShippingMethod
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after setting of
 the shipping method to a certain shipment of the basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket based on which the order is created</dd>
<dd class="dd pd ddexpand">shipment - the shipment information for the shipment creation</dd>
<dd class="dd pd ddexpand">shippingMethod - the shipping method that was set to the shipment</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e14099" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipment.shipping_method.modifyPUTResponse</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e14101" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPUTResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, shippingMethodRequest : <a class="xref" href="../Documents/ShippingMethod.html" shape="rect">
          ShippingMethod
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>
<dd class="dd pd ddexpand">shippingMethodRequest - shipping method request object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e14099" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.validateBasket</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e14101" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">validateBasket</strong>
      (basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>, duringSubmit : <a class="xref" href="../../../../Documents/api/class_boolean.html" shape="rect" target="_blank">
          boolean
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">Allows the addition of custom flashes or removal of internal flashes. The presence of a flash indicates that the
 basket cannot yet be submitted. Parameter <code class="ph codeph">duringSubmit</code> indicates the current call is during the
 basket submit process. Default implementation returns ERROR if duringSubmit and any flash
 exists.</p>

 <p class="p">
 Example showing addition, listing and removal of flashes:
 </p>

 
<pre class="pre codeblock" xml:space="preserve"><code>
 exports.validateBasket = function( basketResponse, duringSubmit ) {
     basketResponse.addFlash( {
         type: "MyType",
         message: "My message",
         path: "my_path",
         details: { "k1": "v1", "k2": "v2" }
     } );
     var flashToRemove;
     for each( f in basketResponse.flashes ) {
         if ( f.type == "SomeOtherType" ) {
             flashToRemove = f;
         }
     }
     if ( flashToRemove != null ) {
         basketResponse.removeFlash( flashToRemove );
     }
 };
</code></pre><dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketResponse - the basket response to be validated, before any OCAPI property selection is applied</dd>
<dd class="dd pd ddexpand">duringSubmit - should the basket be checked for submit</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1704066448">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
PUT /dw/shop/v23_2/baskets/cdqwkiWbPdFlkaaadh8xRczLvx/shipments/shipmentId1/shipping_method HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json
{
  "id":"BaseShippingMethod"
}

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
...   
   "shipments" : 
   [
      
      {
         "_type" : "shipment",
         "id" : "me",
         "shipping_method" : 
         {
            "_type" : "shipping_method",
            "description" : "The default shipping method.",
            "id" : "DefaultShippingMethod",
            "name" : "Default Shipping Method",
            "price" : 5.55
         },
         "shipment_id" : "cd5vaiWbNRZfwaaadknaASga38"
      },
      
      {
         "_type" : "shipment",
         "id" : "shipmentId1",
         "shipping_method" : 
         {
            "_type" : "shipping_method",
            "description" : "The base shipping method.",
            "id" : "BaseShippingMethod",
            "name" : "Base Shipping Method",
            "price" : 0.01
         },
         "shipment_id" : "cd83AiWbNR0yMaaadkAoASga38"
      }
   ],
...
}

# in case of validation failure:

RESPONSE:
HTTP/1.1 400 BAD REQUEST
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "InvalidShippingMethodIdException",
      "message" : "The shipping method with ID 'BaseShippingMethod2' is unknown or cannot be applied to the basket."
      ...
   }
}</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id-1126774498"><h2 class="title sectiontitle">Get applicable shipping methods for certain shipment of basket</h2>
      
      <p class="p"><!-- --></p>
Gets the applicable shipping methods for a certain shipment of a basket.
      <p class="p subheading1" id="id-1036384929__id1725431697">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>GET https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/shipments/{shipment_id}/shipping_methods</code></pre>
      <p class="p subheading1" id="id-1036384929__id380067966">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id1981898518">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e14381" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e14383" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e14381" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e14383" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e14381" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e14383" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-1410073093">Response Document</p>
<p class="p"><a class="xref" href="../Documents/ShippingMethodResult.html#id152969917" shape="rect">ShippingMethodResult</a></p>
<p class="p subheading1" id="id-1036384929__id-1484902042">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e14427" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e14429" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e14431" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e14433" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e14427" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e14429" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e14431" rowspan="1" style="text-align:left;vertical-align:top;">the id of the basket</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e14433" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e14427" rowspan="1" style="text-align:left;vertical-align:top;">shipment_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e14429" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e14431" rowspan="1" style="text-align:left;vertical-align:top;">the id of the shipment</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e14433" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-277674705">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e14485" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e14487" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e14489" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e14491" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e14485" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e14487" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">InvalidCustomerException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e14489" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e14491" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the customer assigned to the basket does not match the verified
             customer represented by the JWT, not relevant when using OAuth.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e14485" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e14487" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e14489" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e14491" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e14485" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e14487" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">ShipmentNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e14489" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">shipmentId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e14491" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the shipment with the given shipment id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id1271668597">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e14546" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e14548" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e14546" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipments.shipping_methods.beforeGET</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e14548" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforeGET</strong>
      (basketId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>, shipmentId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before the request will be processed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basketId - the target basket id</dd>
<dd class="dd pd ddexpand">shipmentId - the shipment id</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e14546" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.shipments.shipping_methods.modifyGETResponse_v2</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e14548" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyGETResponse_v2</strong>
      (shipment : <a class="xref" href="../../../../Documents/api/class_dw_order_Shipment.html" shape="rect" target="_blank">
          Shipment
        </a>, shippingMethodResult : <a class="xref" href="../Documents/ShippingMethodResult.html" shape="rect">
          ShippingMethodResult
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">shipment - the shipment the shipping methods result retrieved for.</dd>
<dd class="dd pd ddexpand">shippingMethodResult - shipping method result object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id94269512">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
GET /dw/shop/v23_2/baskets/this/shipments/me/shipping_methods HTTP/1.1
Host: example.com
Authorization: Bearer af7f5c90-ffc1-4ea4-9613-f5b375b7dc19
Content-Type: application/json

# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Cache-Control: max-age=0,no-cache,no-store,must-revalidate
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_type" : "shipping_method_result",
   "applicable_shipping_methods" : 
   [
      {
         "_type" : "shipping_method",
         "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
         "description" : "The default shipping method.",
         "id" : "DefaultShippingMethod",
         "name" : "Default Shipping Method",
         "price" : 5.55
      },
      {
         "_type" : "shipping_method",
         "_resource_state" : "847f9c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb",
         "description" : "The base shipping method.",
         "id" : "BaseShippingMethod",
         "name" : "Base Shipping Method",
         "price" : 0.99
      },
      {
         "_type" : "shipping_method",
         "_resource_state" : "c3c5867f641470b3046aeec31f07757991b792d722e10079926f7a289fb",
         "description" : "A shipping method that contains product level shipping costs.",
         "id" : "ProductLevelShippingCostsShippingMethod",
         "name" : "Product Level Shipping Costs Shipping Method",
         "price" : 0.10
      }
   ],
   "default_shipping_method_id" : "DefaultShippingMethod"
}

# in case of validation failure:

RESPONSE:
HTTP/1.1 404 NOT FOUND
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
Cache-Control: no-cache,no-store,must-revalidate
{
   "_v" : "23.2",
   "fault" : 
   {
      "type" : "ShipmentNotFoundException",
      "message" : "No shipment with ID 'non-existingShipmentId' could be found."
   }
}
</code></pre></div>

    </div>
<div class="section" id="id-1036384929__id895933963"><h2 class="title sectiontitle">Put a basket as storefront basket.</h2>
      
      <p class="p"><!-- --></p>
Marks a basket as storefront basket.
      <p class="p subheading1" id="id-1036384929__id1842030468">Url</p>

      <pre class="pre codeblock" xml:space="preserve"><code>PUT https://hostname:port/dw/shop/v23_2/baskets/{basket_id}/storefront?exchange={Boolean}</code></pre>
      <p class="p subheading1" id="id-1036384929__id-1626384655">Formats</p>
 <p class="p">json, xml</p>

      <p class="p subheading1" id="id-1036384929__id119525699">Authentication</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e14694" rowspan="1" style="text-align:left;vertical-align:top;">Name</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e14696" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e14694" rowspan="1" style="text-align:left;vertical-align:top;">JWT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e14696" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via Customer JWT. A valid user is required.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e14694" rowspan="1" style="text-align:left;vertical-align:top;">OAuth</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e14696" rowspan="1" style="text-align:left;vertical-align:top;">Authentication via OAuth token. A valid user is required.</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-971194194">Response Document</p>
<p class="p"><a class="xref" href="../Documents/Basket.html#id671660835" shape="rect">Basket</a></p>
<p class="p subheading1" id="id-1036384929__id911082713">Path Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e14740" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e14742" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e14744" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e14746" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e14740" rowspan="1" style="text-align:left;vertical-align:top;">basket_id</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e14742" rowspan="1" style="text-align:left;vertical-align:top;">String</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e14744" rowspan="1" style="text-align:left;vertical-align:top;">the basket id</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e14746" rowspan="1" style="text-align:left;vertical-align:top;">minLength=1</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id1676188108">Query Parameters</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e14779" rowspan="1" style="text-align:left;vertical-align:top;">Parameter</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e14781" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e14783" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e14785" rowspan="1" style="text-align:left;vertical-align:top;">Constraints</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e14779" rowspan="1" style="text-align:left;vertical-align:top;">exchange</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e14781" rowspan="1" style="text-align:left;vertical-align:top;">Boolean</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e14783" rowspan="1" style="text-align:left;vertical-align:top;">if <code class="ph codeph">true</code> an existing storefront basket will be exchanged and marked as agent
            basket. if <code class="ph codeph">false</code> a CustomerBasketsQuotaExceededException will be thrown.</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e14785" rowspan="1" style="text-align:left;vertical-align:top;"> </td>
</tr>

          </tbody>
</table>
</div>
<p class="p">In case of a failure
          <a class="xref" href="../Documents/Fault.html#id1939230365" shape="rect">Fault</a> Document is returned.</p>
<p class="p subheading1" id="id-1036384929__id-1312230308">Faults</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e14833" rowspan="1" style="text-align:left;vertical-align:top;">Status</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e14835" rowspan="1" style="text-align:left;vertical-align:top;">Type</th>
<th class="entry nocellnorowborder" colspan="1" id="d4130908e14837" rowspan="1" style="text-align:left;vertical-align:top;">Arguments</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e14839" rowspan="1" style="text-align:left;vertical-align:top;">Description</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e14833" rowspan="1" style="text-align:left;vertical-align:top;">400</td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e14835" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">CustomerBasketsQuotaExceededException</code></td>
<td class="entry nocellnorowborder" colspan="1" headers="d4130908e14837" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketIds (String)</p>
</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e14839" rowspan="1" style="text-align:left;vertical-align:top;">Thrown if a storefront basket already exists and exchange is
             <code class="ph codeph">false</code>.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e14833" rowspan="1" style="text-align:left;vertical-align:top;">404</td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e14835" rowspan="1" style="text-align:left;vertical-align:top;"><code class="ph codeph">BasketNotFoundException</code></td>
<td class="entry row-nocellborder" colspan="1" headers="d4130908e14837" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">basketId (String)</p>
</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e14839" rowspan="1" style="text-align:left;vertical-align:top;">Indicates that the basket with the given basket id is unknown.</td>
</tr>

          </tbody>
</table>
</div>
<p class="p subheading1" id="id-1036384929__id-1420807256">Customization</p>
<p class="p">This Resource supports server-side customization.</p>

<div class="tablenoborder"><table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary=""><colgroup span="1"><col span="1"/><col span="1"/></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry nocellnorowborder" colspan="1" id="d4130908e14888" rowspan="1" style="text-align:left;vertical-align:top;">Extension Point</th>
<th class="entry cell-norowborder" colspan="1" id="d4130908e14890" rowspan="1" style="text-align:left;vertical-align:top;">Method Detail</th>

            </tr>

          </thead>
<tbody class="tbody">
            <tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e14888" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.storefront.beforePUT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e14890" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">beforePUT</strong>
      (basketId : <a class="xref" href="../../../../Documents/api/class_TopLevel_String.html" shape="rect" target="_blank">
          String
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called before the request will be processed.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" colspan="1" headers="d4130908e14888" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.storefront.afterPUT</td>
<td class="entry cell-norowborder" colspan="1" headers="d4130908e14890" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">afterPUT</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p">The function is called after a put of a basket as storefront basket.</p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the basket</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" colspan="1" headers="d4130908e14888" rowspan="1" style="text-align:left;vertical-align:top;">dw.ocapi.shop.basket.storefront.modifyPUTResponse</td>
<td class="entry cellrowborder" colspan="1" headers="d4130908e14890" rowspan="1" style="text-align:left;vertical-align:top;"><p class="p">
      <strong class="ph b">modifyPUTResponse</strong>
      (basket : <a class="xref" href="../../../../Documents/api/class_dw_order_Basket.html" shape="rect" target="_blank">
          Basket
        </a>, basketResponse : <a class="xref" href="../Documents/Basket.html" shape="rect">
          Basket
        </a>) :
      <a class="xref" href="../../../../Documents/api/class_dw_system_Status.html" shape="rect" target="_blank">
          Status
        </a>
    </p>
<p class="p"><!-- --></p>
<dl class="dl parml">
        
          <dt class="dt pt dlterm"><strong class="ph b">Parameters:</strong></dt>

          <dd class="dd pd">basket - the target basket</dd>
<dd class="dd pd ddexpand">basketResponse - basket response object</dd>

        
        
          <dt class="dt pt dlterm"><strong class="ph b">Returns:</strong></dt>

          <dd class="dd pd">a non-null Status ends the hook execution</dd>

        
      </dl>
</td>
</tr>

          </tbody>
</table>
</div>

      <p class="p subheading1" id="id-1036384929__id-940286091">Sample</p>

      <div class="p"><pre class="pre codeblock" xml:space="preserve"><code>REQUEST:
POST /dw/shop/v23_2/baskets/123324d33edew2443/storefront HTTP/1.1
Host: example.com
Authorization: Bearer xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx
Content-Type: application/json


# in case of success:

RESPONSE:
HTTP/1.1 200 OK
Cache-Control: no-cache,no-store,must-revalidate
Expires: Thu, 01-Jan-1970 00:00:00 GMT
Content-Type: application/json;charset=UTF-8
{
   "_v" : "23.2",
   "_resource_state" : "860cde3040519cce439cd99e209f8a87c3ad0b7e2813edbf6f5501f763b73bd5",
...
  "basket_id" : "bcRTDaOjgyscwaaadkrhhQHmrP",
  "agent_basket": false,
...
}</code></pre></div>

    </div>

      </div>

    <div><table class="copyright_table" width="100%"><tr><td align="left" colspan="1" rowspan="1"><p class="copyright_footer">© Copyright 2000-2023, Salesforce, Inc. All rights reserved. Various trademarks held by their respective owners.</p></td>
<td align="right" colspan="1" rowspan="1"><a href="#" id="bookmarklink" onclick="showLink();" shape="rect">Show URL</a><div id="bookmarkme" style="display:none"><!-- --></div></td>
<td align="right" colspan="1" rowspan="1"><a href="#" onclick="javascript:window.location='mailto:b2ccommercedocfeedback@salesforce.com?subject=' + document.title" shape="rect">Submit Feedback</a></td><td align="right" colspan="1" rowspan="1"><a href="https://www.salesforce.com/company/privacy/" shape="rect" target="_blank">Privacy Policy</a></td></tr>
</table></div><div id="ocapiDeprecationBanner"><a id="closeDeprecationBanner" onclick="closeDeprecationBanner()" shape="rect">X</a>
<b>OCAPI versions 15.x and 16.x will be retired on March 31, 2021. For dates and more information, see the <a href="https://documentation.b2c.commercecloud.salesforce.com/DOC2/topic/com.demandware.dochelp/OCAPI/current/usage/VersioningAndDeprecationPolicy.html" shape="rect" target="_blank">OCAPI versioning and deprecation policy</a> and this <a href="https://help.salesforce.com/articleView?id=000351399&amp;language=en_US&amp;type=1&amp;mode=1" shape="rect" target="_blank">Knowledge Article</a>.</b></div>
<div id="cookieConsent"><a id="closeCookieConsent" onclick="closeBanner()" shape="rect">X</a>
<b>Privacy Update:</b>    We use cookies to make interactions with our websites and services easy and meaningful, to better understand how they are used. By continuing to use this site you are giving us your consent to do this. <a href="https://www.salesforce.com/company/privacy/" shape="rect" target="_blank">Privacy Policy.</a>
</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="text/javascript" xml:space="preserve">
window.onload = function () {
	
	var ssFlag;
	var ocapiBannerElement =  document.getElementById('ocapiDeprecationBanner');
	
	// If we're not in the correct infocenter, don't bother going further.
	// Return immediately.
	if( location.hostname != "documentation.b2c.commercecloud.salesforce.com" ) {
		return;                                      
	}


	// Show the OCAPI deprecation banner for English
	if ( typeof(ocapiBannerElement) != 'undefined' ) {
		if ( ocapiBannerElement != null ) {
			ocapiBannerElement.style.display = "none";
		}
	}


	// If sessionStorage is supported, check if the sessionConsentFlag is true.
	// Return immediately if true.
	if(ssTest() === true){  
    	ssFlag = true;
    	if ( sessionStorage.getItem('sessionConsentFlag') == 'true' ) {
			return;                
		} 
	}	
	 
	// If localStorage isn't supported, return immediately.
	// If it is supported, check if the localConsentFlag is true.
	// Return immediately if true; othewise, display the banner and wait 
	// for the user's response.
	if(lsTest() === true){   
    	if ( localStorage.getItem('localConsentFlag') == 'true' ) {
			return;                
		}else{
			// Display the banner
			document.getElementById("cookieConsent").style.display = "none";
		} 
	}else{
    	return; 
	}

	return;
}

// Close the banner and set the flags.
function closeBanner() {
	document.getElementById("cookieConsent").style.display = "none";
	localStorage.setItem('localConsentFlag', 'true');
	if(ssFlag) {
		sessionStorage.setItem('sessionConsentFlag', 'true');
	}
	return;
}

// Close the deprecation banner.
function closeDeprecationBanner() {
	var ocapiBannerElem =  document.getElementById('ocapiDeprecationBanner');
	if ( typeof(ocapiBannerElem) != 'undefined' ) {
		if ( ocapiBannerElem != null ) {
			ocapiBannerElem.style.display = "none";
		}
	}
	return;
}

function lsTest(){
    var lcTest = 'test';
    try {
        localStorage.setItem(lcTest, lcTest);
        localStorage.removeItem(lcTest);
        return true;
    } catch(e) {
        return false;
    }
}

function ssTest(){
    var sstest = 'test';
    try {
        sessionStorage.setItem(sstest, sstest);
        sessionStorage.removeItem(sstest);
        return true;
    } catch(e) {
        return false;
    }
}
</script>
</body>


</html>